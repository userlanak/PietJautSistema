(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[4105],{5813:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(5637),s=n(5893);function i(e){var t=e.step,n=e.saveConfig,i=e.edit,r=e.disabled;return i?(0,s.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,s.jsx)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:r,children:(0,a.__)("Save","bitform")})}):(0,s.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,s.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,s.jsxs)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform"),"✔"]})]})}},4105:function(e,t,n){"use strict";n.r(t);var a=n(2122),s=n(7294),i=n(5977),r=n(5637),l=n(5001),o=n(4383),c=n(5813),d=n(9965),m=n(2226),u=n(5893);t.default=function(e){var t=e.formFields,n=e.setIntegration,f=e.integrations,h=e.allIntegURL,g=(0,i.k6)(),b=(0,i.UO)(),v=b.id,p=b.formID,x=(0,s.useState)((0,a.Z)({},f[v])),_=x[0],j=x[1],C=(0,s.useState)(!1),w=C[0],y=C[1],k=(0,s.useState)({show:!1}),N=k[0],Z=k[1];return(0,u.jsxs)("div",{style:{width:900},children:[(0,u.jsx)(l.Z,{snack:N,setSnackbar:Z}),(0,u.jsxs)("div",{className:"flx mt-3",children:[(0,u.jsx)("b",{className:"wdt-200 d-in-b",children:(0,r.__)("Integration Name:","bitform")}),(0,u.jsx)("input",{className:"btcd-paper-inp w-7",onChange:function(e){return(0,d.R)(e,_,j)},name:"name",value:_.name,type:"text",placeholder:(0,r.__)("Integration Name...","bitform")})]}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(0,u.jsx)(m.Z,{formID:p,formFields:t,telegramConf:_,setTelegramConf:j,isLoading:w,setisLoading:y,setSnackbar:Z}),(0,u.jsx)(c.Z,{edit:!0,saveConfig:function(){return(0,o.Mm)(f,n,h,_,g,v,1)},disabled:""===_.chat_id}),(0,u.jsx)("br",{})]})}},9965:function(e,t,n){"use strict";n.d(t,{c:function(){return r},R:function(){return l}});var a=n(2122),s=n(5637),i=n(9492),r=function(e,t,n,r){var l=(0,a.Z)({},e),o={bot_api_key:l.bot_api_key};n(!0),(0,i.Z)(o,"bitforms_refresh_get_updates").then((function(e){e&&e.success?(l.default||(l.default={}),e.data.telegramChatLists&&(l.default.telegramChatLists=e.data.telegramChatLists),r({show:!0,msg:(0,s.__)("Chat list refreshed","bitform")}),t((0,a.Z)({},l))):e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,s.__)("Chat list refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,s.__)("please try again","bitform")}):r({show:!0,msg:(0,s.__)("Chat list refresh failed. please try again","bitform")}),n(!1)})).catch((function(){return n(!1)}))},l=function(e,t,n){var s=(0,a.Z)({},t);s.name=e.target.value,n((0,a.Z)({},s))}},2226:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var a=n(2122),s=n(7707),i=n(5637),r=n(8692),l=n(8381),o=n(3429),c=n(7294),d=n(4401),m=n(3921),u=n(5893);function f(e){var t,n=e.formFields,s=e.telegramConf,r=e.setTelegramConf,l=(0,c.useState)({show:!1}),o=l[0],f=l[1];return(0,u.jsxs)("div",{className:"pos-rel",children:[(0,u.jsx)("div",{className:"d-flx flx-wrp",children:(0,u.jsx)(m.Z,{onChange:function(){return f({show:"attachments"})},checked:"attachments"in s.actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:(0,i.__)("Attachments","bitform"),subTitle:(0,i.__)("Add attachments from BitForm to send Telegram.","bitform")})}),(0,u.jsxs)(d.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:"attachments"===o.show,close:function(){return f({show:!1})},action:function(){return f({show:!1})},title:(0,i.__)("Select Attachment","bitform"),children:[(0,u.jsx)("div",{className:"btcd-hr mt-2"}),(0,u.jsx)("div",{className:"mt-2",children:(0,i.__)("Please select file upload fields","bitform")}),(0,u.jsxs)("select",{onChange:function(e){return function(e){var t=(0,a.Z)({},s);""!==e.target.value?t.actions.attachments=e.target.value:delete t.actions.attachments,r((0,a.Z)({},t))}(e)},name:"attachments",value:null==(t=s.actions)?void 0:t.attachments,className:"btcd-paper-inp w-10 mt-2",children:[(0,u.jsx)("option",{value:"",children:(0,i.__)("Select file upload field","bitform")}),n.filter((function(e){return"file-up"===e.type})).map((function(e){return(0,u.jsx)("option",{value:e.key,children:e.name},e.key+1)}))]})]})]})}var h=n(9965);function g(e){e.formID;var t,n=e.formFields,c=e.telegramConf,d=e.setTelegramConf,m=e.isLoading,g=e.setisLoading,b=e.setSnackbar,v=function(e){var t=(0,a.Z)({},c);t[e.target.name]=e.target.value,d(t)},p=function(e){var t=(0,a.Z)({},c);t.body=t.body+" "+e+" ",d(t)},x=function(e){var t=(0,a.Z)({},c);null!=t&&t.body&&(t.body=""),t.parse_mode=e.target.value,d(t)};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("br",{}),(0,u.jsxs)("div",{className:"flx",children:[(0,u.jsx)("b",{className:"wdt-150 d-in-b",children:(0,i.__)("Chat List: ","bitform")}),(0,u.jsxs)("select",{onChange:v,name:"chat_id",value:c.chat_id,className:"btcd-paper-inp w-5",children:[(0,u.jsx)("option",{value:"",children:(0,i.__)("Select Chat List","bitform")}),(null==c||null==(t=c.default)?void 0:t.telegramChatLists)&&Object.keys(c.default.telegramChatLists).map((function(e){return(0,u.jsx)("option",{value:c.default.telegramChatLists[e].id,children:c.default.telegramChatLists[e].name},e)}))]}),(0,u.jsx)("button",{onClick:function(){return(0,h.c)(c,d,g,b)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh Telegram List","bitform")+"'"},type:"button",disabled:m,children:"↻"})]}),m&&(0,u.jsx)(l.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(null==c?void 0:c.chat_id)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"flx mt-4",children:[(0,u.jsx)("b",{className:"wdt-150 d-in-b",children:(0,i.__)("Parse Mode: ","bitform")}),(0,u.jsx)(r.Z,{radio:!0,onChange:function(e){return x(e)},name:"HTML",title:(0,u.jsx)("small",{className:"txt-dp",children:(0,i.__)("HTML","bitform")}),checked:"HTML"===c.parse_mode,value:"HTML"}),(0,u.jsx)(r.Z,{radio:!0,onChange:function(e){return x(e)},name:"MarkdownV2",title:(0,u.jsx)("small",{className:"txt-dp",children:(0,i.__)("Markdown v2","bitform")}),checked:"MarkdownV2"===c.parse_mode,value:"MarkdownV2"})]}),(0,u.jsxs)("div",{className:"flx mt-4",children:[(0,u.jsx)("b",{className:"wdt-150 d-in-b",children:(0,i.__)("Messages: ","bitform")}),"HTML"===(null==c?void 0:c.parse_mode)?(0,u.jsx)(o.Z,{formFields:n,value:c.body,onChangeHandler:p,width:"100%",toolbarMnu:"bold italic underline strikethrough | link | code | addFormField"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("textarea",{className:"w-7",onChange:v,name:"body",rows:"5",value:c.body}),(0,u.jsx)(s.Z,{options:n.filter((function(e){return"file-up"!==e.type})).map((function(e){return{label:e.name,value:"${"+e.key+"}"}})),className:"btcd-paper-drpdwn wdt-200 ml-2",singleSelect:!0,onChange:function(e){return p(e)}})]})]}),(0,u.jsx)("div",{className:"mt-4",children:(0,u.jsx)("b",{className:"wdt-100",children:(0,i.__)("Actions","bitform")})}),(0,u.jsx)("div",{className:"btcd-hr mt-1"}),(0,u.jsx)(f,{telegramConf:c,setTelegramConf:d,formFields:n})]})]})}},3429:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(7294),s=n(5637),i=n(5893);function r(e){var t=e.formFields,n=e.id,r=e.value,l=e.onChangeHandler,o=e.toolbarMnu,c=e.height,d=e.width;(0,a.useEffect)((function(){return window.tinymce&&tinymce.remove(),function(){return window.tinymce&&tinymce.remove()}}),[]),(0,a.useEffect)((function(){window.tinymce&&tinymce.remove(),m()}),[t,n]);var m=function(){if("undefined"!==typeof tinymce&&(!t||(null==t?void 0:t.length)>0)){for(var e=document.querySelectorAll(".form-fields-em"),a=0;a<e.length;a+=1)e[a].style.display="none";tinymce.init({selector:"textarea#"+n+"-settings",height:c||150,width:d||"100%",branding:!1,resize:"verticle",convert_urls:!1,theme:"modern",plugins:"directionality fullscreen image link media charmap hr lists textcolor colorpicker wordpress",toolbar:o||"formatselect | fontsizeselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat toogleCode wp_code| addFormField",image_advtab:!0,default_link_target:"_blank",setup:function(e){e.on("Paste Change input Undo Redo",(function(){l(e.getContent())})),t&&e.addButton("addFormField",{text:"Form Fields ",tooltip:"Add Form Field Value in Message",type:"menubutton",icon:!1,menu:null==t?void 0:t.map((function(t){return!t.type.match(/^(file-up|recaptcha)$/)&&{text:t.name,onClick:function(){e.insertContent("${"+t.key+"}")}}}))}),e.addButton("toogleCode",{text:"</>",tooltip:(0,s.__)("Toggle preview","bitform"),icon:!1,onclick:function(t){var a=t.control.$,s=a("#"+n+"-settings"),i=a(e.iframeElement);s.value=e.getContent({source_view:!0}),i.toggleClass("hidden"),s.toggleClass("visible"),a("iframe.hidden").length>0?s.prependTo(".mce-edit-area"):e.setContent(document.getElementById(n+"-settings").value)}})}})}};return(0,i.jsx)("textarea",{id:n+"-settings",className:"btcd-paper-inp mt-1",rows:"5",value:r,onChange:function(e){return l(e.target.value)},style:{width:"95.5%",height:"auto"}})}}}]);
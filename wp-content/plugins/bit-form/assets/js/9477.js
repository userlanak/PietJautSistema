(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[9477],{9477:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(2122),a=n(7294),i=n(9492),s=n(5637),l=n(5257),c=n(8480),o=n(5893);function d(e){e.formID;var t=e.enchargeConf,n=e.setEnchargeConf,d=e.step,f=e.setstep,m=e.setSnackbar,u=e.isInfo,h=(0,a.useState)(!1),b=h[0],_=h[1],p=(0,a.useState)({name:"",api_key:""}),g=p[0],y=p[1],x=(0,a.useState)(!1),k=x[0],v=x[1],j=(0,a.useState)(!1),N=j[0],I=j[1],C=function(e){var a=(0,r.Z)({},t),i=(0,r.Z)({},g);i[e.target.name]="",a[e.target.name]=e.target.value,y(i),n(a)};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"btcd-stp-page",style:(0,r.Z)({},{width:1===d&&900},{height:1===d&&"100%"}),children:[(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,s.__)("Integration Name:","bitform")})}),(0,o.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:C,name:"name",value:t.name,type:"text",placeholder:(0,s.__)("Integration Name...","bitform"),disabled:u}),(0,o.jsx)("div",{style:{color:"red",fontSize:"15px"},children:g.name}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,s.__)("API Key:","bitform")})}),(0,o.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:C,name:"api_key",value:t.api_key,type:"text",placeholder:(0,s.__)("API key","bitform"),disabled:u}),(0,o.jsx)("div",{style:{color:"red",fontSize:"15px"},children:g.api_key}),(0,o.jsxs)("small",{className:"d-blk mt-5",children:[(0,s.__)("To get API , Please Visit","bitform")," ",(0,o.jsx)("a",{className:"btcd-link",href:"https://app.encharge.io/account/info",target:"_blank",rel:"noreferrer",children:(0,s.__)("Encharge API Console","bitform")})]}),"auth"===N&&(0,o.jsxs)("div",{className:"flx mt-5",children:[(0,o.jsx)(l.Z,{size:"25",clr:"#022217",className:"mr-2"}),"Checking API Key!!!"]}),k&&!b&&!N&&(0,o.jsxs)("div",{className:"flx mt-5",style:{color:"red"},children:[(0,o.jsx)("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"Sorry, API key is invalid"]}),!u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:function(){var e=(0,r.Z)({},t);if(e.name&&e.api_key){I("auth");var n={api_key:e.api_key};(0,i.Z)(n,"bitforms_encharge_authorize").then((function(e){null!=e&&e.success&&(_(!0),m({show:!0,msg:(0,s.__)("Authorized Successfully","bitfrom")})),v(!0),I(!1)}))}else y({name:e.name?"":(0,s.__)("Integration name cann't be empty","bitform"),api_key:e.api_key?"":(0,s.__)("API Key cann't be empty","bitform")})},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:b,children:[b?(0,s.__)("Authorized ✔","bitform"):(0,s.__)("Authorize","bitform"),N&&(0,o.jsx)(l.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("button",{onClick:function(){return f(2),(0,c.nI)(t,n,I,m),void(document.querySelector(".btcd-s-wrp").scrollTop=0)},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!b,children:[(0,s.__)("Next","bitform"),(0,o.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})})}},8480:function(e,t,n){"use strict";n.d(t,{Rx:function(){return s},nI:function(){return l},Pd:function(){return c}});var r=n(2122),a=n(9492),i=n(5637),s=function(e,t,n){var a=(0,r.Z)({},t);a.name=e.target.value,n((0,r.Z)({},a))},l=function(e,t,n,s){var l={api_key:e.api_key},c=(0,r.Z)({},e);(0,a.Z)(l,"bitforms_encharge_headers").then((function(e){if(e&&e.success){if(c.default||(c.default={}),e.data.enChargeFields){c.default.fields=e.data.enChargeFields;var a=c.default.fields;c.field_map=Object.values(a).filter((function(e){return e.required})).map((function(e){return{formField:"",enChargeFields:e.fieldId,required:!0}})),s({show:!0,msg:(0,i.__)("Encharge fields refreshed","bitform")})}else s({show:!0,msg:(0,i.__)("No Encharge fields found. Try changing the header row number or try again","bitform")});t((0,r.Z)({},c))}else s({show:!0,msg:(0,i.__)("Encharge fields refresh failed. please try again","bitform")});n(!1)})).catch((function(){return n(!1)}))},c=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.enChargeFields&&e.required})):[]).length>0)}}}]);
(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[5538],{5538:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var n=a(2122),i=a(7294),r=a(5637),s=a(9151),o=a(5257),l=a(4529),c=a(5893);function d(e){var t=e.formID,a=e.campaignsConf,d=e.setCampaignsConf,m=e.step,f=e.setstep,u=e.isLoading,h=e.setisLoading,_=e.setSnackbar,b=e.redirectLocation,p=e.isInfo,g=(0,i.useState)(!1),v=g[0],C=g[1],x=(0,i.useState)({dataCenter:"",clientId:"",clientSecret:""}),j=x[0],w=x[1],k=function(e){var t=(0,n.Z)({},a),i=(0,n.Z)({},j);i[e.target.name]="",t[e.target.name]=e.target.value,w(i),d(t)};return(0,c.jsxs)("div",{className:"btcd-stp-page",style:(0,n.Z)({},{width:1===m&&900},{height:1===m&&"100%"}),children:[(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Integration Name:","bitform")})}),(0,c.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:k,name:"name",value:a.name,type:"text",placeholder:(0,r.__)("Integration Name...","bitform"),disabled:p}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Data Center:","bitform")})}),(0,c.jsxs)("select",{onChange:k,name:"dataCenter",value:a.dataCenter,className:"btcd-paper-inp w-9 mt-1",disabled:p,children:[(0,c.jsx)("option",{value:"",children:(0,r.__)("--Select a data center--","bitform")}),(0,c.jsx)("option",{value:"com",children:"zoho.com"}),(0,c.jsx)("option",{value:"eu",children:"zoho.eu"}),(0,c.jsx)("option",{value:"com.cn",children:"zoho.com.cn"}),(0,c.jsx)("option",{value:"in",children:"zoho.in"}),(0,c.jsx)("option",{value:"com.au",children:"zoho.com.au"})]}),(0,c.jsx)("div",{style:{color:"red"},children:j.dataCenter}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Homepage URL:","bitform")})}),(0,c.jsx)(s.Z,{value:""+window.location.origin,setSnackbar:_,className:"field-key-cpy w-6 ml-0",readOnly:p}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Authorized Redirect URIs:","bitform")})}),(0,c.jsx)(s.Z,{value:b||window.location.href+"/redirect",setSnackbar:_,className:"field-key-cpy w-6 ml-0",readOnly:p}),(0,c.jsxs)("small",{className:"d-blk mt-5",children:[(0,r.__)("To get Client ID and SECRET , Please Visit","bitform")," ",(0,c.jsx)("a",{className:"btcd-link",href:"https://api-console.zoho."+((null==a?void 0:a.dataCenter)||"com")+"/",target:"_blank",rel:"noreferrer",children:(0,r.__)("Zoho API Console","bitform")})]}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Client id:","bitform")})}),(0,c.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:k,name:"clientId",value:a.clientId,type:"text",placeholder:(0,r.__)("Client id...","bitform"),disabled:p}),(0,c.jsx)("div",{style:{color:"red"},children:j.clientId}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Client secret:","bitform")})}),(0,c.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:k,name:"clientSecret",value:a.clientSecret,type:"text",placeholder:(0,r.__)("Client secret...","bitform"),disabled:p}),(0,c.jsx)("div",{style:{color:"red"},children:j.clientSecret}),!p&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("button",{onClick:function(){return(0,l.P_)(a,d,w,C,h,_)},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:v,children:[v?(0,r.__)("Authorized âœ”","bitform"):(0,r.__)("Authorize","bitform"),u&&(0,c.jsx)(o.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,c.jsx)("br",{}),(0,c.jsxs)("button",{onClick:function(){f(2),(0,l.aS)(t,a,d,h,_),document.querySelector(".btcd-s-wrp").scrollTop=0},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!v,children:[(0,r.__)("Next","bitform"),(0,c.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})}},4529:function(e,t,a){"use strict";a.d(t,{P_:function(){return s},Rx:function(){return l},aS:function(){return d},Pg:function(){return m},Pd:function(){return f}});var n=a(2122),i=a(5637),r=a(9492),s=function(e,t,a,r,s,l){if(e.dataCenter&&e.clientId&&e.clientSecret){s(!0);var c="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=ZohoCampaigns.contact.READ,ZohoCampaigns.contact.CREATE,ZohoCampaigns.contact.UPDATE&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+encodeURIComponent(window.location.href)+"/redirect",d=window.open(c,"zohoCampaigns","width=400,height=609,toolbar=off"),m=setInterval((function(){if(d.closed){clearInterval(m);var a={},c=!1,f=localStorage.getItem("__bitforms_zohoCampaigns");if(f&&(c=!0,a=JSON.parse(f),localStorage.removeItem("__bitforms_zohoCampaigns")),a.code&&!a.error&&a&&c){var u=(0,n.Z)({},e);u.accountServer=a["accounts-server"],o(a,u,t,r,s,l)}else{var h=a.error?"Cause: "+a.error:"";l({show:!0,msg:(0,i.__)("Authorization failed","bitform")+" "+h+". "+(0,i.__)("please try again","bitform")}),s(!1)}}}),500)}else a({dataCenter:e.dataCenter?"":(0,i.__)("Data center cann't be empty","bitform"),clientId:e.clientId?"":(0,i.__)("Client ID cann't be empty","bitform"),clientSecret:e.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitform")})},o=function(e,t,a,s,o,l){var c=(0,n.Z)({},e);c.dataCenter=t.dataCenter,c.clientId=t.clientId,c.clientSecret=t.clientSecret,c.redirectURI=encodeURIComponent(window.location.href)+"/redirect",(0,r.Z)(c,"bitforms_zcampaigns_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var r=(0,n.Z)({},t);r.tokenDetails=e.data,a(r),s(!0),l({show:!0,msg:(0,i.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?l({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):l({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitform")});o(!1)}))},l=function(e,t,a,i,r,s){var o=(0,n.Z)({},a);switch(o[e.target.name]=e.target.value,e.target.name){case"list":o=c(o,t,i,r,s)}i((0,n.Z)({},o))},c=function(e,t,a,i,r){var s,o,l=(0,n.Z)({},e);return l.field_map=[{formField:"",zohoFormField:"Contact Email"}],null!=l&&null!=(s=l.default)&&null!=(o=s.fields)&&o[l.list]||m(t,l,a,i,r),l},d=function(e,t,a,s,o){s(!0);var l={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,r.Z)(l,"bitforms_zcampaigns_refresh_lists").then((function(e){if(e&&e.success){var r=(0,n.Z)({},t);e.data.lists&&(r.default=(0,n.Z)({},r.default,{lists:e.data.lists})),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),o({show:!0,msg:(0,i.__)("Lists refreshed","bitform")}),a((0,n.Z)({},r))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,i.__)("Lists refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):o({show:!0,msg:(0,i.__)("Lists refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},m=function(e,t,a,s,o){var l=t.list;if(l){s(!0);var c={formID:e,list:l,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,r.Z)(c,"bitforms_zcampaigns_refresh_contact_fields").then((function(e){if(e&&e.success){var r=(0,n.Z)({},t);e.data.fields?(r.default.fields||(r.default.fields={}),r.default.fields[l]=e.data,e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),o({show:!0,msg:(0,i.__)("Contact Fields refreshed","bitform")})):o({show:!0,msg:(0,i.__)("Zoho didn't provide fields names for this list","bitform")}),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),a((0,n.Z)({},r))}else o({show:!0,msg:(0,i.__)("Contact Fields refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))}},f=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(t){var a,n,i;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(a=e.default)||null==(n=a.fields)||null==(i=n[e.list])?void 0:i.required.indexOf(t.zohoFormField))})):[]).length>0)}}}]);
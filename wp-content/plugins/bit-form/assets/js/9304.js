(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[9304],{9304:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var r=a(2122),n=a(7294),s=a(5637),i=a(9151),o=a(5257),l=a(1276),d=a(5893);function c(e){var t=e.formID,a=e.workDriveConf,c=e.setWorkDriveConf,f=e.step,m=e.setstep,u=e.isLoading,h=e.setisLoading,_=e.setSnackbar,b=e.redirectLocation,p=e.isInfo,v=(0,n.useState)(!1),g=v[0],k=v[1],w=(0,n.useState)({dataCenter:"",clientId:"",clientSecret:""}),C=w[0],D=w[1],x=function(e){var t=(0,r.Z)({},a),n=(0,r.Z)({},C);n[e.target.name]="",t[e.target.name]=e.target.value,D(n),c(t)};return(0,d.jsxs)("div",{className:"btcd-stp-page",style:(0,r.Z)({},{width:1===f&&900},{height:1===f&&"100%"}),children:[(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Integration Name:","bitform")})}),(0,d.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"name",value:a.name,type:"text",placeholder:(0,s.__)("Integration Name...","bitform"),disabled:p}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Data Center:","bitform")})}),(0,d.jsxs)("select",{onChange:x,name:"dataCenter",value:a.dataCenter,className:"btcd-paper-inp w-9 mt-1",disabled:p,children:[(0,d.jsx)("option",{value:"",children:(0,s.__)("--Select a data center--","bitform")}),(0,d.jsx)("option",{value:"com",children:"zoho.com"}),(0,d.jsx)("option",{value:"eu",children:"zoho.eu"}),(0,d.jsx)("option",{value:"com.cn",children:"zoho.com.cn"}),(0,d.jsx)("option",{value:"in",children:"zoho.in"}),(0,d.jsx)("option",{value:"com.au",children:"zoho.com.au"})]}),(0,d.jsx)("div",{style:{color:"red"},children:C.dataCenter}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Homepage URL:","bitform")})}),(0,d.jsx)(i.Z,{value:""+window.location.origin,setSnackbar:_,className:"field-key-cpy w-6 ml-0",readOnly:p}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Authorized Redirect URIs:","bitform")})}),(0,d.jsx)(i.Z,{value:b||window.location.href+"/redirect",setSnackbar:_,className:"field-key-cpy w-6 ml-0",readOnly:p}),(0,d.jsxs)("small",{className:"d-blk mt-5",children:[(0,s.__)("To get Client ID and SECRET , Please Visit","bitform")," ",(0,d.jsx)("a",{className:"btcd-link",href:"https://api-console.zoho."+((null==a?void 0:a.dataCenter)||"com")+"/",target:"_blank",rel:"noreferrer",children:(0,s.__)("Zoho API Console","bitform")})]}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Client id:","bitform")})}),(0,d.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"clientId",value:a.clientId,type:"text",placeholder:(0,s.__)("Client id...","bitform"),disabled:p}),(0,d.jsx)("div",{style:{color:"red"},children:C.clientId}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Client secret:","bitform")})}),(0,d.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"clientSecret",value:a.clientSecret,type:"text",placeholder:(0,s.__)("Client secret...","bitform"),disabled:p}),(0,d.jsx)("div",{style:{color:"red"},children:C.clientSecret}),!p&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("button",{onClick:function(){return(0,l.P_)(a,c,D,k,h,_)},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:g,children:[g?(0,s.__)("Authorized âœ”","bitform"):(0,s.__)("Authorize","bitform"),u&&(0,d.jsx)(o.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,d.jsx)("br",{}),(0,d.jsxs)("button",{onClick:function(){m(2),(0,l.V9)(t,a,c,h,_),document.querySelector(".btcd-s-wrp").scrollTop=0},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!g,children:[(0,s.__)("Next","bitform"),(0,d.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})}},1276:function(e,t,a){"use strict";a.d(t,{Rx:function(){return o},V9:function(){return c},B5:function(){return f},ud:function(){return m},n:function(){return u},P_:function(){return h}});var r=a(2122),n=a(5637),s=a(9492),i=a(2249),o=function(e,t,a,n,s,i,o,c,f,m){var u=(0,r.Z)({},t);if(c){var h=(0,r.Z)({},f);h[e.target.name]="",m((0,r.Z)({},h))}switch(u[e.target.name]=e.target.value,e.target.name){case"team":u=l(u,n,a,s,i);break;case"folder":u.folderMap=u.folderMap.slice(0,o),u=d(u,n,a,s,i)}a((0,r.Z)({},u))},l=function(e,t,a,n,s){var i,o,l=(0,r.Z)({},e);return l.folder="",!l.team||null!=l&&null!=(i=l.default)&&null!=(o=i.teamFolders)&&o[l.team]||f(t,l,a,n,s),l},d=function(e,t,a,n,s){var i,o,l,d,c,f,u=(0,r.Z)({},e);(delete u.teamType,!u.folder||null!=(i=u.default)&&null!=(o=i.folders)&&o[u.folder])?u.folder&&u.folder!==u.folderMap[u.folderMap.length-1]&&u.folderMap.push(u.folder):("private"===(null==(l=u.default)||null==(d=l.teamFolders)||null==(c=d[u.team])||null==(f=c[u.folder])?void 0:f.type)&&(u.teamType="private"),m(t,u,a,n,s));return u},c=function(e,t,a,i,o){i(!0);var l={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,s.Z)(l,"bitforms_zworkdrive_refresh_teams").then((function(e){if(e&&e.success){var s=(0,r.Z)({},t);e.data.teams&&(s.default=(0,r.Z)({},s.default,{teams:e.data.teams})),e.data.tokenDetails&&(s.tokenDetails=e.data.tokenDetails),o({show:!0,msg:(0,n.__)("Teams refreshed","bitform")}),a((0,r.Z)({},s))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:(0,n.g)((0,n.__)("Teams refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):o({show:!0,msg:(0,n.__)("Teams refresh failed. please try again","bitform")});i(!1)})).catch((function(){return i(!1)}))},f=function(e,t,a,i,o){i(!0);var l={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,team:t.team};(0,s.Z)(l,"bitforms_zworkdrive_refresh_team_folders").then((function(e){if(e&&e.success){var s=(0,r.Z)({},t);s.default.teamFolders||(s.default.teamFolders={}),e.data.teamFolders&&(s.default.teamFolders[s.team]=e.data.teamFolders),e.data.tokenDetails&&(s.tokenDetails=e.data.tokenDetails),o({show:!0,msg:(0,n.__)("Folders refreshed","bitform")}),a((0,r.Z)({},s))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:(0,n.g)((0,n.__)("Folders refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):o({show:!0,msg:(0,n.__)("Folders refresh failed. please try again","bitform")});i(!1)})).catch((function(){return i(!1)}))},m=function(e,t,a,o,l,d){var c=d?t.folderMap[d]:t.folder;o(!0);var f={formID:e,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,team:t.team,folder:c,teamType:"teamType"in t?"private":"team"};(0,s.Z)(f,"bitforms_zworkdrive_refresh_sub_folders").then((function(e){if(e&&e.success){var s=(0,r.Z)({},t);e.data.folders?(s.default.folders||(s.default.folders={}),s.default.folders[c]=(0,i.SI)(e.data.folders,"folderName"),s.folderMap.includes(c)||s.folderMap.push(c),l({show:!0,msg:(0,n.__)("Sub Folders refreshed","bitform")})):l({show:!0,msg:(0,n.__)("No Sub Folder Found","bitform")}),e.data.tokenDetails&&(s.tokenDetails=e.data.tokenDetails),a((0,r.Z)({},s))}else l({show:!0,msg:(0,n.__)("Sub Folders refresh failed. please try again","bitform")});o(!1)})).catch((function(){return o(!1)}))},u=function(e,t,a,i,o){i(!0);var l={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,team:t.team};(0,s.Z)(l,"bitforms_zworkdrive_refresh_users").then((function(e){if(e&&e.success){var s=(0,r.Z)({},t);s.default.users||(s.default.users={}),e.data.users&&(s.default.users[t.team]=e.data.users),e.data.tokenDetails&&(s.tokenDetails=e.data.tokenDetails),o({show:!0,msg:(0,n.__)("Users refreshed","bitform")}),a((0,r.Z)({},s))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:(0,n.g)((0,n.__)("Users refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):o({show:!0,msg:(0,n.__)("Users refresh failed. please try again","bitform")});i(!1)})).catch((function(){return i(!1)}))},h=function(e,t,a,s,i,o){if(e.dataCenter&&e.clientId&&e.clientSecret){i(!0);var l="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=WorkDrive.team.READ,WorkDrive.workspace.READ,WorkDrive.workspace.CREATE,WorkDrive.workspace.UPDATE,WorkDrive.files.READ,WorkDrive.files.CREATE&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+encodeURIComponent(window.location.href)+"/redirect",d=window.open(l,"zohoWorkDrive","width=400,height=609,toolbar=off"),c=setInterval((function(){if(d.closed){clearInterval(c);var a={},l=!1,f=localStorage.getItem("__bitforms_zohoWorkDrive");if(f&&(l=!0,a=JSON.parse(f),localStorage.removeItem("__bitforms_zohoWorkDrive")),a.code&&!a.error&&a&&l){var m=(0,r.Z)({},e);m.accountServer=a["accounts-server"],_(a,m,t,s,i,o)}else{var u=a.error?"Cause: "+a.error:"";o({show:!0,msg:(0,n.__)("Authorization failed","bitform")+" "+u+". "+(0,n.__)("please try again","bitform")}),i(!1)}}}),500)}else a({dataCenter:e.dataCenter?"":(0,n.__)("Data center cann't be empty","bitform"),clientId:e.clientId?"":(0,n.__)("Client ID cann't be empty","bitform"),clientSecret:e.clientSecret?"":(0,n.__)("Secret key cann't be empty","bitform")})},_=function(e,t,a,i,o,l){var d=(0,r.Z)({},e);d.dataCenter=t.dataCenter,d.clientId=t.clientId,d.clientSecret=t.clientSecret,d.redirectURI=encodeURIComponent(window.location.href)+"/redirect",(0,s.Z)(d,"bitforms_zworkdrive_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var s=(0,r.Z)({},t);s.tokenDetails=e.data,a(s),i(!0),l({show:!0,msg:(0,n.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?l({show:!0,msg:""+(0,n.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,n.__)("please try again","bitform")}):l({show:!0,msg:(0,n.__)("Authorization failed. please try again","bitform")});o(!1)}))}}}]);
(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[5183],{5813:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(5637),i=n(5893);function l(e){var t=e.step,n=e.saveConfig,l=e.edit,s=e.disabled;return l?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:s,children:(0,a.__)("Save","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform"),"✔"]})]})}},9281:function(e,t,n){"use strict";n.d(t,{Rx:function(){return s},Zo:function(){return o},V9:function(){return c},WK:function(){return d},P_:function(){return m}});var a=n(2122),i=n(5637),l=n(9492),s=function(e,t,n,i,l,s,o,c,d){var m=(0,a.Z)({},t);if(o){var u=(0,a.Z)({},c);u[e.target.name]="",d((0,a.Z)({},u))}switch(m[e.target.name]=e.target.value,e.target.name){case"template":m=r(m,i,n,l,s)}n((0,a.Z)({},m))},r=function(e,t,n,i,l){var s,r,o=(0,a.Z)({},e);return o.table="",o.field_map=[{formField:"",zohoFormField:""}],delete o.templateActions,null!=o&&null!=(s=o.default)&&null!=(r=s.templateDetails)&&r[e.template]||c(t,o,n,i,l),o},o=function(e,t,n,s,r){s(!0);var o={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,l.Z)(o,"bitforms_zsign_refresh_templates").then((function(e){if(e&&e.success){var l=(0,a.Z)({},t);l.default||(l.default={}),e.data.templates&&(l.default.templates=e.data.templates),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,i.__)("Templates refreshed","bitform")}),n((0,a.Z)({},l))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:(0,i.g)((0,i.__)("Templates refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):r({show:!0,msg:(0,i.__)("Templates refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},c=function(e,t,n,s,r){var o=t.template;s(!0);var c={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,template:o};(0,l.Z)(c,"bitforms_zsign_refresh_template_details").then((function(e){if(e&&e.success){var l=(0,a.Z)({},t);l.default||(l.default={}),l.default.templateDetails||(l.default.templateDetails={}),e.data.templateDetails&&(l.default.templateDetails[o]=e.data.templateDetails),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,i.__)("Template Details refreshed","bitform")}),n((0,a.Z)({},l))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:(0,i.g)((0,i.__)("Template Details refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):r({show:!0,msg:(0,i.__)("Template Details refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},d=function(e){var t={},n=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");n&&n.forEach((function(e){var n=e.split("=");n[1]&&(t[n[0]]=n[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},m=function(e,t,n,l,s,r){if(e.dataCenter&&e.clientId&&e.clientSecret){s(!0);var o="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=ZohoSign.templates.CREATE,ZohoSign.templates.READ,ZohoSign.templates.UPDATE&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+encodeURIComponent(window.location.href)+"/redirect",c=window.open(o,"zohoSign","width=400,height=609,toolbar=off"),d=setInterval((function(){if(c.closed){clearInterval(d);var n={},o=!1,m=localStorage.getItem("__bitforms_zohoSign");if(m&&(o=!0,n=JSON.parse(m),localStorage.removeItem("__bitforms_zohoSign")),n.code&&!n.error&&n&&o){var p=(0,a.Z)({},e);p.accountServer=n["accounts-server"],u(n,p,t,l,s,r)}else{var f=n.error?"Cause: "+n.error:"";r({show:!0,msg:(0,i.__)("Authorization failed","bitform")+" "+f+". "+(0,i.__)("please try again","bitform")}),s(!1)}}}),500)}else n({dataCenter:e.dataCenter?"":(0,i.__)("Data center cann't be empty","bitform"),clientId:e.clientId?"":(0,i.__)("Client ID cann't be empty","bitform"),clientSecret:e.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitform")})},u=function(e,t,n,s,r,o){var c=(0,a.Z)({},e);c.dataCenter=t.dataCenter,c.clientId=t.clientId,c.clientSecret=t.clientSecret,c.redirectURI=encodeURIComponent(window.location.href)+"/redirect",(0,l.Z)(c,"bitforms_zsign_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var l=(0,a.Z)({},t);l.tokenDetails=e.data,n(l),s(!0),o({show:!0,msg:(0,i.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):o({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitform")});r(!1)}))}},4445:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(2122),i=n(7294),l=n(7707),s=n(5637),r=(n(8774),n(2249)),o=n(4401),c=n(8381),d=n(9281),m=n(5893);function u(e){var t,n,u,p,f,h,_,b,v,g,x=e.formID,y=e.formFields,w=e.signConf,j=e.setSignConf,N=e.isLoading,C=e.setisLoading,S=e.setSnackbar,k=(0,i.useState)({show:!1}),I=k[0],D=k[1],Z=(0,i.useState)(""),R=Z[0],A=Z[1];!w.template||null==w||null==(t=w.default)||null==(n=t.templateDetails)||!n[null==w?void 0:w.template]||null!=w&&w.templateActions&&w.templateActions.length===(null==w||null==(u=w.default)||null==(p=u.templateDetails)||null==(f=p[null==w?void 0:w.template])||null==(h=f.actions)?void 0:h.length)||(w.templateActions=w.default.templateDetails[w.template].actions.map((function(e){return{action_id:e.action_id,action_type:e.action_type,language:e.language,private_notes:e.private_notes,recipient_countrycode:e.recipient_countrycode,recipient_email:e.recipient_email,recipient_name:e.recipient_name,recipient_phonenumber:e.recipient_phonenumber,in_person_name:e.in_person_name||"",in_person_email:e.in_person_email||"",role:e.role,verify_recipient:e.verify_recipient,verification_type:e.verification_type||""}})),w.notes=w.default.templateDetails[w.template].notes||"");(0,i.useEffect)((function(){window.tinymce&&tinymce.remove()}),[]),(0,i.useEffect)((function(){!function(){if("undefined"!==typeof tinymce&&y.length>0){for(var e=document.querySelectorAll(".form-fields-em"),t=0;t<e.length;t+=1)e[t].style.display="none";tinymce.init({selector:"#body-content",plugins:"link hr lists wpview wpemoji",theme:"modern",menubar:!1,branding:!1,resize:"verticle",min_width:300,toolbar:"formatselect bold italic | alignleft aligncenter alignright | outdent indent | link | undo redo | hr | addFormField | toggleCode",setup:function(e){e.on("Paste Change input Undo Redo",(function(){F(e.getContent())})),e.addButton("addFormField",{text:"Form Fields ",tooltip:"Add Form Field Value in Message",type:"menubutton",icon:!1,menu:y.map((function(t){return!t.type.match(/^(file-up|recaptcha)$/)&&{text:t.name,onClick:function(){e.insertContent("${"+t.key+"}")}}}))}),e.addButton("toogleCode",{text:"</>",tooltip:(0,s.__)("Toggle preview","bitform"),icon:!1,onclick:function(t){var n=tinymce.dom.DomQuery,a=n("textarea"),i=n(e.iframeElement);a.value=e.getContent({source_view:!0}),i.toggleClass("hidden"),a.toggleClass("visible"),n("iframe.hidden").length>0?a.prependTo(".mce-edit-area"):(i.value=a.value,a.appendTo("body"))}})}})}}()}),[y]),(0,i.useEffect)((function(){j((function(e){var t=(0,a.Z)({},e);return t.notes=R,t}))}),[R]);var E=function(e,t,n){j((function(a){var i=(0,r.p$)(a);return"notes"===e?i.notes=n:i.templateActions[e][t]=n,i}))},F=function(e){A(e)},T=function(){D({show:!1})};return(0,m.jsxs)(m.Fragment,{children:[N&&(0,m.jsx)(c.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(0,m.jsxs)("div",{className:"flx",children:[(0,m.jsx)("b",{className:"wdt-100",children:(0,s.__)("Templates:","bitform")}),(0,m.jsxs)("select",{className:"btcd-paper-inp w-4",onChange:function(e){return(0,d.Rx)(e,w,j,x,C,S)},name:"template",value:w.template,children:[(0,m.jsx)("option",{value:"",children:(0,s.__)("Select Template","bitform")}),(null==w||null==(_=w.default)?void 0:_.templates)&&Object.values(w.default.templates).map((function(e){return(0,m.jsx)("option",{value:e.templateId,children:e.templateName},e.templateId)}))]}),(0,m.jsx)("button",{onClick:function(){return(0,d.Zo)(x,w,j,C,S)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,s.__)("Refresh Sign Templates","bitform")+"'"},type:"button",disabled:N,children:"↻"})]}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("b",{className:"wdt-100",children:(0,s.__)("Recipients:","bitform")}),(0,m.jsx)("button",{onClick:function(){return(0,d.V9)(x,w,j,C,S)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,s.__)("Refresh Template Details","bitform")+"'"},type:"button",disabled:N,children:"↻"}),null==w||null==(b=w.templateActions)?void 0:b.map((function(e,t){return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flx mt-2",children:[(0,m.jsx)("input",{type:"text",value:t+1,readOnly:!0,className:"btcd-paper-inp mr-1",style:{width:40}}),(0,m.jsx)("input",{className:"btcd-paper-inp w-3",type:"text",value:e.role,readOnly:!0})]}),"INPERSONSIGN"===e.action_type&&(0,m.jsxs)("div",{className:"flx mt-2",style:{marginLeft:45},children:[(0,m.jsx)("input",{type:"text",value:"Signer",readOnly:!0,className:"btcd-paper-inp mr-1 mt-4 w-1"}),(0,m.jsxs)("div",{className:"mr-2 w-4",children:[(0,m.jsx)("div",{className:"mb-1",children:(0,s.__)("In Person Email (Optional)","bitform")}),(0,m.jsx)(l.Z,{className:"msl-wrp-options btcd-paper-drpdwn w-10",defaultValue:e.in_person_email,options:y.map((function(e){return{label:e.name,value:"${"+e.key+"}"}})),onChange:function(e){return E(t,"in_person_email",e)},placeholder:(0,s.__)("In Person Email","bitform"),singleSelect:!0,customValue:!0})]}),(0,m.jsxs)("div",{className:"mr-2 w-4",children:[(0,m.jsx)("div",{className:"mb-1",children:(0,s.__)("In Person Name","bitform")}),(0,m.jsx)(l.Z,{className:"msl-wrp-options btcd-paper-drpdwn w-10",defaultValue:e.in_person_name,options:y.map((function(e){return{label:e.name,value:"${"+e.key+"}"}})),onChange:function(e){return E(t,"in_person_name",e)},placeholder:(0,s.__)("In Person Name","bitform"),singleSelect:!0,customValue:!0})]})]}),(0,m.jsxs)("div",{className:"flx mt-2",style:{marginLeft:45},children:["INPERSONSIGN"===e.action_type&&(0,m.jsx)("input",{type:"text",value:"Host",readOnly:!0,className:"btcd-paper-inp mr-1 mt-4 w-1"}),(0,m.jsxs)("div",{className:"mr-2 w-3",children:[(0,m.jsx)("div",{className:"mb-1",children:(0,s.__)("Recipient Email","bitform")}),(0,m.jsx)(l.Z,{className:"msl-wrp-options btcd-paper-drpdwn w-10",defaultValue:e.recipient_email,options:y.map((function(e){return{label:e.name,value:"${"+e.key+"}"}})),onChange:function(e){return E(t,"recipient_email",e)},placeholder:(0,s.__)("Recipient Email","bitform"),singleSelect:!0,customValue:!0})]}),(0,m.jsxs)("div",{className:"mr-2 w-3",children:[(0,m.jsx)("div",{className:"mb-1",children:(0,s.__)("Recipient Name","bitform")}),(0,m.jsx)(l.Z,{className:"msl-wrp-options btcd-paper-drpdwn w-10",defaultValue:e.recipient_name,options:y.map((function(e){return{label:e.name,value:"${"+e.key+"}"}})),onChange:function(e){return E(t,"recipient_name",e)},placeholder:(0,s.__)("Recipient Email","bitform"),singleSelect:!0,customValue:!0})]}),(0,m.jsxs)("div",{className:"mr-2 w-1",children:[(0,m.jsx)("div",{className:"mb-1",children:(0,s.__)("Language","bitform")}),(0,m.jsxs)("select",{onChange:function(e){return E(t,"language",e.target.value)},className:"btcd-paper-inp",value:e.language,children:[(0,m.jsx)("option",{value:"en",children:"English"}),(0,m.jsx)("option",{value:"fr",children:"French"}),(0,m.jsx)("option",{value:"de",children:"German"}),(0,m.jsx)("option",{value:"it",children:"Italian"}),(0,m.jsx)("option",{value:"ja",children:"Japanese"}),(0,m.jsx)("option",{value:"pl",children:"Polish"}),(0,m.jsx)("option",{value:"pt",children:"Portuguese"}),(0,m.jsx)("option",{value:"ru",children:"Russian"}),(0,m.jsx)("option",{value:"es",children:"Spanish"}),(0,m.jsx)("option",{value:"sv",children:"Swedish"})]})]}),(0,m.jsxs)("div",{className:"mr-1 w-2",children:[(0,m.jsx)("div",{className:"mb-1",children:(0,s.__)("Role","bitform")}),(0,m.jsx)("input",{type:"text",value:e.action_type,readOnly:!0,className:"btcd-paper-inp"})]}),(0,m.jsx)("button",{onClick:function(){D({show:"private_notes",indx:t})},className:"icn-btn mr-1 mt-3 tooltip",style:{"--tooltip-txt":"'"+(0,s.__)("Private Note","bitform")+"'"},"aria-label":"Private Message",type:"button",children:(0,m.jsx)("span",{className:"btcd-icn icn-envelope-open-o "+(e.private_notes&&"font-w-m")})})]})]},e.role)})),(0,m.jsxs)("div",{className:"mt-5",children:[(0,m.jsx)("b",{className:"wdt-100",children:(0,s.__)("Leave a Note:","bitform")}),(0,m.jsx)("textarea",{id:"body-content",className:"btcd-paper-inp mt-1",rows:"5",value:w.notes,onChange:function(e){return F(e.target.value)}})]}),(0,m.jsxs)(o.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:"private_notes"===I.show,close:T,action:T,title:(0,s.__)("Private Note","bitform"),children:[(0,m.jsx)("div",{className:"btcd-hr mt-2 mb-2"}),(0,m.jsxs)("select",{className:"btcd-paper-inp w-5",onChange:function(e){return t=e.target.value,void j((function(e){var n=(0,r.p$)(e);return n.templateActions[I.indx].private_notes+=t,n}));var t},children:[(0,m.jsx)("option",{value:"",children:(0,s.__)("Field","bitform")}),y.map((function(e){return"file-up"!==e.type&&(0,m.jsx)("option",{value:"${"+e.key+"}",children:e.name},"ff-zhcrm-"+e.key)}))]}),(0,m.jsx)("textarea",{rows:"5",className:"btcd-paper-inp mt-2",onChange:function(e){return E(I.indx,"private_notes",e.target.value)},value:null==(v=w.templateActions)||null==(g=v[I.indx])?void 0:g.private_notes})]})]})}}}]);
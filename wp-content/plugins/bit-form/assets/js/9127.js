(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[9127],{9127:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var r=a(2122),i=a(7294),n=a(5637),o=a(9151),l=a(5257),d=a(2333),s=a(5893);function c(e){var t=e.formID,a=e.creatorConf,c=e.setCreatorConf,f=e.step,m=e.setStep,u=e.isLoading,h=e.setisLoading,p=e.setSnackbar,_=e.redirectLocation,b=e.isInfo,g=(0,i.useState)(!1),v=g[0],C=g[1],I=(0,i.useState)({dataCenter:"",clientId:"",clientSecret:"",ownerEmail:""}),x=I[0],w=I[1],F=function(e){var t=(0,r.Z)({},a),i=(0,r.Z)({},x);i[e.target.name]="",t[e.target.name]=e.target.value,w(i),c(t)};return(0,s.jsxs)("div",{className:"btcd-stp-page",style:(0,r.Z)({},{width:1===f&&900},{height:1===f&&"100%"}),children:[(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("b",{children:(0,n.__)("Integration Name:","bitform")})}),(0,s.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:F,name:"name",value:a.name,type:"text",placeholder:(0,n.__)("Integration Name...","bitform"),disabled:b}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("b",{children:(0,n.__)("Data Center:","bitform")})}),(0,s.jsxs)("select",{onChange:F,name:"dataCenter",value:a.dataCenter,className:"btcd-paper-inp w-9 mt-1",disabled:b,children:[(0,s.jsx)("option",{value:"",children:(0,n.__)("--Select a data center--","bitform")}),(0,s.jsx)("option",{value:"com",children:"zoho.com"}),(0,s.jsx)("option",{value:"eu",children:"zoho.eu"}),(0,s.jsx)("option",{value:"com.cn",children:"zoho.com.cn"}),(0,s.jsx)("option",{value:"in",children:"zoho.in"}),(0,s.jsx)("option",{value:"com.au",children:"zoho.com.au"})]}),(0,s.jsx)("div",{style:{color:"red"},children:x.dataCenter}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("b",{children:(0,n.__)("Homepage URL:","bitform")})}),(0,s.jsx)(o.Z,{value:""+window.location.origin,setSnackbar:p,className:"field-key-cpy w-6 ml-0",readOnly:b}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("b",{children:(0,n.__)("Authorized Redirect URIs:","bitform")})}),(0,s.jsx)(o.Z,{value:_||window.location.href+"/redirect",setSnackbar:p,className:"field-key-cpy w-6 ml-0",readOnly:b}),(0,s.jsxs)("small",{className:"d-blk mt-5",children:[(0,n.__)("To get Client ID and SECRET , Please Visit","bitform")," ",(0,s.jsx)("a",{className:"btcd-link",href:"https://api-console.zoho."+((null==a?void 0:a.dataCenter)||"com")+"/",target:"_blank",rel:"noreferrer",children:(0,n.__)("Zoho API Console","bitform")})]}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("b",{children:(0,n.__)("Client id:","bitform")})}),(0,s.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:F,name:"clientId",value:a.clientId,type:"text",placeholder:(0,n.__)("Client id...","bitform"),disabled:b}),(0,s.jsx)("div",{style:{color:"red"},children:x.clientId}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("b",{children:(0,n.__)("Client secret:","bitform")})}),(0,s.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:F,name:"clientSecret",value:a.clientSecret,type:"text",placeholder:(0,n.__)("Client secret...","bitform"),disabled:b}),(0,s.jsx)("div",{style:{color:"red"},children:x.clientSecret}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("b",{children:(0,n.__)("Owner Name (Your Zoho Creator screen name):","bitform")})}),(0,s.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:function(e){return F(e)},name:"accountOwner",value:a.accountOwner,type:"text",placeholder:(0,n.__)("Your Zoho Creator screen name...","bitform"),disabled:b}),(0,s.jsx)("div",{style:{color:"red"},children:x.accountOwner}),!b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:function(){return(0,d.P_)(a,c,w,C,h,p)},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:v,children:[v?(0,n.__)("Authorized âœ”","bitform"):(0,n.__)("Authorize","bitform"),u&&(0,s.jsx)(l.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,s.jsx)("br",{}),(0,s.jsxs)("button",{onClick:function(){a.accountOwner?(m(2),a.department||(0,d.$P)(t,a,c,h,p),document.querySelector(".btcd-s-wrp").scrollTop=0):w({accountOwner:(0,n.__)("Account Owner Name is mandatory!","bitform")})},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!v,children:[(0,n.__)("Next","bitform"),(0,s.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})}},2333:function(e,t,a){"use strict";a.d(t,{P_:function(){return o},Rx:function(){return d},$P:function(){return f},GY:function(){return m},GX:function(){return u},Pd:function(){return p}});var r=a(2122),i=a(5637),n=a(9492),o=function(e,t,a,n,o,d){if(e.dataCenter&&e.clientId&&e.clientSecret){o(!0);var s="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=ZohoCreator.dashboard.READ,ZohoCreator.meta.application.READ,ZohoCreator.meta.form.READ,ZohoCreator.form.CREATE,ZohoCreator.report.CREATE,ZohoCreator.report.UPDATE&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+encodeURIComponent(window.location.href)+"/redirect",c=window.open(s,"zohoCreator","width=400,height=609,toolbar=off"),f=setInterval((function(){if(c.closed){clearInterval(f);var a={},s=!1,m=localStorage.getItem("__bitforms_zohoCreator");if(m&&(s=!0,a=JSON.parse(m),localStorage.removeItem("__bitforms_zohoCreator")),a.code&&!a.error&&a&&s){var u=(0,r.Z)({},e);u.accountServer=a["accounts-server"],l(a,u,t,n,o,d)}else{var h=a.error?"Cause: "+a.error:"";d({show:!0,msg:(0,i.__)("Authorization failed","bitform")+" "+h+". "+(0,i.__)("please try again","bitform")}),o(!1)}}}),500)}else a({dataCenter:e.dataCenter?"":(0,i.__)("Data center cann't be empty","bitform"),clientId:e.clientId?"":(0,i.__)("Client ID cann't be empty","bitform"),clientSecret:e.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitform")})},l=function(e,t,a,o,l,d){var s=(0,r.Z)({},e);s.dataCenter=t.dataCenter,s.clientId=t.clientId,s.clientSecret=t.clientSecret,s.redirectURI=encodeURIComponent(window.location.href)+"/redirect",(0,n.Z)(s,"bitforms_zcreator_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var n=(0,r.Z)({},t);n.tokenDetails=e.data,a(n),o(!0),d({show:!0,msg:(0,i.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?d({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):d({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitform")});l(!1)}))},d=function(e,t,a,i,n,o,l,d,f){var m=(0,r.Z)({},t);if(l){var u=(0,r.Z)({},d);u[e.target.name]="",f((0,r.Z)({},u))}switch(m[e.target.name]=e.target.value,e.target.name){case"applicationId":m=s(m,i,a,n,o);break;case"formId":m=c(m,i,a,n,o)}a((0,r.Z)({},m))},s=function(e,t,a,i,n){var o,l,d=(0,r.Z)({},e);return d.department="",d.field_map=[{formField:"",zohoFormField:""}],d.actions={},null!=d&&null!=(o=d.default)&&null!=(l=o.forms)&&l[d.applicationId]||m(t,d,a,i,n),d},c=function(e,t,a,i,n){var o,l,d=(0,r.Z)({},e);return d.field_map=[{formField:"",zohoFormField:""}],d.upload_field_map=[{formField:"",zohoFormField:""}],d.actions={},null!=d&&null!=(o=d.default)&&null!=(l=o.fields)&&l[d.orgId]?(d.field_map=h(d),Object.keys(d.default.fields[d.applicationId][d.formId].fileUploadFields).length>0&&(d.upload_field_map=h(d,!0))):u(t,d,a,i,n),d},f=function(e,t,a,o,l){o(!0);var d={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,n.Z)(d,"bitforms_zcreator_refresh_applications").then((function(e){if(e&&e.success){var n=(0,r.Z)({},t);e.data.applications&&(n.default=(0,r.Z)({},n.default,{applications:e.data.applications})),l({show:!0,msg:(0,i.__)("Applications refreshed","bitform")}),a((0,r.Z)({},n))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?l({show:!0,msg:""+(0,i.__)("Applications refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):l({show:!0,msg:(0,i.__)("Applications refresh failed. please try again","bitform")});o(!1)})).catch((function(){return o(!1)}))},m=function(e,t,a,o,l){var d=t.accountOwner,s=t.applicationId;o(!0);var c={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,accountOwner:d,applicationId:s};(0,n.Z)(c,"bitforms_zcreator_refresh_forms").then((function(e){if(e&&e.success){var n=(0,r.Z)({},t);n.default.forms||(n.default.forms={}),e.data.forms&&(n.default.forms[s]=e.data.forms),e.data.tokenDetails&&(n.tokenDetails=e.data.tokenDetails),l({show:!0,msg:(0,i.__)("Forms refreshed","bitform")}),a((0,r.Z)({},n))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?l({show:!0,msg:""+(0,i.__)("Forms refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):l({show:!0,msg:(0,i.__)("Forms refresh failed. please try again","bitform")});o(!1)})).catch((function(){return o(!1)}))},u=function(e,t,a,o,l){var d=t.accountOwner,s=t.applicationId,c=t.formId;o(!0);var f={formID:e,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,accountOwner:d,applicationId:s,formId:c};(0,n.Z)(f,"bitforms_zcreator_refresh_fields").then((function(e){if(e&&e.success){var n=(0,r.Z)({},t);e.data.fields?(n.default.fields||(n.default.fields={}),n.default.fields[s]||(n.default.fields[s]={}),n.default.fields[s][c]=(0,r.Z)({},e.data),n.field_map=h(n),Object.keys(e.data.fileUploadFields).length>0&&(n.upload_field_map=h(n,!0)),e.data.tokenDetails&&(n.tokenDetails=e.data.tokenDetails),l({show:!0,msg:(0,i.__)("Fields refreshed","bitform")})):l({show:!0,msg:""+(0,i.__)("Fields refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}),e.data.tokenDetails&&(n.tokenDetails=e.data.tokenDetails),a((0,r.Z)({},n))}else l({show:!0,msg:(0,i.__)("Fields refresh failed. please try again","bitform")});o(!1)})).catch((function(){return o(!1)}))},h=function(e,t){var a=e.applicationId,r=e.formId;return t?e.default.fields[a][r].requiredFileUploadFields.length>0?e.default.fields[a][r].requiredFileUploadFields.map((function(e){return{formField:"",zohoFormField:e}})):[{formField:"",zohoFormField:""}]:e.default.fields[a][r].required.length>0?e.default.fields[a][r].required.map((function(e){return{formField:"",zohoFormField:e}})):[{formField:"",zohoFormField:""}]},p=function(e){var t=null!=e&&e.field_map?e.field_map.filter((function(t){var a,r,i,n;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(a=e.default)||null==(r=a.fields)||null==(i=r[e.applicationId])||null==(n=i[e.formId])?void 0:n.required.indexOf(t.zohoFormField))})):[],a=null!=e&&e.upload_field_map?e.upload_field_map.filter((function(t){var a,r,i,n;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(a=e.default)||null==(r=a.fields)||null==(i=r[e.applicationId])||null==(n=i[e.formId])?void 0:n.requiredFileUploadFields.indexOf(t.zohoFormField))})):[];return!(t.length>0||a.length>0)}}}]);
(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[7060,9477],{7060:function(e,t,n){"use strict";n.r(t);var s=n(7294),a=(n(8774),n(5977)),i=n(5637),r=n(5001),l=n(3231),c=n(4383),d=n(5813),o=n(9477),u=n(8480),m=n(1109),f=n(5893);t.default=function(e){var t=e.formFields,n=e.setIntegration,h=e.integrations,b=e.allIntegURL,p=(0,a.k6)(),x=(0,a.UO)().formID,g=(0,s.useState)(!1),v=g[0],_=g[1],j=(0,s.useState)(1),N=j[0],y=j[1],C=(0,s.useState)({show:!1}),k=C[0],F=C[1],I=(0,s.useState)({name:"Encharge API",type:"Encharge",lists:[],api_key:"",field_map:[{formField:"",enChargeFields:""}],actions:{}}),Z=I[0],S=I[1];return(0,f.jsxs)("div",{children:[(0,f.jsx)(r.Z,{snack:k,setSnackbar:F}),(0,f.jsx)("div",{className:"txt-center w-9 mt-2",children:(0,f.jsx)(l.Z,{step:3,active:N})}),(0,f.jsx)(o.default,{formID:x,enchargeConf:Z,setEnchargeConf:S,step:N,setstep:y,isLoading:v,setisLoading:_,setSnackbar:F}),(0,f.jsxs)("div",{className:"btcd-stp-page",style:{width:2===N&&900,minHeight:2===N&&"900px"},children:[(0,f.jsx)(m.Z,{formID:x,formFields:t,enchargeConf:Z,setEnchargeConf:S}),(0,f.jsxs)("button",{onClick:function(){return function(e){if(3===e){if(!(0,u.Pd)(Z))return void F({show:!0,msg:"Please map all required fields to continue."});""!==Z.name&&Z.field_map.length>0&&y(3)}document.querySelector(".btcd-s-wrp").scrollTop=0}(3)},disabled:Z.field_map.length<1,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[(0,i.__)("Next","bitform")," "," ",(0,f.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(0,f.jsx)(d.Z,{step:N,saveConfig:function(){return(0,c.Mm)(h,n,b,Z,p)}})]})}},9477:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var s=n(2122),a=n(7294),i=n(9492),r=n(5637),l=n(5257),c=n(8480),d=n(5893);function o(e){e.formID;var t=e.enchargeConf,n=e.setEnchargeConf,o=e.step,u=e.setstep,m=e.setSnackbar,f=e.isInfo,h=(0,a.useState)(!1),b=h[0],p=h[1],x=(0,a.useState)({name:"",api_key:""}),g=x[0],v=x[1],_=(0,a.useState)(!1),j=_[0],N=_[1],y=(0,a.useState)(!1),C=y[0],k=y[1],F=function(e){var a=(0,s.Z)({},t),i=(0,s.Z)({},g);i[e.target.name]="",a[e.target.name]=e.target.value,v(i),n(a)};return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"btcd-stp-page",style:(0,s.Z)({},{width:1===o&&900},{height:1===o&&"100%"}),children:[(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,r.__)("Integration Name:","bitform")})}),(0,d.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:F,name:"name",value:t.name,type:"text",placeholder:(0,r.__)("Integration Name...","bitform"),disabled:f}),(0,d.jsx)("div",{style:{color:"red",fontSize:"15px"},children:g.name}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,r.__)("API Key:","bitform")})}),(0,d.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:F,name:"api_key",value:t.api_key,type:"text",placeholder:(0,r.__)("API key","bitform"),disabled:f}),(0,d.jsx)("div",{style:{color:"red",fontSize:"15px"},children:g.api_key}),(0,d.jsxs)("small",{className:"d-blk mt-5",children:[(0,r.__)("To get API , Please Visit","bitform")," ",(0,d.jsx)("a",{className:"btcd-link",href:"https://app.encharge.io/account/info",target:"_blank",rel:"noreferrer",children:(0,r.__)("Encharge API Console","bitform")})]}),"auth"===C&&(0,d.jsxs)("div",{className:"flx mt-5",children:[(0,d.jsx)(l.Z,{size:"25",clr:"#022217",className:"mr-2"}),"Checking API Key!!!"]}),j&&!b&&!C&&(0,d.jsxs)("div",{className:"flx mt-5",style:{color:"red"},children:[(0,d.jsx)("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"Sorry, API key is invalid"]}),!f&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("button",{onClick:function(){var e=(0,s.Z)({},t);if(e.name&&e.api_key){k("auth");var n={api_key:e.api_key};(0,i.Z)(n,"bitforms_encharge_authorize").then((function(e){null!=e&&e.success&&(p(!0),m({show:!0,msg:(0,r.__)("Authorized Successfully","bitfrom")})),N(!0),k(!1)}))}else v({name:e.name?"":(0,r.__)("Integration name cann't be empty","bitform"),api_key:e.api_key?"":(0,r.__)("API Key cann't be empty","bitform")})},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:b,children:[b?(0,r.__)("Authorized ✔","bitform"):(0,r.__)("Authorize","bitform"),C&&(0,d.jsx)(l.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,d.jsx)("br",{}),(0,d.jsxs)("button",{onClick:function(){return u(2),(0,c.nI)(t,n,k,m),void(document.querySelector(".btcd-s-wrp").scrollTop=0)},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!b,children:[(0,r.__)("Next","bitform"),(0,d.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})})}},8480:function(e,t,n){"use strict";n.d(t,{Rx:function(){return r},nI:function(){return l},Pd:function(){return c}});var s=n(2122),a=n(9492),i=n(5637),r=function(e,t,n){var a=(0,s.Z)({},t);a.name=e.target.value,n((0,s.Z)({},a))},l=function(e,t,n,r){var l={api_key:e.api_key},c=(0,s.Z)({},e);(0,a.Z)(l,"bitforms_encharge_headers").then((function(e){if(e&&e.success){if(c.default||(c.default={}),e.data.enChargeFields){c.default.fields=e.data.enChargeFields;var a=c.default.fields;c.field_map=Object.values(a).filter((function(e){return e.required})).map((function(e){return{formField:"",enChargeFields:e.fieldId,required:!0}})),r({show:!0,msg:(0,i.__)("Encharge fields refreshed","bitform")})}else r({show:!0,msg:(0,i.__)("No Encharge fields found. Try changing the header row number or try again","bitform")});t((0,s.Z)({},c))}else r({show:!0,msg:(0,i.__)("Encharge fields refresh failed. please try again","bitform")});n(!1)})).catch((function(){return n(!1)}))},c=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.enChargeFields&&e.required})):[]).length>0)}},1109:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var s=n(5637),a=n(4383),i=n(2122),r=n(8530),l=n(5893);function c(e){var t,n,a,c=e.i,d=e.formFields,o=e.field,u=e.enchargeConf,m=e.setEnchargeConf,f=o.required,h=(null==u||null==(t=u.default)?void 0:t.fields)&&Object.values(null==u||null==(n=u.default)?void 0:n.fields).filter((function(e){return!e.required})),b=function(e,t){var n=(0,i.Z)({},u);n.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(n.field_map[t].customValue=""),m(n)};return(0,l.jsxs)("div",{className:f?"mt-2 mr-1 flx w-9":"flx flx-around mt-2 mr-1",children:[(0,l.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:o.formField||"",onChange:function(e){return b(e,c)},children:[(0,l.jsx)("option",{value:"",children:(0,s.__)("Select Field","bitform")}),d.map((function(e){return"file-up"!==e.type&&(0,l.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)})),(0,l.jsx)("option",{value:"custom",children:(0,s.__)("Custom...","bitform")})]}),"custom"===o.formField&&(0,l.jsx)(r.Z,{onChange:function(e){return function(e,t){var n=(0,i.Z)({},u);n.field_map[t].customValue=e.target.value,m(n)}(e,c)},label:(0,s.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:o.customValue,placeholder:(0,s.__)("Custom Value","bitform")}),(0,l.jsxs)("select",{className:"btcd-paper-inp",name:"enChargeFields",value:o.enChargeFields,onChange:function(e){return b(e,c)},disabled:f,children:[(0,l.jsx)("option",{value:"",children:(0,s.__)("Select Field","bitform")}),f?(null==u||null==(a=u.default)?void 0:a.fields)&&Object.values(u.default.fields).map((function(e){return(0,l.jsx)("option",{value:e.fieldId,children:e.fieldName},e.fieldId+"-1")})):h&&h.map((function(e){return(0,l.jsx)("option",{value:e.fieldId,children:e.fieldName},e.fieldId+"-1")}))]}),!f&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:function(){return function(e){var t=(0,i.Z)({},u);t.field_map.splice(e,0,{}),m(t)}(c)},className:"icn-btn sh-sm ml-2",type:"button",children:"+"}),(0,l.jsx)("button",{onClick:function(){return function(e){var t=(0,i.Z)({},u);t.field_map.length>1&&t.field_map.splice(e,1),m(t)}(c)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,l.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})}function d(e){e.formID;var t,n=e.formFields,i=e.enchargeConf,r=e.setEnchargeConf;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),0!==(null==i||null==(t=i.default)?void 0:t.fields)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)("b",{className:"wdt-100",children:(0,s.__)("Map Fields","bitform")})}),(0,l.jsx)("div",{className:"btcd-hr mt-1"}),(0,l.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,l.jsx)("div",{className:"txt-dp",children:(0,l.jsx)("b",{children:(0,s.__)("Form Fields","bitform")})}),(0,l.jsx)("div",{className:"txt-dp",children:(0,l.jsx)("b",{children:(0,s.__)("Encharge Fields","bitform")})})]}),i.field_map.map((function(e,t){return(0,l.jsx)(c,{i:t,field:e,enchargeConf:i,formFields:n,setEnchargeConf:r},"sendinblue-m-"+(t+9))})),(0,l.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,l.jsx)("button",{onClick:function(){return(0,a.FP)(i.field_map.length,i,r)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{})]})]})}},5813:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(5637),a=n(5893);function i(e){var t=e.step,n=e.saveConfig,i=e.edit,r=e.disabled;return i?(0,a.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,a.jsx)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:r,children:(0,s.__)("Save","bitform")})}):(0,a.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,a.jsx)("h2",{className:"ml-3",children:(0,s.__)("Successfully Integrated","bitform")}),(0,a.jsxs)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,s.__)("Finish & Save ","bitform"),"✔"]})]})}},8530:function(e,t,n){"use strict";var s=n(5893);t.Z=function(e){var t=e.label,n=e.onChange,a=e.value,i=e.disabled,r=e.type,l=e.textarea,c=e.className;return(0,s.jsxs)("label",{className:"btcd-mt-inp "+c,children:[!l&&(0,s.jsx)("input",{type:void 0===r?"text":r,onChange:n,placeholder:" ",disabled:i,value:a}),l&&(0,s.jsx)("textarea",{type:void 0===r?"text":r,onChange:n,placeholder:" ",disabled:i,value:a}),(0,s.jsx)("span",{children:t})]})}},3231:function(e,t,n){"use strict";var s=n(7294),a=n(5893);t.Z=function(e){var t=e.step,n=e.active,i=e.className;return(0,a.jsx)("div",{className:"d-in-b "+i,children:(0,a.jsxs)("div",{className:"flx flx-center",children:[Array(n).fill(0).map((function(e,t){return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)("div",{className:"btcd-stp flx flx-center stp-a  txt-center",children:t+1}),n-1!==t&&(0,a.jsx)("div",{className:"btcd-stp-line stp-line-a"})]},"stp-"+(t+21))})),t-n!==0&&(0,a.jsx)("div",{className:"btcd-stp-line"}),Array(t-n).fill(0).map((function(e,i){return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)("div",{className:"btcd-stp flx flx-center txt-center",children:i+n+1}),t-n-1!==i&&(0,a.jsx)("div",{className:"btcd-stp-line "})]},"stp-"+(i+23))}))]})})}}}]);
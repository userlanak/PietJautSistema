(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[6101],{2159:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(5893);function n(e){var t=e.size;return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 30 30",children:[(0,s.jsx)("polyline",{className:"svg-icn",strokeWidth:"2",points:"15 3.04 15 21.21 7.5 13.61 15 21.21 22.5 13.61"}),(0,s.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M26,21.68v2.57A2.7,2.7,0,0,1,23.34,27H6.66A2.7,2.7,0,0,1,4,24.25v-2"})]})}},9770:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(5893);function n(e){var t=e.className,a=e.title,n=e.action,r=e.disabled,o=e.checked;return(0,s.jsxs)("div",{className:""+t,children:[(0,s.jsx)("span",{children:a}),(0,s.jsxs)("label",{className:"btcd-label",children:[(0,s.jsxs)("div",{className:"btcd-toggle",children:[(0,s.jsx)("input",{"aria-label":a,onChange:function(e){r||n(e)},className:"btcd-toggle-state",type:"checkbox",name:"check",value:"check",checked:o}),(0,s.jsx)("div",{className:"btcd-toggle-inner",children:(0,s.jsx)("div",{className:"btcd-indicator"})}),(0,s.jsx)("div",{className:"btcd-active-bg"})]}),(0,s.jsx)("div",{className:"btcd-label-text"})]})]})}},6101:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var s=a(2122),n=a(7294),r=a(3727),o=a(5637),i=a(4401),l=a(9151),c=a(523),d=a(5893);function m(e){return(0,d.jsxs)("div",{className:"btcd-menu",children:[(0,d.jsx)("button",{className:"btcd-menu-btn btcd-mnu sh-sm",onClick:function(e){e.target.parentNode.children[1].classList.contains("btcd-m-a")?(e.target.parentNode.children[1].classList.remove("btcd-m-a"),e.target.parentNode.parentNode.parentNode.style.zIndex="auto",e.target.blur()):(e.target.parentNode.parentNode.parentNode.style.zIndex=10,e.target.parentNode.children[1].classList.add("btcd-m-a"))},onBlur:function(e){var t=e.target;setTimeout((function(){t.parentNode.children[1].classList.remove("btcd-m-a"),t.parentNode.parentNode.parentNode.style.zIndex="auto"}),100)},"aria-label":"toggle menu",type:"button"}),(0,d.jsxs)("div",{className:"btcd-menu-list",children:[(0,d.jsxs)(r.rU,{to:"/form/builder/edit/"+e.formID+"/fs",type:"button",className:"flx","aria-label":"actions",children:[(0,d.jsx)(c.Z,{size:"15"}),"  Edit"]}),(0,d.jsxs)("button",{type:"button","aria-label":"actions",className:"flx",onClick:e.dup,children:[(0,d.jsx)("span",{className:"btcd-icn icn-copy"}),"  Duplicate"]}),(0,d.jsxs)("button",{type:"button","aria-label":"actions",className:"flx",onClick:e.export,children:[(0,d.jsx)("span",{className:"btcd-icn icn-file_download"}),"  Export"]}),(0,d.jsxs)("button",{type:"button","aria-label":"actions",className:"flx",onClick:e.del,children:[(0,d.jsx)("span",{className:"btcd-icn icn-trash-2"}),"  Delete"]})]})]})}function u(e){var t=e.value;return(0,d.jsxs)("div",{className:"flx",style:{width:"100%"},children:[(0,d.jsxs)("span",{style:{minWidth:68},children:[t,"%"]}),(0,d.jsx)("div",{className:"btcd-prgrs-wrp",children:(0,d.jsx)("div",{className:"btcd-prgrs",style:{width:t+"%"}})})]})}var f=a(9770),b=a(5001),h=a(8762),p=a(9492),x=a(3218),v=a(2249);function j(e){var t=e.setModal,a=e.setTempModal,r=e.newFormId,o=e.setSnackbar,i=(0,n.useContext)(x.l).allFormsData.allFormsDispatchHandler,l=(0,n.useState)({prop:["all","additional","confirmation","workFlows","mailTem","integrations","reports"]}),c=l[0],m=l[1],u=(0,n.useState)({formDetail:"",prop:""}),f=u[0],b=u[1],h=function(e){var t;f[e.target.name]&&b((0,s.Z)({},f,((t={})[e.target.name]="",t)));if("checkbox"===e.target.type){var a=c.prop;if(e.target.checked&&a.indexOf(e.target.value)<0){if("all"===e.target.value)return void m((0,s.Z)({},c,{prop:["all","additional","confirmation","workFlows","mailTem","integrations","reports"]}));a.push(e.target.value)}!e.target.checked&&a.indexOf(e.target.value)>-1&&delete a[a.indexOf(e.target.value)],(a.indexOf("additional")<0||a.indexOf("confirmation")<0||a.indexOf("workFlows")<0||a.indexOf("mailTem")<0||a.indexOf("integrations")<0||a.indexOf("reports")<0)&&delete a[a.indexOf("all")],m((0,s.Z)({},c,{prop:a}))}else{var n=e.target.files[0];if(n&&"application/json"===n.type){var r=new FileReader;r.readAsText(e.target.files[0]),r.onload=function(){j(r.result,e.target)}}else b((0,s.Z)({},f,{formDetail:"Please select an exported json file"})),e.target.value=""}},j=function(e,t){var a={};try{a=JSON.parse(e)}catch(n){b((0,s.Z)({},f,{formDetail:"Please select an exported json file"})),t.value=""}a&&a.layout&&a.fields?m((0,s.Z)({},c,{formDetail:a})):(b((0,s.Z)({},f,{formDetail:"Please select an exported json file"})),t.value="")};return(0,d.jsxs)("div",{className:"flx flx-col flx-center mt-4",children:[(0,d.jsxs)("div",{className:"fld-wrp",children:[(0,d.jsx)("input",{type:"file",accept:".json",name:"formDetail",onChange:h}),f.formDetail&&(0,d.jsx)("span",{className:"btcd-btn-o-red",children:f.formDetail})]}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsxs)("div",{className:"fld-wrp",children:[(0,d.jsx)("div",{className:"fld-lbl",children:"Please select property you want to import with form"})," ",(0,d.jsxs)("div",{className:"no-drg fld btcd-ck-con btcd-round",children:[(0,d.jsxs)("label",{className:"btcd-ck-wrp",children:[(0,d.jsx)("span",{children:"All"}),(0,d.jsx)("input",{value:"all",type:"checkbox",defaultChecked:!0,checked:c.prop.indexOf("all")>=0,name:"prop",onChange:h}),(0,d.jsx)("span",{className:"btcd-mrk ck"})]}),(0,d.jsxs)("label",{className:"btcd-ck-wrp",children:[(0,d.jsx)("span",{children:"Form Settings"}),(0,d.jsx)("input",{value:"additional",type:"checkbox",defaultChecked:!0,checked:c.prop.indexOf("additional")>=0,name:"prop",onChange:h}),(0,d.jsx)("span",{className:"btcd-mrk ck"})]}),(0,d.jsxs)("label",{className:"btcd-ck-wrp",children:[(0,d.jsx)("span",{children:"Confirmations"}),(0,d.jsx)("input",{value:"confirmation",type:"checkbox",defaultChecked:!0,checked:c.prop.indexOf("confirmation")>=0,name:"prop",onChange:h}),(0,d.jsx)("span",{className:"btcd-mrk ck"})]}),(0,d.jsxs)("label",{className:"btcd-ck-wrp",children:[(0,d.jsx)("span",{children:"Conditional Logics"}),(0,d.jsx)("input",{value:"workFlows",type:"checkbox",defaultChecked:!0,checked:c.prop.indexOf("workFlows")>=0,name:"prop",onChange:h}),(0,d.jsx)("span",{className:"btcd-mrk ck"})]}),(0,d.jsxs)("label",{className:"btcd-ck-wrp",children:[(0,d.jsx)("span",{children:"Email Templates"}),(0,d.jsx)("input",{value:"mailTem",type:"checkbox",defaultChecked:!0,checked:c.prop.indexOf("mailTem")>=0,name:"prop",onChange:h}),(0,d.jsx)("span",{className:"btcd-mrk ck"})]}),(0,d.jsxs)("label",{className:"btcd-ck-wrp",children:[(0,d.jsx)("span",{children:"Integrations"}),(0,d.jsx)("input",{value:"integrations",type:"checkbox",defaultChecked:!0,checked:c.prop.indexOf("integrations")>=0,name:"prop",onChange:h}),(0,d.jsx)("span",{className:"btcd-mrk ck"})]})]})]}),(0,d.jsxs)("div",{className:"flx flx-between w-5",children:[(0,d.jsx)("button",{onClick:function(){return t(!1)},className:"btn round btcd-btn-lg blue blue-sh",type:"button",children:" Cancel "}),(0,d.jsx)("button",{onClick:function(){var e,n;if(null!=(e=c.formDetail)&&e.layout&&null!=(n=c.formDetail)&&n.fields){for(var l=(0,v.p$)(c.formDetail),d=0,m=["additional","workFlows","reports"];d<m.length;d++){var u=m[d];-1===c.prop.indexOf(u)&&delete l[u]}if(l.formSettings)for(var h=0,x=["confirmation","mailTem","integrations"];h<x.length;h++){var j=x[h];-1===c.prop.indexOf(j)&&delete l.formSettings[j]}(0,p.Z)({formDetail:l,newFormId:r},"bitforms_import_aform").then((function(e){if(e.success){var s=e.data;i({type:"add",data:{formID:s.id,status:!0,formName:s.form_name,shortcode:"bitform id='"+s.id+"'",entries:0,views:0,conversion:0,created_at:s.created_at}}),o({show:!0,msg:s.message}),a(!1),t(!1)}else null!=e&&e.data&&o({show:!0,msg:e.data})}))}else b((0,s.Z)({},f,{formDetail:"Please select an exported json file"}))},className:"btn round btcd-btn-lg blue blue-sh",type:"button",children:" Import "})]})]})}var w=a(2159);function g(e){var t=e.setTempModal,a=e.newFormId,s=e.setSnackbar,i=(0,n.useState)(!1),l=i[0],c=i[1];return(0,d.jsxs)("div",{className:"btcd-tem-lay flx",children:[[{lbl:"Blank",img:""},{lbl:"Contact Form",img:""}].map((function(e){return(0,d.jsxs)("div",{className:"btcd-tem flx",children:[(0,d.jsx)("span",{className:"btcd-icn icn-file",style:{fontSize:90}}),(0,d.jsx)("div",{children:e.lbl}),(0,d.jsx)("div",{className:"btcd-hid-btn",children:(0,d.jsx)(r.rU,{to:"/form/builder/new/"+e.lbl+"/fs",className:"btn btn-white sh-sm",type:"button",children:(0,o.__)("Create","bitform")})})]},e.lbl)})),(0,d.jsxs)("div",{className:"btcd-tem flx",children:[(0,d.jsx)(w.Z,{size:"60"}),(0,d.jsx)("div",{children:"Form Import"}),(0,d.jsx)("div",{className:"btcd-hid-btn",children:(0,d.jsx)("button",{onClick:function(){return c(!0)},className:"btn btn-white sh-sm",type:"button",children:(0,o.__)("Import","bitform")})})]}),(0,d.jsx)(h.Z,{show:l,setModal:c,title:(0,o.__)("Import Form","bitform"),subTitle:"",children:(0,d.jsx)(j,{setModal:c,setTempModal:t,newFormId:a,setSnackbar:s})})]})}var k=a(4735),_=(0,n.lazy)((function(){return a.e(1754).then(a.bind(a,1754))}));function N(e){var t=e.newFormId,a=(0,n.useState)(!1),c=a[0],j=a[1],w=(0,n.useState)({show:!1}),N=w[0],y=w[1],C=(0,n.useContext)(x.l).allFormsData,D=C.allForms,F=C.allFormsDispatchHandler,I=(0,n.useState)({show:!1,btnTxt:""}),Z=I[0],T=I[1],S=(0,n.useState)([{width:70,minWidth:60,Header:(0,o.__)("Status","bitform"),accessor:"status",Cell:function(e){return(0,d.jsx)(f.Z,{className:"flx",action:function(t){return function(e,t){var a=e.target.checked,n={id:t,status:a};F({type:"update",data:{formID:t,status:n.status}}),(0,p.Z)(n,"bitforms_change_status").then((function(e){"success"in e&&!e.success&&(F({type:"update",data:{formID:t,status:n.status}}),y((0,s.Z)({},{show:!0,msg:(0,o.__)("Failed to change Form Status","bitform")})))})).catch((function(){F({type:"update",data:{formID:t,status:!a}}),y((0,s.Z)({},{show:!0,msg:(0,o.__)("Failed to change Form Status","bitform")}))}))}(t,e.row.original.formID)},checked:e.row.original.status})}},{width:250,minWidth:80,Header:(0,o.__)("Form Name","bitform"),accessor:"formName",Cell:function(e){return(0,d.jsx)(r.rU,{to:"/form/responses/edit/"+e.row.original.formID+"/",className:"btcd-tabl-lnk",children:e.row.values.formName})}},{width:220,minWidth:200,Header:(0,o.__)("Short Code","bitform"),accessor:"shortcode",Cell:function(e){return(0,d.jsx)(l.Z,{value:"["+e.row.values.shortcode+"]",setSnackbar:y,className:"cpyTxt"})}},{width:80,minWidth:60,Header:(0,o.__)("Views","bitform"),accessor:"views"},{width:170,minWidth:130,Header:(0,o.__)("Completion Rate","bitform"),accessor:"conversion",Cell:function(e){return(0,d.jsx)(u,{value:(t=e.row.values.entries,a=e.row.values.views,0===t?0:(t/("0"===a?1:a)*100).toFixed(2))});var t,a}},{width:100,minWidth:60,Header:(0,o.__)("Responses","bitform"),accessor:"entries",Cell:function(e){return(0,d.jsx)(r.rU,{to:"form/responses/edit/"+e.row.original.formID,className:"btcd-tabl-lnk",children:e.row.values.entries})}},{width:160,minWidth:60,Header:(0,o.__)("Created","bitform"),accessor:"created_at",Cell:function(e){return t=e.row.original.created_at,(0,d.jsxs)("div",{style:{lineHeight:.7,fontWeight:500},children:[(0,v.CI)(t,bits.dateFormat),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("small",{children:(0,v.CI)(t,bits.timeFormat)})]});var t}}]),O=S[0],H=S[1];(0,n.useEffect)((function(){Object.prototype.hasOwnProperty.call({NODE_ENV:"production"},"PUBLIC_URL")&&(0,p.Z)(null,"bitforms_get_all_form").then((function(e){if(null!=e&&e.success){var t=e.data.map((function(e){return{formID:e.id,status:"0"!==e.status,formName:e.form_name,shortcode:"bitform id='"+e.id+"'",entries:e.entries,views:e.views,conversion:(e.entries/("0"===e.views?1:e.views)*100).toPrecision(3),created_at:e.created_at}}));F({data:t,type:"set"})}}))}),[]),(0,n.useEffect)((function(){var e=O.filter((function(e){return"t_action"!==e.accessor}));e.push({sticky:"right",width:100,minWidth:60,Header:"Actions",accessor:"t_action",Cell:function(e){return(0,d.jsx)(m,{formID:e.row.original.formID,newFormId:e,index:e.row.id,del:function(){return A(e.row.original.formID,e.row.index)},dup:function(){return E(e.row.original.formID)},export:function(){return U(e.row.original.formID)}})}}),H([].concat(e))}),[t]);var L=(0,n.useCallback)((function(e,t){for(var a="Enable"===e.target.innerHTML,s=[],n=[],r=0;r<t.length;r+=1)s.push(t[r].id),n.push(t[r].original.formID);for(var o=[].concat(D),i=[].concat(D),l=0;l<s.length;l+=1)i[s[l]].status=a;F({data:i,type:"set"});var c={formID:n,status:a};(0,p.Z)(c,"bitforms_bulk_status_change").then((function(e){void 0===e||e.success?e.success&&y({show:!0,msg:e.data}):F({data:o,type:"set"})}))}),[]),W=(0,n.useCallback)((function(e){for(var t=[],a=[],s=0;s<e.length;s+=1)t.push(e[s].id),a.push(e[s].original.formID);for(var n=[].concat(D),r=[].concat(D),o=t.length-1;o>=0;o-=1)r.splice(Number(t[o]),1);F({data:r,type:"set"});var i={formID:a};(0,p.Z)(i,"bitforms_bulk_delete_form").then((function(e){void 0!==e&&e.success?e.success&&y({show:!0,msg:e.data}):F({data:n,type:"set"})}))}),[]),M=(0,n.useCallback)((function(e){H(e)}),[]),P=function(){Z.show=!1,T((0,s.Z)({},Z))},A=function(e,t){Z.action=function(){!function(e,t){(0,p.Z)({id:e},"bitforms_delete_aform").then((function(e){e.success&&(F({type:"remove",data:t}),y({show:!0,msg:(0,o.__)("Form Deleted !","bitform")}))}))}(e,t),P()},Z.btnTxt=(0,o.__)("Delete","bitform"),Z.btn2Txt=null,Z.btnClass="",Z.body=(0,o.__)("Are you sure to delete this form?","bitform"),Z.show=!0,T((0,s.Z)({},Z))},E=function(e){Z.action=function(){!function(e){(0,p.Z)({id:e,newFormId:t},"bitforms_duplicate_aform").then((function(e){if(e.success){var t=e.data;F({type:"add",data:{formID:t.id,status:!0,formName:t.form_name,shortcode:"bitform id='"+t.id+"'",entries:0,views:0,conversion:0,created_at:t.created_at}}),y({show:!0,msg:(0,o.__)("Form Duplicated Successfully.","bitform")})}}))}(e),P()},Z.btnTxt=(0,o.__)("Duplicate","bitform"),Z.btn2Txt=null,Z.btnClass="blue",Z.body=(0,o.__)("Are you sure to duplicate this form ?","bitform"),Z.show=!0,T((0,s.Z)({},Z))},U=function(e){Z.action=function(){!function(e){var t=new URL(bits.ajaxURL);t.searchParams.append("action","bitforms_export_aform"),t.searchParams.append("_ajax_nonce","undefined"===typeof bits?"":bits.nonce),t.searchParams.append("id",e),fetch(t).then((function(t){t.ok?t.blob().then((function(t){var a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="bitform_"+e+"_export.json",document.body.appendChild(s),s.click(),s.remove()})):t.json().then((function(e){e.data&&y({show:!0,msg:e.data})}))}))}(e),P()},Z.btnTxt=(0,o.__)("Export","bitform"),Z.btn2Txt=null,Z.btnClass="blue",Z.body=(0,o.__)("Are you sure to export this form ?","bitform"),Z.show=!0,T((0,s.Z)({},Z))};return(0,d.jsxs)("div",{id:"all-forms",children:[(0,d.jsx)(b.Z,{snack:N,setSnackbar:y}),(0,d.jsx)(i.Z,{show:Z.show,body:Z.body,action:Z.action,close:P,btnTxt:Z.btnTxt,btn2Txt:Z.btn2Txt,btn2Action:Z.btn2Action,btnClass:Z.btnClass}),(0,d.jsx)(h.Z,{show:c,setModal:j,title:(0,o.__)("Create Form","bitform"),subTitle:"",children:(0,d.jsx)(g,{setTempModal:j,newFormId:t,setSnackbar:y})}),D.length?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"af-header flx flx-between",children:[(0,d.jsx)("h2",{children:(0,o.__)("Forms","bitform")}),(0,d.jsx)("button",{onClick:function(){return j(!0)},type:"button",className:"btn round btcd-btn-lg blue blue-sh",children:(0,o.__)("Create From","bitform")})]}),(0,d.jsx)("div",{className:"forms",children:(0,d.jsx)(k.Z,{className:"f-table btcd-all-frm",height:500,columns:O,data:D,rowSeletable:!0,newFormId:t,resizable:!0,columnHidable:!0,setBulkStatus:L,setBulkDelete:W,setTableCols:M})})]}):(0,d.jsx)(_,{setModal:j})]})}var y=(0,n.memo)(N)}}]);
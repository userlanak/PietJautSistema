(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[6155],{6155:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var s=n(7294),l=(n(8774),n(5977)),i=n(5637),a=n(5001),r=n(3231),c=n(4383),u=n(5813),d=n(2122),o=n(9492),f=n(5257),m=n(5893);function b(e){e.formID;var t=e.fluentCrmConf,n=e.setFluentCrmConf,l=e.step,a=e.nextPage,r=e.setSnackbar,c=e.isInfo,u=(0,s.useState)(!1),b=u[0],h=u[1],x=(0,s.useState)({integrationName:""}),p=x[0],_=x[1],v=(0,s.useState)(!1),g=v[0],C=v[1],j=(0,s.useState)(!1),N=j[0],F=j[1],y=!0;(0,s.useEffect)((function(){return function(){y=!1}}),[]);return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"btcd-stp-page",style:(0,d.Z)({},{width:1===l&&900},{height:1===l&&"100%"}),children:[(0,m.jsx)("div",{className:"mt-3",children:(0,m.jsx)("b",{children:(0,i.__)("Integration Name:","bitform")})}),(0,m.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:function(e){var s=(0,d.Z)({},t),l=(0,d.Z)({},p);l[e.target.name]="",s[e.target.name]=e.target.value,_(l),n(s)},name:"name",value:t.name,type:"text",placeholder:(0,i.__)("Integration Name...","bitform"),disabled:c}),"auth"===N&&(0,m.jsxs)("div",{className:"flx mt-5",children:[(0,m.jsx)(f.Z,{size:"25",clr:"#022217",className:"mr-2"}),"Checking if Fluent CRM is active!!!"]}),g&&!b&&!N&&(0,m.jsxs)("div",{className:"flx mt-5",style:{color:"red"},children:[(0,m.jsx)("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"Please! First Install Fluent CRM Plugins"]}),(0,m.jsxs)("button",{onClick:function(){F("auth"),(0,o.Z)({},"bitforms_fluent_crm_authorize").then((function(e){y&&(null!=e&&e.success&&(h(!0),r({show:!0,msg:(0,i.__)("Connect Successfully","bitfrom")})),C(!0),F(!1))}))},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:b,children:[b?(0,i.__)("Connected ✔","bitform"):(0,i.__)("Connect to Fluent CRM","bitform"),N&&(0,m.jsx)(f.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,m.jsx)("br",{}),(0,m.jsxs)("button",{onClick:function(){return a(2)},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!b,children:[(0,i.__)("Next","bitform"),(0,m.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})})}var h=n(7012),x=n(668);function p(e){var t=e.formFields,n=e.setIntegration,d=e.integrations,o=e.allIntegURL,f=(0,l.k6)(),p=(0,l.UO)().formID,_=(0,s.useState)(!1),v=_[0],g=_[1],C=(0,s.useState)(1),j=C[0],N=C[1],F=(0,s.useState)({show:!1}),y=F[0],k=F[1],w=(0,s.useState)({name:"Fluent CRM API",type:"Fluent CRM",field_map:[{formField:"",fluentCRMField:""}],actions:{}}),Z=w[0],R=w[1],S=function(e){if(3===e){if(!(0,h.Pd)(Z))return void k({show:!0,msg:"Please map all required fields to continue."});""!==Z.name&&Z.field_map.length>0&&N(e)}else N(e),2===e&&Z.name&&(0,h.ow)(p,Z,R,g,k);document.querySelector(".btcd-s-wrp").scrollTop=0};return(0,m.jsxs)("div",{children:[(0,m.jsx)(a.Z,{snack:y,setSnackbar:k}),(0,m.jsx)("div",{className:"txt-center w-9 mt-2",children:(0,m.jsx)(r.Z,{step:3,active:j})}),(0,m.jsx)(b,{formID:p,fluentCrmConf:Z,setFluentCrmConf:R,step:j,nextPage:S,isLoading:v,setisLoading:g,setSnackbar:k}),(0,m.jsxs)("div",{className:"btcd-stp-page",style:{width:2===j&&900,height:2===j&&"100%",minHeight:2===j&&"200px"},children:[(0,m.jsx)(x.Z,{formID:p,formFields:t,fluentCrmConf:Z,setFluentCrmConf:R,setisLoading:g,setSnackbar:k}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsxs)("button",{onClick:function(){return S(3)},disabled:""===Z.list_id||Z.field_map.length<1,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[(0,i.__)("Next","bitform"),(0,m.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(0,m.jsx)(u.Z,{step:j,saveConfig:function(){return(0,c.Mm)(d,n,o,Z,f)}})]})}},7012:function(e,t,n){"use strict";n.d(t,{ow:function(){return a},aG:function(){return r},Rx:function(){return c},Pd:function(){return u}});var s=n(2122),l=n(5637),i=n(9492),a=function(e,t,n,a,r){a(!0),(0,i.Z)({},"bitforms_refresh_fluent_crm_lists").then((function(e){if(e&&e.success){var i=(0,s.Z)({},t);i.default||(i.default={}),e.data.fluentCrmList&&(i.default.fluentCrmList=e.data.fluentCrmList),e.data.fluentCrmTags&&(i.default.fluentCrmTags=e.data.fluentCrmTags),r({show:!0,msg:(0,l.__)("FluentCRM list refreshed","bitform")}),n((0,s.Z)({},i))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,l.__)("FluentCRM list refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")}):r({show:!0,msg:(0,l.__)("FluentCRM list refresh failed. please try again","bitform")});a(!1)})).catch((function(){return a(!1)}))},r=function(e,t,n,a){(0,i.Z)({},"bitforms_fluent_crm_headers").then((function(i){if(i&&i.success){var r=(0,s.Z)({},e);if(i.data.fluentCrmFlelds){r.default.fields=i.data.fluentCrmFlelds;var c=r.default.fields;r.field_map=Object.values(c).filter((function(e){return e.required})).map((function(e){return{formField:"",fluentCRMField:e.key,required:!0}})),a({show:!0,msg:(0,l.__)("Fluent CRM fields refreshed","bitform")})}else a({show:!0,msg:(0,l.__)("No Fluent CRM fields found. Try changing the header row number or try again","bitform")});t((0,s.Z)({},r))}else a({show:!0,msg:(0,l.__)("Fluent CRM fields refresh failed. please try again","bitform")});n(!1)})).catch((function(){return n(!1)}))},c=function(e,t,n){var l=(0,s.Z)({},t);l.name=e.target.value,n((0,s.Z)({},l))},u=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.fluentCRMField&&e.required})):[]).length>0)}},668:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var s=n(2122),l=n(7707),i=n(5637),a=n(8381),r=n(4383),c=n(3921),u=n(5893);function d(e){var t,n,l=e.fluentCrmConf,a=e.setFluentCrmConf,r=(e.formFields,function(e,t){var n=(0,s.Z)({},l);"exists"===t&&(e.target.checked?n.actions.skip_if_exists=!0:delete n.actions.skip_if_exists),"doubleOpIn"===t&&(e.target.checked?n.actions.double_opt_in=!0:delete n.actions.double_opt_in),a((0,s.Z)({},n))});return(0,u.jsxs)("div",{className:"pos-rel d-flx w-8",children:[(0,u.jsx)(c.Z,{checked:(null==(t=l.actions)?void 0:t.skip_if_exists)||!1,onChange:function(e){return r(e,"exists")},className:"wdt-200 mt-4 mr-2",value:"skip_if_exists",title:(0,i.__)("Skip exist Contact","bitform"),subTitle:(0,i.__)("Skip if contact already exist in FluentCRM","bitform")}),(0,u.jsx)(c.Z,{checked:(null==(n=l.actions)?void 0:n.double_opt_in)||!1,onChange:function(e){return r(e,"doubleOpIn")},className:"wdt-200 mt-4 mr-2",value:"double_opt_in",title:(0,i.__)("Double Opt-in","bitform"),subTitle:(0,i.__)("Enable Double Option for new contacts","bitform")})]})}var o=n(7012),f=n(8530);function m(e){var t,n,l,a=e.i,r=e.formFields,c=e.field,d=e.fluentCrmConf,o=e.setFluentCrmConf,m=c.required,b=(null==d||null==(t=d.default)?void 0:t.fields)&&Object.values(null==d||null==(n=d.default)?void 0:n.fields).filter((function(e){return!e.required})),h=function(e,t){var n=(0,s.Z)({},d);n.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(n.field_map[t].customValue=""),o(n)};return(0,u.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,u.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,u.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:c.formField||"",onChange:function(e){return h(e,a)},children:[(0,u.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),r.map((function(e){return"file-up"!==e.type&&(0,u.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)})),(0,u.jsx)("option",{value:"custom",children:(0,i.__)("Custom...","bitform")})]}),"custom"===c.formField&&(0,u.jsx)(f.Z,{onChange:function(e){return function(e,t){var n=(0,s.Z)({},d);n.field_map[t].customValue=e.target.value,o(n)}(e,a)},label:(0,i.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:c.customValue,placeholder:(0,i.__)("Custom Value","bitform")}),(0,u.jsxs)("select",{className:"btcd-paper-inp",name:"fluentCRMField",value:c.fluentCRMField,onChange:function(e){return h(e,a)},disabled:m,children:[(0,u.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),m?(null==d||null==(l=d.default)?void 0:l.fields)&&Object.values(d.default.fields).map((function(e){return(0,u.jsx)("option",{value:e.key,children:e.label},e.key+"-1")})):b&&b.map((function(e){return(0,u.jsx)("option",{value:e.key,children:e.label},e.key+"-1")}))]})]}),!m&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{onClick:function(){return function(e){var t=(0,s.Z)({},d);t.field_map.splice(e,0,{}),o(t)}(a)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,u.jsx)("button",{onClick:function(){return function(e){var t=(0,s.Z)({},d);t.field_map.length>1&&t.field_map.splice(e,1),o(t)}(a)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,u.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})}function b(e){var t,n,c=e.formID,f=e.formFields,b=e.fluentCrmConf,h=e.setFluentCrmConf,x=e.isLoading,p=e.setisLoading,_=e.setSnackbar;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("br",{}),(0,u.jsxs)("div",{className:"flx",children:[(0,u.jsx)("b",{className:"wdt-150 d-in-b",children:(0,i.__)("Fluent CRM List:","bitform")}),(0,u.jsxs)("select",{onChange:function(e){return function(e){var t=(0,s.Z)({},b);t.list_id=e.target.value,h((0,s.Z)({},t))}(e)},name:"list_id",value:b.list_id,className:"btcd-paper-inp w-5",children:[(0,u.jsx)("option",{value:"",children:(0,i.__)("Select Fluent CRM list","bitform")}),(null==b||null==(t=b.default)?void 0:t.fluentCrmList)&&Object.keys(b.default.fluentCrmList).map((function(e){return(0,u.jsx)("option",{value:b.default.fluentCrmList[e].id,children:b.default.fluentCrmList[e].title},e)}))]}),(0,u.jsx)("button",{onClick:function(){return(0,o.ow)(c,b,h,p,_)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh Fluent CRM List","bitform")+"'"},type:"button",disabled:x,children:"↻"})]}),(0,u.jsxs)("div",{className:"flx mt-5",children:[(0,u.jsx)("b",{className:"wdt-150 d-in-b",children:(0,i.__)("Fluent CRM Tags: ","bitform")}),(0,u.jsx)(l.Z,{defaultValue:null==b?void 0:b.tags,className:"btcd-paper-drpdwn w-5",options:(null==b||null==(n=b.default)?void 0:n.fluentCrmTags)&&Object.keys(b.default.fluentCrmTags).map((function(e){return{label:b.default.fluentCrmTags[e].title,value:b.default.fluentCrmTags[e].id}})),onChange:function(e){return function(e){var t=(0,s.Z)({},b);e?(t.tags=e?e.split(","):[],(0,o.aG)(t,h,p,_)):delete t.tags,h((0,s.Z)({},t))}(e)}})]}),x&&(0,u.jsx)(a.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(null==b?void 0:b.tags)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"mt-4",children:(0,u.jsx)("b",{className:"wdt-100",children:(0,i.__)("Map Fields","bitform")})}),(0,u.jsx)("div",{className:"btcd-hr mt-1"}),(0,u.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,u.jsx)("div",{className:"txt-dp",children:(0,u.jsx)("b",{children:(0,i.__)("Form Fields","bitform")})}),(0,u.jsx)("div",{className:"txt-dp",children:(0,u.jsx)("b",{children:(0,i.__)("Fluent CRM Fields","bitform")})})]}),b.field_map.map((function(e,t){return(0,u.jsx)(m,{i:t,field:e,fluentCrmConf:b,formFields:f,setFluentCrmConf:h},"fluentcrm-m-"+(t+9))})),(0,u.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,u.jsx)("button",{onClick:function(){return(0,r.FP)(b.field_map.length,b,h)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,u.jsx)("br",{}),(0,u.jsx)("div",{className:"mt-4",children:(0,u.jsx)("b",{className:"wdt-100",children:(0,i.__)("Actions","bitform")})}),(0,u.jsx)("div",{className:"btcd-hr mt-1"}),(0,u.jsx)(d,{fluentCrmConf:b,setFluentCrmConf:h,setisLoading:p,setSnackbar:_})]})]})}},5813:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(5637),l=n(5893);function i(e){var t=e.step,n=e.saveConfig,i=e.edit,a=e.disabled;return i?(0,l.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,l.jsx)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:a,children:(0,s.__)("Save","bitform")})}):(0,l.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,l.jsx)("h2",{className:"ml-3",children:(0,s.__)("Successfully Integrated","bitform")}),(0,l.jsxs)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,s.__)("Finish & Save ","bitform"),"✔"]})]})}},8530:function(e,t,n){"use strict";var s=n(5893);t.Z=function(e){var t=e.label,n=e.onChange,l=e.value,i=e.disabled,a=e.type,r=e.textarea,c=e.className;return(0,s.jsxs)("label",{className:"btcd-mt-inp "+c,children:[!r&&(0,s.jsx)("input",{type:void 0===a?"text":a,onChange:n,placeholder:" ",disabled:i,value:l}),r&&(0,s.jsx)("textarea",{type:void 0===a?"text":a,onChange:n,placeholder:" ",disabled:i,value:l}),(0,s.jsx)("span",{children:t})]})}},3231:function(e,t,n){"use strict";var s=n(7294),l=n(5893);t.Z=function(e){var t=e.step,n=e.active,i=e.className;return(0,l.jsx)("div",{className:"d-in-b "+i,children:(0,l.jsxs)("div",{className:"flx flx-center",children:[Array(n).fill(0).map((function(e,t){return(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)("div",{className:"btcd-stp flx flx-center stp-a  txt-center",children:t+1}),n-1!==t&&(0,l.jsx)("div",{className:"btcd-stp-line stp-line-a"})]},"stp-"+(t+21))})),t-n!==0&&(0,l.jsx)("div",{className:"btcd-stp-line"}),Array(t-n).fill(0).map((function(e,i){return(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)("div",{className:"btcd-stp flx flx-center txt-center",children:i+n+1}),t-n-1!==i&&(0,l.jsx)("div",{className:"btcd-stp-line "})]},"stp-"+(i+23))}))]})})}}}]);
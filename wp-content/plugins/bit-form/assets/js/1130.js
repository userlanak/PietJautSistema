(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[1130,6896],{5813:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(5637),s=n(5893);function i(e){var t=e.step,n=e.saveConfig,i=e.edit,r=e.disabled;return i?(0,s.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,s.jsx)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:r,children:(0,a.__)("Save","bitform")})}):(0,s.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,s.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,s.jsxs)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform"),"✔"]})]})}},1130:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n(7294),s=(n(8774),n(5977)),i=n(5637),r=n(5001),l=n(3231),o=n(4383),c=n(5813),d=n(6896),m=n(2226),u=n(5893);function f(e){var t=e.formFields,n=e.setIntegration,f=e.integrations,h=e.allIntegURL,b=(0,s.k6)(),g=(0,s.UO)().formID,p=(0,a.useState)(!1),x=p[0],_=p[1],v=(0,a.useState)(1),j=v[0],y=v[1],C=(0,a.useState)({show:!1}),N=C[0],k=C[1],w=(0,a.useState)({name:"Telegram",type:"Telegram",parse_mode:"HTML",bot_api_key:"",chat_id:"",body:"",actions:{}}),Z=w[0],S=w[1];return(0,u.jsxs)("div",{children:[(0,u.jsx)(r.Z,{snack:N,setSnackbar:k}),(0,u.jsx)("div",{className:"txt-center w-9 mt-2",children:(0,u.jsx)(l.Z,{step:3,active:j})}),(0,u.jsx)(d.default,{formID:g,telegramConf:Z,setTelegramConf:S,step:j,setstep:y,isLoading:x,setisLoading:_,setSnackbar:k}),(0,u.jsxs)("div",{className:"btcd-stp-page",style:{width:2===j&&900,height:2===j&&"100%",minHeight:2===j&&"200px"},children:[(0,u.jsx)(m.Z,{formID:g,formFields:t,telegramConf:Z,setTelegramConf:S,isLoading:x,setisLoading:_,setSnackbar:k}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(0,u.jsxs)("button",{onClick:function(){return 3===(e=3)&&""!==Z.name&&Z.chat_id&&y(e),void(document.querySelector(".btcd-s-wrp").scrollTop=0);var e},disabled:""===Z.chat_id,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[(0,i.__)("Next","bitform"),(0,u.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(0,u.jsx)(c.Z,{step:j,saveConfig:function(){return(0,o.Mm)(f,n,h,Z,b)}})]})}},6896:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n(2122),s=n(7294),i=n(9492),r=n(5637),l=n(5257),o=n(9965),c=n(5893);function d(e){e.formID;var t=e.telegramConf,n=e.setTelegramConf,d=e.step,m=e.setstep,u=e.setSnackbar,f=e.isInfo,h=(0,s.useState)(!1),b=h[0],g=h[1],p=(0,s.useState)({name:"",bot_api_key:"",apiError:""}),x=p[0],_=p[1],v=(0,s.useState)(!1),j=v[0],y=v[1],C=(0,s.useState)(!1),N=C[0],k=C[1],w=function(e){var s=(0,a.Z)({},t),i=(0,a.Z)({},x);i[e.target.name]="",s[e.target.name]=e.target.value,_(i),n(s)};return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"btcd-stp-page",style:(0,a.Z)({},{width:1===d&&900},{height:1===d&&"100%"}),children:[(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Integration Name:","bitform")})}),(0,c.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:w,name:"name",value:t.name,type:"text",placeholder:(0,r.__)("Integration Name...","bitform"),disabled:f}),(0,c.jsx)("div",{style:{color:"red",fontSize:"15px",marginTop:"5px"},children:x.name}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Bot API Key:","bitform")})}),(0,c.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:w,name:"bot_api_key",value:t.bot_api_key,type:"text",placeholder:(0,r.__)("Integration Name...","bitform"),disabled:f}),(0,c.jsx)("div",{style:{color:"red",fontSize:"15px",marginTop:"5px"},children:x.bot_api_key}),"auth"===N&&(0,c.jsxs)("div",{className:"flx mt-5",children:[(0,c.jsx)(l.Z,{size:"25",clr:"#022217",className:"mr-2"}),"Checking API Key!!!"]}),j&&!b&&!N&&(0,c.jsxs)("div",{className:"flx mt-5",style:{color:"red"},children:[(0,c.jsx)("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),x.apiError]}),!f&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("button",{onClick:function(){var e=(0,a.Z)({},t);if(e.name&&e.bot_api_key){k("auth");var n={bot_api_key:e.bot_api_key};(0,i.Z)(n,"bitforms_telegram_authorize").then((function(e){null!=e&&e.success?(g(!0),u({show:!0,msg:(0,r.__)("Authorized Successfully","bitfrom")})):(g(!1),_({apiError:null==e?void 0:e.data.description}),u({show:!0,msg:(0,r.__)("Authorized Filled","bitfrom")})),y(!0),k(!1)}))}else _({name:e.name?"":(0,r.__)("Integration name cann't be empty","bitform"),bot_api_key:e.bot_api_key?"":(0,r.__)("API Key cann't be empty","bitform")})},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:b,children:[b?(0,r.__)("Authorized ✔","bitform"):(0,r.__)("Authorize","bitform"),N&&(0,c.jsx)(l.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,c.jsx)("br",{}),(0,c.jsxs)("button",{onClick:function(){return(0,o.c)(t,n,k,u),m(2),void(document.querySelector(".btcd-s-wrp").scrollTop=0)},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!b,children:[(0,r.__)("Next","bitform"),(0,c.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})})}},9965:function(e,t,n){"use strict";n.d(t,{c:function(){return r},R:function(){return l}});var a=n(2122),s=n(5637),i=n(9492),r=function(e,t,n,r){var l=(0,a.Z)({},e),o={bot_api_key:l.bot_api_key};n(!0),(0,i.Z)(o,"bitforms_refresh_get_updates").then((function(e){e&&e.success?(l.default||(l.default={}),e.data.telegramChatLists&&(l.default.telegramChatLists=e.data.telegramChatLists),r({show:!0,msg:(0,s.__)("Chat list refreshed","bitform")}),t((0,a.Z)({},l))):e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,s.__)("Chat list refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,s.__)("please try again","bitform")}):r({show:!0,msg:(0,s.__)("Chat list refresh failed. please try again","bitform")}),n(!1)})).catch((function(){return n(!1)}))},l=function(e,t,n){var s=(0,a.Z)({},t);s.name=e.target.value,n((0,a.Z)({},s))}},2226:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var a=n(2122),s=n(7707),i=n(5637),r=n(8692),l=n(8381),o=n(3429),c=n(7294),d=n(4401),m=n(3921),u=n(5893);function f(e){var t,n=e.formFields,s=e.telegramConf,r=e.setTelegramConf,l=(0,c.useState)({show:!1}),o=l[0],f=l[1];return(0,u.jsxs)("div",{className:"pos-rel",children:[(0,u.jsx)("div",{className:"d-flx flx-wrp",children:(0,u.jsx)(m.Z,{onChange:function(){return f({show:"attachments"})},checked:"attachments"in s.actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:(0,i.__)("Attachments","bitform"),subTitle:(0,i.__)("Add attachments from BitForm to send Telegram.","bitform")})}),(0,u.jsxs)(d.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:"attachments"===o.show,close:function(){return f({show:!1})},action:function(){return f({show:!1})},title:(0,i.__)("Select Attachment","bitform"),children:[(0,u.jsx)("div",{className:"btcd-hr mt-2"}),(0,u.jsx)("div",{className:"mt-2",children:(0,i.__)("Please select file upload fields","bitform")}),(0,u.jsxs)("select",{onChange:function(e){return function(e){var t=(0,a.Z)({},s);""!==e.target.value?t.actions.attachments=e.target.value:delete t.actions.attachments,r((0,a.Z)({},t))}(e)},name:"attachments",value:null==(t=s.actions)?void 0:t.attachments,className:"btcd-paper-inp w-10 mt-2",children:[(0,u.jsx)("option",{value:"",children:(0,i.__)("Select file upload field","bitform")}),n.filter((function(e){return"file-up"===e.type})).map((function(e){return(0,u.jsx)("option",{value:e.key,children:e.name},e.key+1)}))]})]})]})}var h=n(9965);function b(e){e.formID;var t,n=e.formFields,c=e.telegramConf,d=e.setTelegramConf,m=e.isLoading,b=e.setisLoading,g=e.setSnackbar,p=function(e){var t=(0,a.Z)({},c);t[e.target.name]=e.target.value,d(t)},x=function(e){var t=(0,a.Z)({},c);t.body=t.body+" "+e+" ",d(t)},_=function(e){var t=(0,a.Z)({},c);null!=t&&t.body&&(t.body=""),t.parse_mode=e.target.value,d(t)};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("br",{}),(0,u.jsxs)("div",{className:"flx",children:[(0,u.jsx)("b",{className:"wdt-150 d-in-b",children:(0,i.__)("Chat List: ","bitform")}),(0,u.jsxs)("select",{onChange:p,name:"chat_id",value:c.chat_id,className:"btcd-paper-inp w-5",children:[(0,u.jsx)("option",{value:"",children:(0,i.__)("Select Chat List","bitform")}),(null==c||null==(t=c.default)?void 0:t.telegramChatLists)&&Object.keys(c.default.telegramChatLists).map((function(e){return(0,u.jsx)("option",{value:c.default.telegramChatLists[e].id,children:c.default.telegramChatLists[e].name},e)}))]}),(0,u.jsx)("button",{onClick:function(){return(0,h.c)(c,d,b,g)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh Telegram List","bitform")+"'"},type:"button",disabled:m,children:"↻"})]}),m&&(0,u.jsx)(l.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(null==c?void 0:c.chat_id)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"flx mt-4",children:[(0,u.jsx)("b",{className:"wdt-150 d-in-b",children:(0,i.__)("Parse Mode: ","bitform")}),(0,u.jsx)(r.Z,{radio:!0,onChange:function(e){return _(e)},name:"HTML",title:(0,u.jsx)("small",{className:"txt-dp",children:(0,i.__)("HTML","bitform")}),checked:"HTML"===c.parse_mode,value:"HTML"}),(0,u.jsx)(r.Z,{radio:!0,onChange:function(e){return _(e)},name:"MarkdownV2",title:(0,u.jsx)("small",{className:"txt-dp",children:(0,i.__)("Markdown v2","bitform")}),checked:"MarkdownV2"===c.parse_mode,value:"MarkdownV2"})]}),(0,u.jsxs)("div",{className:"flx mt-4",children:[(0,u.jsx)("b",{className:"wdt-150 d-in-b",children:(0,i.__)("Messages: ","bitform")}),"HTML"===(null==c?void 0:c.parse_mode)?(0,u.jsx)(o.Z,{formFields:n,value:c.body,onChangeHandler:x,width:"100%",toolbarMnu:"bold italic underline strikethrough | link | code | addFormField"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("textarea",{className:"w-7",onChange:p,name:"body",rows:"5",value:c.body}),(0,u.jsx)(s.Z,{options:n.filter((function(e){return"file-up"!==e.type})).map((function(e){return{label:e.name,value:"${"+e.key+"}"}})),className:"btcd-paper-drpdwn wdt-200 ml-2",singleSelect:!0,onChange:function(e){return x(e)}})]})]}),(0,u.jsx)("div",{className:"mt-4",children:(0,u.jsx)("b",{className:"wdt-100",children:(0,i.__)("Actions","bitform")})}),(0,u.jsx)("div",{className:"btcd-hr mt-1"}),(0,u.jsx)(f,{telegramConf:c,setTelegramConf:d,formFields:n})]})]})}},3231:function(e,t,n){"use strict";var a=n(7294),s=n(5893);t.Z=function(e){var t=e.step,n=e.active,i=e.className;return(0,s.jsx)("div",{className:"d-in-b "+i,children:(0,s.jsxs)("div",{className:"flx flx-center",children:[Array(n).fill(0).map((function(e,t){return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)("div",{className:"btcd-stp flx flx-center stp-a  txt-center",children:t+1}),n-1!==t&&(0,s.jsx)("div",{className:"btcd-stp-line stp-line-a"})]},"stp-"+(t+21))})),t-n!==0&&(0,s.jsx)("div",{className:"btcd-stp-line"}),Array(t-n).fill(0).map((function(e,i){return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)("div",{className:"btcd-stp flx flx-center txt-center",children:i+n+1}),t-n-1!==i&&(0,s.jsx)("div",{className:"btcd-stp-line "})]},"stp-"+(i+23))}))]})})}},3429:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(7294),s=n(5637),i=n(5893);function r(e){var t=e.formFields,n=e.id,r=e.value,l=e.onChangeHandler,o=e.toolbarMnu,c=e.height,d=e.width;(0,a.useEffect)((function(){return window.tinymce&&tinymce.remove(),function(){return window.tinymce&&tinymce.remove()}}),[]),(0,a.useEffect)((function(){window.tinymce&&tinymce.remove(),m()}),[t,n]);var m=function(){if("undefined"!==typeof tinymce&&(!t||(null==t?void 0:t.length)>0)){for(var e=document.querySelectorAll(".form-fields-em"),a=0;a<e.length;a+=1)e[a].style.display="none";tinymce.init({selector:"textarea#"+n+"-settings",height:c||150,width:d||"100%",branding:!1,resize:"verticle",convert_urls:!1,theme:"modern",plugins:"directionality fullscreen image link media charmap hr lists textcolor colorpicker wordpress",toolbar:o||"formatselect | fontsizeselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat toogleCode wp_code| addFormField",image_advtab:!0,default_link_target:"_blank",setup:function(e){e.on("Paste Change input Undo Redo",(function(){l(e.getContent())})),t&&e.addButton("addFormField",{text:"Form Fields ",tooltip:"Add Form Field Value in Message",type:"menubutton",icon:!1,menu:null==t?void 0:t.map((function(t){return!t.type.match(/^(file-up|recaptcha)$/)&&{text:t.name,onClick:function(){e.insertContent("${"+t.key+"}")}}}))}),e.addButton("toogleCode",{text:"</>",tooltip:(0,s.__)("Toggle preview","bitform"),icon:!1,onclick:function(t){var a=t.control.$,s=a("#"+n+"-settings"),i=a(e.iframeElement);s.value=e.getContent({source_view:!0}),i.toggleClass("hidden"),s.toggleClass("visible"),a("iframe.hidden").length>0?s.prependTo(".mce-edit-area"):e.setContent(document.getElementById(n+"-settings").value)}})}})}};return(0,i.jsx)("textarea",{id:n+"-settings",className:"btcd-paper-inp mt-1",rows:"5",value:r,onChange:function(e){return l(e.target.value)},style:{width:"95.5%",height:"auto"}})}}}]);
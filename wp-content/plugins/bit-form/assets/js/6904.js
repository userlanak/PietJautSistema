(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[6904],{331:function(e,t,i){"use strict";var n=i(7294),l=i(7919),c=i(523),s=i(9348),a=i(5893);function o(e){var t=e.title,i=e.customTitle,o=e.subtitle,r=e.children,d=e.titleEditable,u=e.onTitleChange,m=e.cls,f=(e.notScroll,e.header),h=e.onExpand,p=e.onCollapse,g=(0,n.useState)(!1),v=g[0],x=g[1],b=(0,n.useState)(0),j=b[0],_=b[1],y=(0,n.useRef)(null),N=function(e){e.target.classList.contains("edit")||x(!v)},k=function(){y.current.focus()};return(0,a.jsxs)("div",{className:"btcd-accr sh-sm "+m,children:[(0,a.jsxs)("div",{className:"btcd-accr-btn "+(v&&"blue")+" flx flx-between",onClick:N,onKeyPress:N,role:"button",tabIndex:0,children:[(0,a.jsxs)("div",{className:"btcd-accr-title w-10",children:[(0,a.jsxs)("div",{children:[i,void 0!==t&&(0,a.jsx)("input",{title:t,ref:y,className:d&&"edit",style:{color:v?"white":"inherit"},type:"text",onChange:u,value:t,readOnly:void 0===d}),d&&(0,a.jsx)("div",{className:"edit-icn",onClick:k,onKeyPress:k,role:"button",tabIndex:0,"aria-label":"focus edit",children:(0,a.jsx)("span",{style:{color:v?"white":"gray"},children:(0,a.jsx)(c.Z,{})})}),!v&&f]}),void 0!==o&&(0,a.jsx)("small",{children:o})]}),(0,a.jsx)(s.Z,{icn:!0,children:(0,a.jsx)("span",{className:"btcd-icn icn-"+(v?"keyboard_arrow_up":"keyboard_arrow_down"),style:{color:v?"white":"inherit"}})})]}),(0,a.jsx)("div",{className:"o-h "+(v&&"delay-overflow"),style:{height:j,transition:"height 300ms"},children:(0,a.jsx)(l.Z,{in:v,timeout:300,onEntering:function(e){return _(e.offsetHeight)},onEntered:function(){_("auto"),h&&h()},onExiting:function(){return _(0)},onExit:function(e){return function(e){_(e.offsetHeight),p&&p()}(e)},unmountOnExit:!0,children:(0,a.jsx)("div",{className:"p-2",children:r})})})]})}t.Z=(0,n.memo)(o)},9348:function(e,t,i){"use strict";var n=i(5893);t.Z=function(e){var t=e.className,i=e.type,l=e.onClick,c=e.icn,s=e.children,a=e.style;return(0,n.jsx)("button",{style:a,className:(c?"icn-btn":"btn")+"  "+t,type:i||"button",onClick:l,"aria-label":"btcd-button",children:s})}},97:function(e,t,i){"use strict";var n=i(7707),l=(i(8774),i(5893));t.Z=function(e){var t=e.options,i=e.placeholder,c=e.action,s=e.className,a=e.isMultiple,o=e.allowCustomOpt,r=e.value,d=e.addable,u=e.titleClassName,m=e.title,f=e.jsonValue;return t&&null!==t&&0!==t.length||(t=void 0),(0,l.jsxs)("div",{className:""+u,children:[(0,l.jsx)("span",{children:m}),(0,l.jsx)(n.Z,{width:"100%",defaultValue:r,className:"btcd-paper-drpdwn msl-wrp-options "+s,onChange:c,singleSelect:!a,customValue:o||d,placeholder:i,jsonValue:f,options:null!==t&&!1!==t&&t})]})}},8530:function(e,t,i){"use strict";var n=i(5893);t.Z=function(e){var t=e.label,i=e.onChange,l=e.value,c=e.disabled,s=e.type,a=e.textarea,o=e.className;return(0,n.jsxs)("label",{className:"btcd-mt-inp "+o,children:[!a&&(0,n.jsx)("input",{type:void 0===s?"text":s,onChange:i,placeholder:" ",disabled:c,value:l}),a&&(0,n.jsx)("textarea",{type:void 0===s?"text":s,onChange:i,placeholder:" ",disabled:c,value:l}),(0,n.jsx)("span",{children:t})]})}},6904:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return N}});var n=i(2122),l=i(7294),c=i(5637),s=i(9348),a=i(5893);var o=function(e){var t=e.logic,i=e.nested,n=e.onChange;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{height:i?5:10},children:(0,a.jsx)("svg",{height:"60",width:"50",children:(0,a.jsx)("line",{x1:"20",y1:i?6:10,x2:"20",y2:"0",style:{stroke:"#b9c5ff",strokeWidth:1}})})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:t,onChange:n,className:"btcd-logic-chip "+(i&&"scl-7 op-8"),children:[(0,a.jsx)("option",{value:"or",children:(0,c.__)("OR","bitform")}),(0,a.jsx)("option",{value:"and",children:(0,c.__)("AND","bitform")})]})}),(0,a.jsx)("div",{style:{height:i?5:10},children:(0,a.jsx)("svg",{height:"60",width:"50",children:(0,a.jsx)("line",{x1:"20",y1:i?6:10,x2:"20",y2:"0",style:{stroke:"#b9c5ff",strokeWidth:1}})})})]})},r=i(7707);var d=function(e){var t=e.className,i=e.onChange,n=e.value,l=e.label,c=e.children,s=e.style;return(0,a.jsxs)("div",{className:"btcd-mt-sel "+t,style:s,children:[(0,a.jsx)("select",{onChange:i,value:n||"",children:c}),(0,a.jsx)("small",{children:l})]})},u=i(8530),m=(i(8774),i(7480));var f=function(e){var t,i=e.fieldVal,n=e.formFields,l=e.fields,o=e.delLogic,f=e.lgcGrpInd,h=e.lgcInd,p=e.subLgcInd,g=e.subSubLgcInd,v=e.value,x=e.addInlineLogic,b=e.changeLogic,j=e.logicValue,_=e.changeValue,y=e.changeFormField,N="",k="",w="";return null!==n&&n.map((function(e){e.key===i&&(N=e.type.match(/^(check|radio)$/)?"text":e.type,k=e.type,w=e.key)})),(0,a.jsxs)("div",{className:"flx pos-rel btcd-logic-blk",children:[(0,a.jsxs)(d,{label:"Form Fields",value:void 0!==i&&i,style:{width:720},onChange:function(e){return y(e.target.value,f,h,p,g)},children:[(0,a.jsx)("option",{value:"",children:(0,c.__)("Select Form Field","bitform")}),n.map((function(e){return!e.type.match(/^(file-up|recaptcha)$/)&&(0,a.jsx)("option",{value:e.key,children:e.name},"ff-lb-"+e.key)}))]}),(0,a.jsx)("svg",{height:"35",width:"100",className:"mt-1",children:(0,a.jsx)("line",{x1:"0",y1:"20",x2:"40",y2:"20",style:{stroke:"#b9c5ff",strokeWidth:1}})}),(0,a.jsxs)(d,{label:"Logic",value:j,style:{width:400},onChange:function(e){return b(e.target.value,f,h,p,g)},className:"w-4",children:[(0,a.jsx)("option",{value:"",children:(0,c.__)("Select One","bitform")}),(0,a.jsx)("option",{value:"equal",children:(0,c.__)("Equal","bitform")}),(0,a.jsx)("option",{value:"not_equal",children:(0,c.__)("Not Equal","bitform")}),(0,a.jsx)("option",{value:"null",children:(0,c.__)("Is Null","bitform")}),(0,a.jsx)("option",{value:"not_null",children:(0,c.__)("Is Not Null","bitform")}),!N.match(/^(date|time|datetime|month|week)$/)&&(0,a.jsx)("option",{value:"contain",children:(0,c.__)("Contain","bitform")}),("select"===k&&(null==l||null==(t=l[w])?void 0:t.mul)||"check"===k)&&(0,a.jsx)("option",{value:"contain_all",children:(0,c.__)("Contain All","bitform")}),!N.match(/^(date|time|datetime|month|week)$/)&&(0,a.jsx)("option",{value:"not_contain",children:(0,c.__)("Not Contain","bitform")}),"number"===N&&(0,a.jsx)("option",{value:"greater",children:(0,c.__)("Greater Than","bitform")}),"number"===N&&(0,a.jsx)("option",{value:"less",children:(0,c.__)("Less Than","bitform")}),"number"===N&&(0,a.jsx)("option",{value:"greater_or_equal",children:(0,c.__)("Greater Than or Equal","bitform")}),"number"===N&&(0,a.jsx)("option",{value:"less_or_equal",children:(0,c.__)("Less Than or Equal","bitform")}),!N.match(/^(color|url|password|email|date|time|datetime|month|week)$/)&&(0,a.jsx)("option",{value:"start_with",children:(0,c.__)("Start With","bitform")}),!N.match(/^(color|url|password|email|date|time|datetime|month|week)$/)&&(0,a.jsx)("option",{value:"end_with",children:(0,c.__)("End With","bitform")})]}),(0,a.jsx)("svg",{height:"35",width:"100",className:"mt-1",children:(0,a.jsx)("line",{x1:"0",y1:"20",x2:"40",y2:"20",style:{stroke:"#b9c5ff",strokeWidth:1}})}),k.match(/select|check|radio/g)?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.Z,{className:"msl-wrp-options btcd-paper-drpdwn w-10",defaultValue:v,onChange:function(e){return _(e,f,h,p,g)},options:function(){var e,t,i,n=[];"select"===k?n=null==l||null==(e=l[w])?void 0:e.opt:n=null==l||null==(t=l[w])||null==(i=t.opt)?void 0:i.map((function(e){return{label:e.lbl,value:e.lbl}}));return n}(),customValue:!0,fldType:k})}):(0,a.jsx)(u.Z,{label:"Value",type:N,disabled:"null"===j||"not_null"===j,onChange:function(e){return _(e.target.value,f,h,p,g)},value:v}),(0,a.jsxs)("div",{className:"btcd-li-side-btn",children:[(0,a.jsx)(s.Z,{onClick:function(){return o(f,h,p,g)},icn:!0,className:"ml-2 white mr-2 sh-sm",children:(0,a.jsx)("span",{className:"btcd-icn icn-trash-2"})}),(0,a.jsxs)(s.Z,{onClick:function(){return x("and",f,h,p,g)},className:"white mr-2 sh-sm",children:[(0,a.jsx)(m.Z,{size:"14",className:"icn-rotate-45 mr-1"}),"AND"]}),(0,a.jsxs)(s.Z,{onClick:function(){return x("or",f,h,p,g)},className:"white sh-sm",children:[(0,a.jsx)(m.Z,{size:"14",className:"icn-rotate-45 mr-1"}),"OR"]})]})]})};var h=function(e){var t,i,n,l,o,m=e.formFields,f=e.fields,h=e.action,p=e.lgcGrpInd,g=e.actionInd,v=e.setworkFlows,x=e.actionType,b="",j="";null!==m&&m.map((function(e){e.key===h.field&&(j=e.type,b=e.key)}));var _=function(e){v((function(t){return t[p].actions[g].val=e,[].concat(t)}))};return(0,a.jsxs)("div",{className:"flx pos-rel btcd-logic-blk",children:[(0,a.jsxs)(d,{label:"Form Fields",value:h.field,onChange:function(e){return t=e.target.value,void v((function(e){return e[p].actions[g].field=t,e[p].actions[g].val="",[].concat(e)}));var t},style:{width:720},children:[(0,a.jsx)("option",{value:"",children:(0,c.__)("Select One","bitform")}),m.map((function(e){return"file-up"!==e.type&&(0,a.jsx)("option",{value:e.key,children:e.name},"ff-Ab-"+e.key)}))]}),(0,a.jsx)("svg",{height:"35",width:"100",className:"mt-1",children:(0,a.jsx)("line",{x1:"0",y1:"20",x2:"50",y2:"20",style:{stroke:"#b9c5ff",strokeWidth:1}})}),(0,a.jsxs)(d,{label:"Action",onChange:function(e){return t=e.target.value,void v((function(e){return e[p].actions[g].action=t,[].concat(e)}));var t},value:h.action,style:{width:400},className:"w-4",children:[(0,a.jsx)("option",{value:"",children:(0,c.__)("Select One","bitform")}),(0,a.jsx)("option",{value:"value",children:(0,c.__)("Value","bitform")}),"onsubmit"!==x&&(0,a.jsx)("option",{value:"disable",children:(0,c.__)("Disable","bitform")}),"onsubmit"!==x&&(0,a.jsx)("option",{value:"readonly",children:(0,c.__)("Readonly","bitform")}),"onsubmit"!==x&&(0,a.jsx)("option",{value:"enable",children:(0,c.__)("Enable","bitform")}),"onsubmit"!==x&&(0,a.jsx)("option",{value:"hide",children:(0,c.__)("Hide","bitform")}),"onsubmit"!==x&&(0,a.jsx)("option",{value:"show",children:(0,c.__)("Show","bitform")})]}),"value"===h.action&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{height:"35",width:"100",className:"mt-1",children:(0,a.jsx)("line",{x1:"0",y1:"20",x2:"40",y2:"20",style:{stroke:"#b9c5ff",strokeWidth:1}})}),"select"===j||"check"===j||"radio"===j?(0,a.jsx)(r.Z,{className:"msl-wrp-options btcd-paper-drpdwn w-10",defaultValue:h.val,onChange:_,options:"select"===j?null==f||null==(t=f[b])?void 0:t.opt:("check"===j||"radio"===j)&&(null==f||null==(i=f[b])||null==(n=i.opt)?void 0:n.map((function(e){return{label:e.lbl,value:e.lbl}}))),customValue:null==f||null==(l=f[b])?void 0:l.customOpt,singleSelect:"select"===j?!(null!=f&&null!=(o=f[b])&&o.mul):"check"!==j&&("radio"===j&&!0)}):(0,a.jsx)(u.Z,{onChange:function(e){return _(e.target.value)},label:"Value",value:h.val})]}),(0,a.jsx)("div",{className:"btcd-li-side-btn mt-2",children:(0,a.jsx)(s.Z,{onClick:function(){v((function(e){return e[p].actions.length>1&&e[p].actions.splice(g,1),[].concat(e)}))},icn:!0,className:"ml-2 sh-sm white",children:(0,a.jsx)("span",{className:"btcd-icn icn-trash-2"})})})]})},p=i(331),g=i(8692),v=i(97),x=i(3921),b=i(9492),j=i(4401);function _(e,t){var i="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return y(e,t)}(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var N=function(e){var t=e.formFields,i=e.fields,r=e.formSettings,u=e.workFlows,y=e.setworkFlows,N=e.formID,k=(0,l.useState)({show:!1}),w=k[0],C=k[1],A="undefined"!==typeof bits&&bits.isPro,Z=function(){var e=[];if("undefined"!==typeof bits&&bits.userMail&&Array.isArray(bits.userMail)&&e.push.apply(e,bits.userMail),B()){var i=[];t.map((function(e){"email"===e.type&&i.push({label:e.name,value:"${"+e.key+"}"})})),e.push({title:"Form Fields",type:"group",childs:i})}return e},F=function(e,t,i){var n=u[i].successAction.find((function(t){return t.type===e}));return void 0!==n?n.details[t]:""},S=function(e,t){var i,n;return null==(i=u[t])||null==(n=i.successAction)?void 0:n.some((function(t){return t.type===e}))},I=function(e){return(0,a.jsxs)(a.Fragment,{children:["onload"===e&&"On Load","oninput"===e&&"On Field Input","onvalidate"===e&&"On Form Validate","onsubmit"===e&&"On Form Submit","create_edit"===e&&"Record Create/Edit","create"===e&&"Record Create","edit"===e&&"Record Edit","delete"===e&&"Record Delete","always"===e&&"Always","cond"===e&&"With Condition"]})},O=function(e,t){"and"===e?y((function(e){return e[t].logics.push("and"),e[t].logics.push({field:"",logic:"",val:""}),[].concat(e)})):"or"===e?y((function(e){return e[t].logics.push("or"),e[t].logics.push({field:"",logic:"",val:""}),[].concat(e)})):"orGrp"===e?y((function(e){return e[t].logics.push("or"),e[t].logics.push([{field:"",logic:"",val:""},"or",{field:"",logic:"",val:""}]),[].concat(e)})):"andGrp"===e&&y((function(e){return e[t].logics.push("and"),e[t].logics.push([{field:"",logic:"",val:""},"and",{field:"",logic:"",val:""}]),[].concat(e)}))},L=function(e,t,i){"and"===e?y((function(e){return e[t].logics[i].push("and"),e[t].logics[i].push({field:"",logic:"",val:""}),[].concat(e)})):"or"===e?y((function(e){return e[t].logics[i].push("or"),e[t].logics[i].push({field:"",logic:"",val:""}),[].concat(e)})):"orGrp"===e?y((function(e){return e[t].logics[i].push("or"),e[t].logics[i].push([{field:"",logic:"",val:""},"or",{field:"",logic:"",val:""}]),[].concat(e)})):"andGrp"===e&&y((function(e){return e[t].logics[i].push("and"),e[t].logics[i].push([{field:"",logic:"",val:""},"and",{field:"",logic:"",val:""}]),[].concat(e)}))},E=function(e,t,i,n){"and"===e?y((function(e){return e[t].logics[i][n].push("and"),e[t].logics[i][n].push({field:"",logic:"",val:""}),[].concat(e)})):"or"===e&&y((function(e){return e[t].logics[i][n].push("or"),e[t].logics[i][n].push({field:"",logic:"",val:""}),[].concat(e)}))},M=function(e,t,i,n,l){y(void 0!==l?function(c){return c[t].logics[i][n][l]=e,[].concat(c)}:void 0!==n?function(l){return l[t].logics[i][n]=e,[].concat(l)}:function(n){return n[t].logics[i]=e,[].concat(n)})},V=function(e,t,i,n,l){y(void 0!==l?function(c){return"null"===e&&(c[t].logics[i][n][l].val=""),c[t].logics[i][n][l].logic=e,[].concat(c)}:void 0!==n?function(l){return"null"===e&&(l[t].logics[i][n].val=""),l[t].logics[i][n].logic=e,[].concat(l)}:function(n){return"null"===e&&(n[t].logics[i].val=""),n[t].logics[i].logic=e,[].concat(n)})},R=function(e,t,i,n,l){y(void 0!==l?function(c){return c[t].logics[i][n][l].val=e,[].concat(c)}:void 0!==n?function(l){return l[t].logics[i][n].val=e,[].concat(l)}:function(n){return n[t].logics[i].val=e,[].concat(n)})},T=function(e,t,i,n,l){y(void 0!==l?function(c){return c[t].logics[i][n][l].field=e,c[t].logics[i][n][l].val="",[].concat(c)}:void 0!==n?function(l){return l[t].logics[i][n].field=e,l[t].logics[i][n].val="",[].concat(l)}:function(n){return n[t].logics[i].field=e,n[t].logics[i].val="",[].concat(n)})},G=function(e,t,i,n){u[e].logics.length>1&&y(void 0!==n?function(l){if(l[e].logics[t][i].length===n+1)if(3===l[e].logics[t][i].length){var c=l[e].logics[t][i][n-2];l[e].logics[t].splice(i,1),l[e].logics[t].push(c)}else l[e].logics[t][i].splice(n-1,2);else if(3===l[e].logics[t][i].length){var s=l[e].logics[t][i][n+2];l[e].logics[t].splice(i,1),l[e].logics[t].push(s)}else l[e].logics[t][i].splice(n,2);return[].concat(l)}:void 0!==i?function(n){if(n[e].logics[t].length===i+1)if(3===n[e].logics[t].length){var l=n[e].logics[t][i-2];n[e].logics.splice(t,1),n[e].logics.splice(t,0,l)}else n[e].logics[t].splice(i-1,2);else if(3===n[e].logics[t].length){var c=n[e].logics[t][i+2];n[e].logics.splice(t,1),n[e].logics.splice(t,0,c)}else n[e].logics[t].splice(i,2);return[].concat(n)}:function(i){return 0!==t?i[e].logics.splice(t-1,2):i[e].logics.splice(t,2),[].concat(i)})},D=function(e,t,i,n,l){y("and"===e?function(e){return void 0!==l?e[t].logics[i][n].splice(l+1,0,"and",{field:"",logic:"",val:""}):void 0!==n?e[t].logics[i].splice(n+1,0,"and",{field:"",logic:"",val:""}):e[t].logics.splice(i+1,0,"and",{field:"",logic:"",val:""}),[].concat(e)}:function(e){return void 0!==l?e[t].logics[i][n].splice(l+1,0,"or",{field:"",logic:"",val:""}):void 0!==n?e[t].logics[i].splice(n+1,0,"or",{field:"",logic:"",val:""}):e[t].logics.splice(i+1,0,"or",{field:"",logic:"",val:""}),[].concat(e)})},W=function(e,t){"onsubmit"===e?u[t].actions.map((function(e){e.action="value"})):"onvalidate"===e&&(u[t].action_behaviour="cond"),u[t].action_type=e,y([].concat(u))},H=function(e,t){"delete"===e?delete u[t].action_type:void 0===u[t].action_type&&(u[t].action_type="onload"),u[t].action_run=e,y([].concat(u))},J=function(e,t){u[t].action_behaviour=e,y([].concat(u))},P=function(e,t,i){if("tem"===e){for(var n=0;n<u[i].successAction.length;n+=1)if("mailNotify"===u[i].successAction[n].type){u[i].successAction[n].details.id=t.target.value;break}}else if("from"===e){for(var l=0;l<u[i].successAction.length;l+=1)if("mailNotify"===u[i].successAction[l].type){u[i].successAction[l].details.from=t;break}}else if("to"===e){for(var c=0;c<u[i].successAction.length;c+=1)if("mailNotify"===u[i].successAction[c].type){u[i].successAction[c].details.to=t?t.split(","):[];break}}else if("cc"===e){for(var s=0;s<u[i].successAction.length;s+=1)if("mailNotify"===u[i].successAction[s].type){u[i].successAction[s].details.cc=t?t.split(","):[];break}}else if("bcc"===e){for(var a=0;a<u[i].successAction.length;a+=1)if("mailNotify"===u[i].successAction[a].type){u[i].successAction[a].details.bcc=t?t.split(","):[];break}}else if("replyto"===e){for(var o=0;o<u[i].successAction.length;o+=1)if("mailNotify"===u[i].successAction[o].type){u[i].successAction[o].details.replyto=t?t.split(","):[];break}}else if("attachment"===e)for(var r=0;r<u[i].successAction.length;r+=1)if("mailNotify"===u[i].successAction[r].type){u[i].successAction[r].details.attachment=t?t.split(","):[];break}y([].concat(u))},$=function(e,t,i){if(e)"mailNotify"===t?u[i].successAction.push({type:t,details:{}}):u[i].successAction.push({type:t,details:{id:""}});else for(var n=0;n<u[i].successAction.length;n+=1)if(u[i].successAction[n].type===t){u[i].successAction.splice(n,1);break}y([].concat(u))},q=function(){w.show=!1,C((0,n.Z)({},w))},z=function(e){w.btnTxt="Delete",w.body="Are you sure to delete this conditional logic?",w.btnClass="",w.action=function(){var t;u[t=e].id?(0,b.Z)({formID:N,id:u[t].id},"bitforms_delete_workflow").then((function(e){void 0!==e&&e.success&&(u.splice(t,1),y([].concat(u)))})):(u.splice(t,1),y([].concat(u))),q()},w.show=!0,C((0,n.Z)({},w))},B=function(){for(var e,i=_(t);!(e=i()).done;){if("email"===e.value.type)return!0}return!1},U=function(){for(var e,i=[],n=_(t);!(e=n()).done;){var l=e.value;"file-up"===l.type&&i.push({label:l.name,value:l.key})}return i};return(0,a.jsxs)("div",{className:"btcd-workflow",style:{width:900},children:[(0,a.jsx)(j.Z,{show:w.show,close:q,btnTxt:w.btnTxt,btnClass:w.btnClass,body:w.body,action:w.action}),(0,a.jsx)("h2",{children:(0,c.__)("Conditional Logics","bitform")}),(!A&&!u.length||A)&&(0,a.jsxs)(s.Z,{className:"blue",onClick:function(){u.unshift({title:"Action "+(u.length+1),action_type:"onload",action_run:"create_edit",action_behaviour:"cond",logics:[{field:"",logic:"",val:""},"or",{field:"",logic:"",val:""}],actions:[{field:"",action:"value"}],successAction:[]}),y([].concat(u))},children:[(0,a.jsx)(m.Z,{size:"10",className:"icn-rotate-45 mr-1"}),(0,c.__)("Add Conditional Logic","bitform")]}),u.length>0?u.map((function(e,n){var b,j,_,N,k,w,C,q,B,K,Q,X,Y,ee;return(0,a.jsxs)(l.Fragment,{children:[(0,a.jsxs)("div",{className:"workflow-grp d-flx mt-2",children:[(0,a.jsxs)(p.Z,{title:""+e.title,header:(0,a.jsxs)("small",{className:"f-right txt-dp mr-4",children:[(0,a.jsxs)("span",{className:"mr-2",children:[(0,a.jsx)("i",{className:"btcd-chat-dot mr-1"}),I(e.action_run)]}),void 0!==e.action_type&&(0,a.jsxs)("span",{className:"mr-2",children:[(0,a.jsx)("i",{className:"btcd-chat-dot mr-1"}),I(e.action_type)]}),(0,a.jsxs)("span",{children:[(0,a.jsx)("i",{className:"btcd-chat-dot mr-1"}),I(e.action_behaviour)]})]}),titleEditable:!0,onTitleChange:function(e){return function(e,t){u[t].title=e.target.value,y([].concat(u))}(e,n)},notScroll:!0,cls:A?"w-9":"w-10",children:[(0,a.jsxs)("div",{className:"flx",children:[(0,a.jsx)("b",{className:"txt-dp",children:(0,a.jsx)("small",{children:"Action Run When:"})}),(0,a.jsx)(g.Z,{radio:!0,onChange:function(e){return H(e.target.value,n)},name:"ar-"+(n+28),title:(0,a.jsx)("small",{className:"txt-dp",children:(0,c.__)("Record Create/Edit","bitform")}),checked:"create_edit"===e.action_run,value:"create_edit"}),(0,a.jsx)(g.Z,{radio:!0,onChange:function(e){return H(e.target.value,n)},name:"ar-"+(n+28),title:(0,a.jsx)("small",{className:"txt-dp",children:(0,c.__)("Record Create","bitform")}),checked:"create"===e.action_run,value:"create"}),(0,a.jsx)(g.Z,{radio:!0,onChange:function(e){return H(e.target.value,n)},name:"ar-"+(n+28),title:(0,a.jsx)("small",{className:"txt-dp",children:(0,c.__)("Record Edit","bitform")}),checked:"edit"===e.action_run,value:"edit"}),(0,a.jsx)(g.Z,{radio:!0,onChange:function(e){return H(e.target.value,n)},name:"ar-"+(n+28),title:(0,a.jsx)("small",{className:"txt-dp",children:(0,c.__)("Record Delete","bitform")}),checked:"delete"===e.action_run,value:"delete"})]}),"delete"!==e.action_run&&(0,a.jsxs)("div",{className:"flx",children:[(0,a.jsx)("b",{className:"txt-dp",children:(0,a.jsx)("small",{children:"Action Effect:"})}),(0,a.jsx)(g.Z,{radio:!0,onChange:function(e){return W(e.target.value,n)},name:"at-"+(n+26),title:(0,a.jsx)("small",{className:"txt-dp",children:(0,c.__)("On Form Load","bitform")}),checked:"onload"===e.action_type,value:"onload"}),(0,a.jsx)(g.Z,{radio:!0,onChange:function(e){return W(e.target.value,n)},name:"at-"+(n+26),title:(0,a.jsx)("small",{className:"txt-dp",children:(0,c.__)("On Field Input","bitform")}),checked:"oninput"===e.action_type,value:"oninput"}),(0,a.jsx)(g.Z,{radio:!0,onChange:function(e){return W(e.target.value,n)},name:"at-"+(n+26),title:(0,a.jsx)("small",{className:"txt-dp",children:(0,c.__)("On Form Validate","bitform")}),checked:"onvalidate"===e.action_type,value:"onvalidate"}),(0,a.jsx)(g.Z,{radio:!0,onChange:function(e){return W(e.target.value,n)},name:"at-"+(n+26),title:(0,a.jsx)("small",{className:"txt-dp",children:(0,c.__)("On Form Submit","bitform")}),checked:"onsubmit"===e.action_type,value:"onsubmit"})]}),(0,a.jsxs)("div",{className:"flx",children:[(0,a.jsx)("b",{className:"txt-dp",children:(0,a.jsx)("small",{children:"Action Behaviour:"})}),!(null!=e&&null!=(b=e.action_type)&&b.match(/^(onvalidate|oninput)$/))&&(0,a.jsx)(g.Z,{radio:!0,onChange:function(e){return J(e.target.value,n)},name:"ab-"+(n+111),title:(0,a.jsx)("small",{className:"txt-dp",children:(0,c.__)("Always","bitform")}),checked:"always"===e.action_behaviour,value:"always"}),(0,a.jsx)(g.Z,{radio:!0,onChange:function(e){return J(e.target.value,n)},name:"ab-"+(n+111),title:(0,a.jsx)("small",{className:"txt-dp",children:(0,c.__)("Condition","bitform")}),checked:"cond"===e.action_behaviour,value:"cond"})]}),"cond"===e.action_behaviour&&(0,a.jsx)("h3",{className:"m-0 mb-1 txt-gray",children:"IF"}),(0,a.jsxs)("div",{children:["cond"===e.action_behaviour&&e.logics.map((function(e,l){return(0,a.jsxs)("span",{children:["object"===typeof e&&!Array.isArray(e)&&(0,a.jsx)(f,{fieldVal:e.field,formFields:t,fields:i,changeFormField:T,changeValue:R,logicValue:e.logic,changeLogic:V,addInlineLogic:D,delLogic:G,lgcGrpInd:n,lgcInd:l,value:e.val}),"string"===typeof e&&(0,a.jsx)(o,{logic:e,onChange:function(e){return M(e.target.value,n,l)}}),Array.isArray(e)&&(0,a.jsxs)("div",{className:"p-2 pl-6 br-10 btcd-logic-grp",children:[e.map((function(e,c){return(0,a.jsxs)("span",{children:["object"===typeof e&&!Array.isArray(e)&&(0,a.jsx)(f,{fieldVal:e.field,formFields:t,fields:i,changeFormField:T,changeValue:R,logicValue:e.logic,changeLogic:V,addInlineLogic:D,delLogic:G,lgcGrpInd:n,lgcInd:l,subLgcInd:c,value:e.val}),"string"===typeof e&&(0,a.jsx)(o,{logic:e,nested:!0,onChange:function(e){return M(e.target.value,n,l,c)}}),Array.isArray(e)&&(0,a.jsxs)("div",{className:"p-2 pl-6 br-10 btcd-logic-grp",children:[e.map((function(e,s){return(0,a.jsxs)("span",{children:["object"===typeof e&&!Array.isArray(e)&&(0,a.jsx)(f,{fieldVal:e.field,formFields:t,fields:i,changeFormField:T,changeValue:R,logicValue:e.logic,changeLogic:V,addInlineLogic:D,delLogic:G,lgcGrpInd:n,lgcInd:l,subLgcInd:c,subSubLgcInd:s,value:e.val}),"string"===typeof e&&(0,a.jsx)(o,{logic:e,nested:!0,onChange:function(e){return M(e.target.value,n,l,c,s)}})]},"subsubLogic-"+(s+90))})),(0,a.jsx)("div",{className:" btcd-workFlows-btns",children:(0,a.jsxs)("div",{className:"flx",children:[(0,a.jsx)(s.Z,{icn:!0,className:"blue",children:(0,a.jsx)(m.Z,{size:"14",className:"icn-rotate-45"})}),(0,a.jsx)(s.Z,{onClick:function(){return E("and",n,l,c)},className:"blue ml-2",children:" AND "}),(0,a.jsx)(s.Z,{onClick:function(){return E("or",n,l,c)},className:"blue ml-2",children:" OR "})]})})]})]},"subLogic-"+7*c)})),(0,a.jsx)("div",{className:" btcd-workFlows-btns",children:(0,a.jsxs)("div",{className:"flx",children:[(0,a.jsx)(s.Z,{icn:!0,className:"blue sh-sm",children:(0,a.jsx)(m.Z,{size:"14",className:"icn-rotate-45"})}),(0,a.jsx)(s.Z,{onClick:function(){return L("and",n,l)},className:"blue ml-2",children:" AND "}),(0,a.jsx)(s.Z,{onClick:function(){return L("or",n,l)},className:"blue ml-2",children:" OR "}),(0,a.jsx)(s.Z,{onClick:function(){return L("orGrp",n,l)},className:"blue ml-2",children:" OR Group"}),(0,a.jsx)(s.Z,{onClick:function(){return L("andGrp",n,l)},className:"blue ml-2",children:" AND Group"})]})})]})]},"logic-"+(l+44))})),"cond"===e.action_behaviour&&(0,a.jsx)("div",{className:"btcd-workFlows-btns",children:(0,a.jsxs)("div",{className:"flx",children:[(0,a.jsx)(s.Z,{icn:!0,className:"blue sh-sm",children:(0,a.jsx)(m.Z,{size:"14",className:"icn-rotate-45"})}),(0,a.jsx)(s.Z,{onClick:function(){return O("and",n)},className:"blue ml-2",children:" AND "}),(0,a.jsx)(s.Z,{onClick:function(){return O("or",n)},className:"blue ml-2",children:" OR "}),(0,a.jsx)(s.Z,{onClick:function(){return O("orGrp",n)},className:"blue ml-2",children:" OR Group"}),(0,a.jsx)(s.Z,{onClick:function(){return O("andGrp",n)},className:"blue ml-2",children:" AND Group"})]})}),(0,a.jsx)("div",{className:"txt-dp mt-2",children:(0,a.jsx)("b",{children:"Action"})}),(0,a.jsx)("div",{className:"btcd-hr"}),("onsubmit"===e.action_type||"delete"===e.action_run)&&(0,a.jsxs)("div",{className:"mb-2",children:["delete"!==e.action_run&&(0,a.jsx)(x.Z,{onChange:function(e){return $(e.target.checked,"successMsg",n)},className:"ml-2 mt-2",title:(0,c.__)("Success Message","bitform"),checked:S("successMsg",n)}),!e.action_run.match(/^(delete|edit)$/)&&(0,a.jsx)(x.Z,{onChange:function(e){return $(e.target.checked,"redirectPage",n)},className:"ml-2 mt-2",title:(0,c.__)("Redirect URL","bitform"),checked:S("redirectPage",n)}),(0,a.jsx)(x.Z,{onChange:function(e){return $(e.target.checked,"webHooks",n)},className:"ml-2 mt-2",title:(0,c.__)("Web Hook","bitform"),checked:S("webHooks",n)}),(0,a.jsx)(x.Z,{onChange:function(e){return $(e.target.checked,"mailNotify",n)},className:"ml-2 mt-2",title:(0,c.__)("Email Notification","bitform"),checked:S("mailNotify",n)}),"delete"!==e.action_run&&(0,a.jsx)(x.Z,{onChange:function(e){return $(e.target.checked,"integ",n)},className:"ml-2 mt-2",title:(0,c.__)("Integration","bitform"),checked:S("integ",n)})]}),"delete"===e.action_run&&(0,a.jsx)(g.Z,{onChange:function(e){return function(e,t){u[t].avoid_delete=e,y([].concat(u))}(e.target.checked,n)},checked:u[n].avoid_delete,title:(0,a.jsx)("small",{className:"txt-dp",children:"Prevent Delete"})}),("onsubmit"===e.action_type||"delete"===e.action_run)&&(0,a.jsxs)(a.Fragment,{children:[S("webHooks",n)&&(0,a.jsx)(v.Z,{action:function(e){return function(e,t){for(var i=0;i<u[t].successAction.length;i+=1)if("webHooks"===u[t].successAction[i].type){u[t].successAction[i].details.id=e.map((function(e){return e.value}));break}y([].concat(u))}(e,n)},jsonValue:!0,value:F("webHooks","id",n),title:(0,a.jsx)("span",{className:"f-m",children:(0,c.__)("Web Hooks","bitform")}),titleClassName:"mt-2 w-7",isMultiple:!0,options:null==r||null==(j=r.confirmation)||null==(_=j.type)||null==(N=_.webHooks)?void 0:N.map((function(e,t){return{label:e.title,value:e.id?JSON.stringify({id:e.id}):JSON.stringify({index:t})}})),placeholder:(0,c.__)("Select Hooks to Call","bitform")}),S("integ",n)&&(0,a.jsx)(v.Z,{action:function(e){return function(e,t){for(var i=0;i<u[t].successAction.length;i+=1)if("integ"===u[t].successAction[i].type){u[t].successAction[i].details.id=e.map((function(e){return e.value}));break}y([].concat(u))}(e,n)},jsonValue:!0,value:F("integ","id",n),title:(0,a.jsx)("span",{className:"f-m",children:(0,c.__)("Integrations","bitform")}),titleClassName:"mt-2 w-7",isMultiple:!0,options:null==r||null==(k=r.integrations)?void 0:k.map((function(e,t){return{label:e.name,value:e.id?JSON.stringify({id:e.id}):JSON.stringify({index:t})}})),placeholder:(0,c.__)("Select Integation","bitform")}),"delete"!==e.action_run&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mt-2"}),S("successMsg",n)&&(0,a.jsxs)("label",{className:"f-m",children:[(0,c.__)("Success Message:","bitform"),(0,a.jsx)("br",{}),(0,a.jsxs)("select",{className:"btcd-paper-inp w-7",onChange:function(e){return function(e,t){for(var i=0;i<u[t].successAction.length;i+=1)if("successMsg"===u[t].successAction[i].type){u[t].successAction[i].details.id=e;break}y([].concat(u))}(e.target.value,n)},value:F("successMsg","id",n),children:[(0,a.jsx)("option",{value:"",children:(0,c.__)("Select Message","bitform")}),null==r||null==(w=r.confirmation)||null==(C=w.type)||null==(q=C.successMsg)?void 0:q.map((function(e,t){return(0,a.jsx)("option",{value:e.id?JSON.stringify({id:e.id}):JSON.stringify({index:t}),children:e.title},"sm-"+(t+2.3))}))]})]}),(0,a.jsx)("div",{className:"mt-2"}),S("redirectPage",n)&&(0,a.jsxs)("label",{className:"f-m",children:[(0,c.__)("Redirect URL:","bitform"),(0,a.jsx)("br",{}),(0,a.jsxs)("select",{className:"btcd-paper-inp w-7",onChange:function(e){return function(e,t){for(var i=0;i<u[t].successAction.length;i+=1)if("redirectPage"===u[t].successAction[i].type){u[t].successAction[i].details.id=e;break}y([].concat(u))}(e.target.value,n)},value:F("redirectPage","id",n),children:[(0,a.jsx)("option",{value:"",children:(0,c.__)("Select Page To Redirect","bitform")}),null==r||null==(B=r.confirmation)||null==(K=B.type)||null==(Q=K.redirectPage)?void 0:Q.map((function(e,t){return(0,a.jsx)("option",{value:e.id?JSON.stringify({id:e.id}):JSON.stringify({index:t}),children:e.title},"sr-"+(t+2.5))}))]})]})]}),(0,a.jsx)("div",{className:"mt-2",children:S("mailNotify",n)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("label",{className:"f-m",children:[(0,c.__)("Email Notification:","bitform"),(0,a.jsx)("br",{}),(0,a.jsxs)("select",{className:"btcd-paper-inp w-7",onChange:function(e){return P("tem",e,n)},value:F("mailNotify","id",n),children:[(0,a.jsx)("option",{value:"",children:(0,c.__)("Select Email Template","bitform")}),r.mailTem&&r.mailTem.map((function(e,t){return(0,a.jsx)("option",{value:e.id?JSON.stringify({id:e.id}):JSON.stringify({index:t}),children:e.title},"sem-"+(t+2.3))}))]})]}),(0,a.jsx)(v.Z,{action:function(e){return P("to",e,n)},value:F("mailNotify","to",n),placeholder:(0,c.__)("Add Email Receiver","bitform"),title:(0,a.jsx)("span",{className:"f-m",children:(0,c.__)("To","bitform")}),isMultiple:!0,titleClassName:"w-7 mt-2",addable:!0,options:Z(F("mailNotify","to",n))}),(0,a.jsx)(v.Z,{action:function(e){return P("from",e,n)},placeholder:(0,c.__)("Add mail from address","bitform"),value:F("mailNotify","from",n),title:(0,a.jsx)("span",{className:"f-m",children:(0,c.__)("From","bitform")}),titleClassName:"w-7 mt-2",addable:!0,options:Z(F("mailNotify","from",n))}),(0,a.jsx)(v.Z,{action:function(e){return P("cc",e,n)},value:F("mailNotify","cc",n),placeholder:(0,c.__)("Add Email CC","bitform"),title:(0,a.jsx)("span",{className:"f-m",children:(0,c.__)("CC","bitform")}),isMultiple:!0,titleClassName:"w-7 mt-2",addable:!0,options:Z(F("mailNotify","cc",n))}),(0,a.jsx)(v.Z,{action:function(e){return P("bcc",e,n)},placeholder:(0,c.__)("Add Email BCC","bitform"),value:F("mailNotify","bcc",n),title:(0,a.jsx)("span",{className:"f-m",children:(0,c.__)("BCC","bitform")}),isMultiple:!0,titleClassName:"w-7 mt-2",addable:!0,options:Z(F("mailNotify","bcc",n))}),(0,a.jsx)(v.Z,{action:function(e){return P("replyto",e,n)},placeholder:(0,c.__)("Reply To","bitform"),value:F("mailNotify","replyto",n),title:(0,a.jsx)("span",{className:"f-m",children:(0,c.__)("Reply To","bitform")}),isMultiple:!0,titleClassName:"w-7 mt-2",addable:!0,options:Z(F("mailNotify","replyto",n))}),(0,a.jsx)(v.Z,{action:function(e){return P("attachment",e,n)},placeholder:(0,c.__)("Attachment","bitform"),value:F("mailNotify","attachment",n),title:(0,a.jsx)("span",{className:"f-m",children:(0,c.__)("Attachment","bitform")}),isMultiple:!0,titleClassName:"w-7 mt-2",options:U()})]})}),"delete"!==e.action_run&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("b",{className:"txt-dp",children:(0,c.__)("Set another field value","bitform")})})]}),"onvalidate"===e.action_type&&"delete"!==e.action_run&&(0,a.jsxs)(d,{onChange:function(e){return function(e,t){u[t].validateMsg=e,y([].concat(u))}(e.target.value,n)},value:e.validateMsg,label:"Error Message",className:"w-7 mt-2",children:[(0,a.jsx)("option",{value:"",children:(0,c.__)("Select Message","bitform")}),null==r||null==(X=r.confirmation)||null==(Y=X.type)||null==(ee=Y.successMsg)?void 0:ee.map((function(e,t){return(0,a.jsx)("option",{value:e.id?JSON.stringify({id:e.id}):JSON.stringify({index:t}),children:e.title},"vm-"+(t+2.7))}))]}),"onvalidate"!==e.action_type&&"delete"!==e.action_run&&(0,a.jsxs)("div",{className:"ml-2 mt-2",children:[e.actions.map((function(l,c){return(0,a.jsxs)("span",{children:[(0,a.jsx)(h,{formFields:t,fields:i,action:l,setworkFlows:y,lgcGrpInd:n,actionInd:c,actionType:e.action_type}),e.actions.length!==c+1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{height:5},children:(0,a.jsx)("svg",{height:"60",width:"50",children:(0,a.jsx)("line",{x1:"20",y1:"10",x2:"20",y2:"0",style:{stroke:"#b9c5ff",strokeWidth:1}})})}),(0,a.jsx)("h6",{className:"m-0 ml-2 mt-1 txt-gray",children:"AND"}),(0,a.jsx)("div",{style:{height:5},children:(0,a.jsx)("svg",{height:"60",width:"50",children:(0,a.jsx)("line",{x1:"20",y1:"10",x2:"20",y2:"0",style:{stroke:"#b9c5ff",strokeWidth:1}})})})]})]},"atn-"+(c+22))})),(0,a.jsx)("br",{}),(0,a.jsx)(s.Z,{onClick:function(){return function(e){y((function(t){return"onsubmit"===t[e].action_type?t[e].actions.push({field:"",action:"value"}):t[e].actions.push({field:"",action:"disable"}),[].concat(t)}))}(n)},icn:!0,className:"blue sh-sm",children:(0,a.jsx)(m.Z,{size:"14",className:"icn-rotate-45"})})]})]})]}),A&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(s.Z,{onClick:function(){return z(n)},icn:!0,className:"ml-2 sh-sm btcd-menu-btn tooltip",style:{"--tooltip-txt":'"Delete Action"'},children:(0,a.jsx)("span",{className:"btcd-icn icn-trash-2"})})})]}),!A&&(0,a.jsxs)("div",{className:"txt-center bg-pro p-5 mt-2",children:[(0,c.__)("For","bitform")," ",(0,a.jsx)("span",{className:"txt-pro",children:(0,c.__)("UNLIMITED","bitform")})," ",(0,c.__)("Conditional Logics","bitform"),", ",(0,a.jsx)("a",{href:"https://bitpress.pro/",target:"_blank",rel:"noreferrer",children:(0,a.jsx)("b",{className:"txt-pro",children:(0,c.__)("Buy Premium","bitform")})})]})]},"workFlows-grp-"+(n+13))})):(0,a.jsxs)("div",{className:"txt-center btcd-empty",children:[(0,a.jsx)("span",{className:"btcd-icn icn-stack"}),(0,c.__)("Empty","bitform")]})]})}}}]);
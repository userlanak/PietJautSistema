(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[3523],{3523:function(e,t,n){"use strict";n.r(t);var i=n(2122),a=n(7294),l=n(5977),o=n(3727),s=n(5637),r=n(8762),c=n(5893),m=function(e,t){var n=t.name,a=t.value,l=(0,i.Z)({},e);return l[n]=a,l};t.default=function(e){var t=e.tem,n=(e.setTem,e.mailTem),i=e.setMailTem,d=e.formFields,u=e.saveForm,f=(0,a.useReducer)(m,t),p=f[0],b=f[1],h=(0,a.useState)(!1),v=h[0],g=h[1],x=(0,l.UO)(),y=x.formType,_=x.formID,j=x.id,w=(0,l.k6)(),C=function(e){b({name:"body",value:e})};(0,a.useEffect)((function(){window.tinymce&&tinymce.remove()}),[]);var k=p.title,N=p.sub;(0,a.useEffect)((function(){!function(){if("undefined"!==typeof tinymce&&d.length>0){for(var e=document.querySelectorAll(".form-fields"),t=0;t<e.length;t+=1)e[t].style.display="none";tinymce.init({selector:".btcd-editor",plugins:"link hr lists wpview wpemoji",theme:"modern",menubar:!1,branding:!1,resize:"verticle",min_width:300,toolbar:"formatselect bold italic | alignleft aligncenter alignright | outdent indent | link | undo redo | hr | toogleCode | addFormField",convert_urls:!1,setup:function(e){e.on("Paste Change input Undo Redo",(function(){C(e.getContent())})),e.addButton("addFormField",{text:(0,s.__)("Form Fields ","bitform"),tooltip:(0,s.__)("Add Form Field Value in Message","bitform"),type:"menubutton",icon:!1,menu:d.map((function(t){return!t.type.match(/^(file-up|recaptcha)$/)&&{text:t.name,onClick:function(){e.insertContent("${"+t.key+"}")}}}))}),e.addButton("toogleCode",{text:"</>",tooltip:(0,s.__)("Toggle preview","bitform"),icon:!1,onclick:function(t){var n=tinymce.dom.DomQuery,i=n("textarea"),a=n(e.iframeElement);i.value=e.getContent({source_view:!0}),a.toggleClass("hidden"),i.toggleClass("visible"),n("iframe.hidden").length>0?i.prependTo(".mce-edit-area"):(a.value=i.value,i.appendTo("body"))}})}})}}()}),[d,k,N,C]);var T=function(e){var t=e.target,n=t.name,i=t.value;b({name:n,value:i})};return(0,c.jsxs)("div",{style:{width:900},children:[(0,c.jsx)(r.Z,{show:v,setModal:g,title:(0,s.__)("Browse Template","bitform"),children:(0,c.jsx)("h4",{className:"txt-dp",children:(0,s.__)("Email Templates Coming soon","bitform")})}),(0,c.jsxs)(o.OL,{to:"/form/settings/"+y+"/"+_+"/email-templates",className:"btn btcd-btn-o-gray",children:[(0,c.jsx)("span",{className:"btcd-icn icn-arrow_back"}),"Â ",(0,s.__)("Back","bitfrom")]}),(0,c.jsx)("button",{onClick:function(){n.push(p),i([].concat(n)),w.push("/form/settings/"+y+"/"+_+"/email-templates"),u()},className:"btn blue f-right",type:"button",children:(0,s.__)("Save Template","bitform")}),(0,c.jsxs)("div",{className:"mt-3 flx",children:[(0,c.jsxs)("b",{style:{width:103},children:[(0,s.__)("Template Name:","bitform")," "]}),(0,c.jsx)("input",{onChange:T,name:"title",type:"text",className:"btcd-paper-inp w-9",placeholder:"Name",value:p.title})]}),(0,c.jsxs)("div",{className:"mt-3 flx",children:[(0,c.jsx)("b",{style:{width:100},children:"Subject:"}),(0,c.jsx)("input",{onChange:T,name:"sub",type:"text",className:"btcd-paper-inp w-7",placeholder:"Email Subject Here",value:p.sub}),(0,c.jsxs)("select",{onChange:function(e){p.sub+=e.target.value,b({name:"sub",value:p.sub}),e.target.value=""},className:"btcd-paper-inp ml-2",style:{width:150},children:[(0,c.jsx)("option",{value:"",children:(0,s.__)("Add form field","bitform")}),null!==d&&d.map((function(e){return!e.type.match(/^(file-up|recaptcha)$/)&&(0,c.jsx)("option",{value:"${"+e.key+"}",children:e.name},e.key)}))]})]}),(0,c.jsxs)("div",{className:"mt-3",children:[(0,c.jsxs)("div",{className:"flx flx-between",children:[(0,c.jsx)("b",{children:(0,s.__)("Body:","bitform")}),(0,c.jsx)("button",{className:"btn",onClick:function(){return g(!0)},type:"button",children:(0,s.__)("Choose Template","bitform")})]}),(0,c.jsx)("label",{htmlFor:"t-m-e-"+j+"-"+_,className:"mt-2 w-10",children:(0,c.jsx)("textarea",{id:"t-m-e-"+j+"-"+_,onChange:function(e){return C(e.target.value)},className:"btcd-editor btcd-paper-inp mt-1",rows:"5",value:p.body})})]})]})}}}]);
(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[8269],{8269:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var n=a(2122),i=a(7294),r=a(5637),s=a(9151),l=a(5257),o=a(9281),c=a(5893);function d(e){var t=e.formID,a=e.signConf,d=e.setSignConf,m=e.step,f=e.setstep,u=e.isLoading,h=e.setisLoading,p=e.setSnackbar,_=e.redirectLocation,b=e.isInfo,g=(0,i.useState)(!1),v=g[0],x=g[1],C=(0,i.useState)({dataCenter:"",clientId:"",clientSecret:""}),w=C[0],j=C[1],S=function(e){var t=(0,n.Z)({},a),i=(0,n.Z)({},w);i[e.target.name]="",t[e.target.name]=e.target.value,j(i),d(t)};return(0,c.jsxs)("div",{className:"btcd-stp-page",style:(0,n.Z)({},{width:1===m&&900},{height:1===m&&"100%"}),children:[(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Integration Name:","bitform")})}),(0,c.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:S,name:"name",value:a.name,type:"text",placeholder:(0,r.__)("Integration Name...","bitform"),disabled:b}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Data Center:","bitform")})}),(0,c.jsxs)("select",{onChange:S,name:"dataCenter",value:a.dataCenter,className:"btcd-paper-inp w-9 mt-1",disabled:b,children:[(0,c.jsx)("option",{value:"",children:(0,r.__)("--Select a data center--","bitform")}),(0,c.jsx)("option",{value:"com",children:"zoho.com"}),(0,c.jsx)("option",{value:"eu",children:"zoho.eu"}),(0,c.jsx)("option",{value:"com.cn",children:"zoho.com.cn"}),(0,c.jsx)("option",{value:"in",children:"zoho.in"}),(0,c.jsx)("option",{value:"com.au",children:"zoho.com.au"})]}),(0,c.jsx)("div",{style:{color:"red"},children:w.dataCenter}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Homepage URL:","bitform")})}),(0,c.jsx)(s.Z,{value:""+window.location.origin,setSnackbar:p,className:"field-key-cpy w-6 ml-0",readOnly:b}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Authorized Redirect URIs:","bitform")})}),(0,c.jsx)(s.Z,{value:_||window.location.href+"/redirect",setSnackbar:p,className:"field-key-cpy w-6 ml-0",readOnly:b}),(0,c.jsxs)("small",{className:"d-blk mt-5",children:[(0,r.__)("To get Client ID and SECRET , Please Visit","bitform")," ",(0,c.jsx)("a",{className:"btcd-link",href:"https://api-console.zoho."+((null==a?void 0:a.dataCenter)||"com")+"/",target:"_blank",rel:"noreferrer",children:(0,r.__)("Zoho API Console","bitform")})]}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Client id:","bitform")})}),(0,c.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:S,name:"clientId",value:a.clientId,type:"text",placeholder:(0,r.__)("Client id...","bitform"),disabled:b}),(0,c.jsx)("div",{style:{color:"red"},children:w.clientId}),(0,c.jsx)("div",{className:"mt-3",children:(0,c.jsx)("b",{children:(0,r.__)("Client secret:","bitform")})}),(0,c.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:S,name:"clientSecret",value:a.clientSecret,type:"text",placeholder:(0,r.__)("Client secret...","bitform"),disabled:b}),(0,c.jsx)("div",{style:{color:"red"},children:w.clientSecret}),!b&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("button",{onClick:function(){return(0,o.P_)(a,d,j,x,h,p)},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:v,children:[v?(0,r.__)("Authorized âœ”","bitform"):(0,r.__)("Authorize","bitform"),u&&(0,c.jsx)(l.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,c.jsx)("br",{}),(0,c.jsxs)("button",{onClick:function(){f(2),(0,o.Zo)(t,a,d,h,p),document.querySelector(".btcd-s-wrp").scrollTop=0},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!v,children:[(0,r.__)("Next","bitform"),(0,c.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})}},9281:function(e,t,a){"use strict";a.d(t,{Rx:function(){return s},Zo:function(){return o},V9:function(){return c},WK:function(){return d},P_:function(){return m}});var n=a(2122),i=a(5637),r=a(9492),s=function(e,t,a,i,r,s,o,c,d){var m=(0,n.Z)({},t);if(o){var f=(0,n.Z)({},c);f[e.target.name]="",d((0,n.Z)({},f))}switch(m[e.target.name]=e.target.value,e.target.name){case"template":m=l(m,i,a,r,s)}a((0,n.Z)({},m))},l=function(e,t,a,i,r){var s,l,o=(0,n.Z)({},e);return o.table="",o.field_map=[{formField:"",zohoFormField:""}],delete o.templateActions,null!=o&&null!=(s=o.default)&&null!=(l=s.templateDetails)&&l[e.template]||c(t,o,a,i,r),o},o=function(e,t,a,s,l){s(!0);var o={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,r.Z)(o,"bitforms_zsign_refresh_templates").then((function(e){if(e&&e.success){var r=(0,n.Z)({},t);r.default||(r.default={}),e.data.templates&&(r.default.templates=e.data.templates),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),l({show:!0,msg:(0,i.__)("Templates refreshed","bitform")}),a((0,n.Z)({},r))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?l({show:!0,msg:(0,i.g)((0,i.__)("Templates refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):l({show:!0,msg:(0,i.__)("Templates refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},c=function(e,t,a,s,l){var o=t.template;s(!0);var c={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,template:o};(0,r.Z)(c,"bitforms_zsign_refresh_template_details").then((function(e){if(e&&e.success){var r=(0,n.Z)({},t);r.default||(r.default={}),r.default.templateDetails||(r.default.templateDetails={}),e.data.templateDetails&&(r.default.templateDetails[o]=e.data.templateDetails),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),l({show:!0,msg:(0,i.__)("Template Details refreshed","bitform")}),a((0,n.Z)({},r))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?l({show:!0,msg:(0,i.g)((0,i.__)("Template Details refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):l({show:!0,msg:(0,i.__)("Template Details refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},d=function(e){var t={},a=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");a&&a.forEach((function(e){var a=e.split("=");a[1]&&(t[a[0]]=a[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},m=function(e,t,a,r,s,l){if(e.dataCenter&&e.clientId&&e.clientSecret){s(!0);var o="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=ZohoSign.templates.CREATE,ZohoSign.templates.READ,ZohoSign.templates.UPDATE&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+encodeURIComponent(window.location.href)+"/redirect",c=window.open(o,"zohoSign","width=400,height=609,toolbar=off"),d=setInterval((function(){if(c.closed){clearInterval(d);var a={},o=!1,m=localStorage.getItem("__bitforms_zohoSign");if(m&&(o=!0,a=JSON.parse(m),localStorage.removeItem("__bitforms_zohoSign")),a.code&&!a.error&&a&&o){var u=(0,n.Z)({},e);u.accountServer=a["accounts-server"],f(a,u,t,r,s,l)}else{var h=a.error?"Cause: "+a.error:"";l({show:!0,msg:(0,i.__)("Authorization failed","bitform")+" "+h+". "+(0,i.__)("please try again","bitform")}),s(!1)}}}),500)}else a({dataCenter:e.dataCenter?"":(0,i.__)("Data center cann't be empty","bitform"),clientId:e.clientId?"":(0,i.__)("Client ID cann't be empty","bitform"),clientSecret:e.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitform")})},f=function(e,t,a,s,l,o){var c=(0,n.Z)({},e);c.dataCenter=t.dataCenter,c.clientId=t.clientId,c.clientSecret=t.clientSecret,c.redirectURI=encodeURIComponent(window.location.href)+"/redirect",(0,r.Z)(c,"bitforms_zsign_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var r=(0,n.Z)({},t);r.tokenDetails=e.data,a(r),s(!0),o({show:!0,msg:(0,i.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):o({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitform")});l(!1)}))}}}]);
(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[8646],{5813:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});var a=i(5637),n=i(5893);function s(e){var t=e.step,i=e.saveConfig,s=e.edit,l=e.disabled;return s?(0,n.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,n.jsx)("button",{onClick:i,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:l,children:(0,a.__)("Save","bitform")})}):(0,n.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,n.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,n.jsxs)("button",{onClick:i,className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform"),"✔"]})]})}},3319:function(e,t,i){"use strict";i.d(t,{Mm:function(){return n},FP:function(){return s},T5:function(){return l},wX:function(){return r},mG:function(){return d},D2:function(){return c},LX:function(){return o},Ye:function(){return u}});var a=i(2122),n=(i(5637),i(9492),function(e,t,i,n,s,l,r){var d=[].concat(e);if(r)d[l]=(0,a.Z)({},e[l],n),d.push({editItegration:!0}),t([].concat(d)),s.push(i);else{var c=[].concat(d);c.push(n),c.push({newItegration:!0}),t(c),s.push(i)}}),s=function(e,t,i,n,s){var l=(0,a.Z)({},t);s?n?l.relatedlists[s-1].upload_field_map.splice(e,0,{}):l.relatedlists[s-1].field_map.splice(e,0,{}):n?l.upload_field_map.splice(e,0,{}):l.field_map.splice(e,0,{}),i((0,a.Z)({},l))},l=function(e,t,i,n,s){var l=(0,a.Z)({},t);s?n?l.relatedlists[s-1].upload_field_map.length>1&&l.relatedlists[s-1].upload_field_map.splice(e,1):l.relatedlists[s-1].field_map.length>1&&l.relatedlists[s-1].field_map.splice(e,1):n?l.upload_field_map.length>1&&l.upload_field_map.splice(e,1):l.field_map.length>1&&l.field_map.splice(e,1),i((0,a.Z)({},l))},r=function(e,t,i,n,s,l){var r=(0,a.Z)({},i);l?s?r.relatedlists[l-1].upload_field_map[t][e.target.name]=e.target.value:r.relatedlists[l-1].field_map[t][e.target.name]=e.target.value:s?r.upload_field_map[t][e.target.name]=e.target.value:r.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(l?r.relatedlists[l-1].field_map[t].customValue="":r.field_map[t].customValue=""),n((0,a.Z)({},r))},d=function(e,t,i,n,s){var l=(0,a.Z)({},i);s?l.relatedlists[s-1].field_map[t].customValue=e.target.value:l.field_map[t].customValue=e.target.value,n((0,a.Z)({},l))},c=function(e,t,i,n,s,l){var r=(0,a.Z)({},i);r.address_field[t][e.target.name]=e.target.value,n((0,a.Z)({},r))},o=function(e,t,i){var n=(0,a.Z)({},t);n.address_field||(n.address_field=[]),n.address_field.push({}),i((0,a.Z)({},n))},u=function(e,t,i){var n=(0,a.Z)({},t);n.address_field&&n.address_field.length>1&&n.address_field.splice(e,1),i((0,a.Z)({},n))}},2957:function(e,t,i){"use strict";i.d(t,{Rx:function(){return r},a7:function(){return d},qC:function(){return o},TF:function(){return u},WK:function(){return m},Lx:function(){return h}});var a=i(2122),n=i(9492),s=i(2249),l=i(5637),r=function(e,t,i,n,s,l,r,d,o){var u=(0,a.Z)({},t);if(r){var f=(0,a.Z)({},d);f[e.target.name]="",o((0,a.Z)({},f))}switch(u[e.target.name]=e.target.value,e.target.name){case"listId":u=c(u,n,i,s,l)}i((0,a.Z)({},u))},d=function(e){return!((null!=e&&e.address_field?e.address_field.filter((function(e){return!e.formField&&e.mailChimpAddressField&&e.required})):[]).length>0)},c=function(e,t,i,a,n){var l,r,d=(0,s.p$)(e);return d.field_map=[{formField:"",mailChimpField:""}],null!=d&&null!=(l=d.default)&&null!=(r=l.fields)&&r[e.listId]||(u(t,d,i,a,n),f(t,d,i,a,n)),d},o=function(e,t,i,s,r){s(!0);var d={formID:e,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,n.Z)(d,"bitforms_mChimp_refresh_audience").then((function(e){if(e&&e.success){var n=(0,a.Z)({},t);n.default||(n.default={}),e.data.audiencelist&&(n.default.audiencelist=e.data.audiencelist),e.data.tokenDetails&&(n.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,l.__)("Audience list refreshed","bitform")}),i((0,a.Z)({},n))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:(0,l.g)((0,l.__)("Audience list refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):r({show:!0,msg:(0,l.__)("Audience list failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},u=function(e,t,i,s,r){s(!0);var d={formID:e,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,listId:t.listId};(0,n.Z)(d,"bitforms_mChimp_refresh_tags").then((function(e){if(e&&e.success){var n=(0,a.Z)({},t);e.data.audienceTags&&(n.default.audienceTags=e.data.audienceTags),r({show:!0,msg:(0,l.__)("Audience tags refreshed","bitform")}),i((0,a.Z)({},n))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:(0,l.g)((0,l.__)("Audience tags refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):r({show:!0,msg:(0,l.__)("Audience tags failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},f=function(e,t,i,s,r){var d=t.listId;if(d){s(!0);var c={formID:e,listId:d,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,n.Z)(c,"bitforms_mChimp_refresh_fields").then((function(e){if(e&&e.success){var n=(0,a.Z)({},t);e.data.audienceField&&(n.default.fields||(n.default.fields={}),n.default.fields[d]=e.data.audienceField),e.data.tokenDetails&&(n.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,l.__)("Fields refreshed","bitform")}),i((0,a.Z)({},n))}else r({show:!0,msg:(0,l.__)("Fields refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))}},m=function(e){var t={},i=window.location.href.replace(""+window.opener.location.href,"").split("&");i&&i.forEach((function(e){var i=e.split("=");i[1]&&(t[i[0]]=i[1])})),localStorage.setItem("__bitforms_"+e,JSON.stringify(t)),window.close()},h=function(e,t,i,n,s,r,d,c){if(i.clientId&&i.clientSecret){d(!0);var o="https://login.mailchimp.com/oauth2/authorize?client_id="+i.clientId+"&redirect_uri="+encodeURIComponent(window.location.href)+"&response_type=code",u=window.open(o,e,"width=400,height=609,toolbar=off"),f=setInterval((function(){if(u.closed){clearInterval(f);var s={},o=!1,m=localStorage.getItem("__bitforms_"+e);if(m&&(o=!0,s=JSON.parse(m),localStorage.removeItem("__bitforms_"+e),s.code.search("#"))){var h=s.code.split("#");s.code=h[0]}if(s.code&&!s.error&&s&&o){var _=(0,a.Z)({},i);_.accountServer=s["accounts-server"],p(t,s,_,n,r,d,c)}else{var b=s.error?"Cause: "+s.error:"";c({show:!0,msg:(0,l.__)("Authorization failed","bitform")+" "+b+". "+(0,l.__)("please try again","bitform")}),d(!1)}}}),500)}else s({clientId:i.clientId?"":(0,l.__)("Client ID cann't be empty","bitform"),clientSecret:i.clientSecret?"":(0,l.__)("Secret key cann't be empty","bitform")})},p=function(e,t,i,s,r,d,c){var o=(0,a.Z)({},t);o.clientId=i.clientId,o.clientSecret=i.clientSecret,o.redirectURI=window.location.href,(0,n.Z)(o,"bitforms_"+e+"_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var t=(0,a.Z)({},i);t.tokenDetails=e.data,s(t),r(!0),c({show:!0,msg:(0,l.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?c({show:!0,msg:""+(0,l.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")}):c({show:!0,msg:(0,l.__)("Authorization failed. please try again","bitform")});d(!1)}))}},3849:function(e,t,i){"use strict";i.d(t,{Z:function(){return p}});var a=i(2122),n=i(7707),s=i(5637),l=i(8381),r=i(3319),d=i(5893);function c(e){var t=e.i,i=e.formFields,a=e.field,n=e.sheetConf,l=e.setSheetConf,c=e.addressField,o=a.required,u=c.filter((function(e){return!e.required}));return(0,d.jsxs)("div",{className:"flx flx-around mt-2 mr-1",children:[(0,d.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:a.formField||"",onChange:function(e){return(0,r.D2)(e,t,n,l)},children:[(0,d.jsx)("option",{value:"",children:(0,s.__)("Select Field","bitform")}),i.map((function(e){return"file-up"!==e.type&&(0,d.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)}))]}),(0,d.jsxs)("select",{className:"btcd-paper-inp",name:"mailChimpAddressField",value:a.mailChimpAddressField||"",onChange:function(e){return(0,r.D2)(e,t,n,l,c)},disabled:o,children:[(0,d.jsx)("option",{value:"",children:(0,s.__)("Select Field","bitform")}),o?Object.values(c).map((function(e,t){return(0,d.jsx)("option",{value:e.tag,children:e.name},t)})):Object.values(u).map((function(e,t){return(0,d.jsx)("option",{value:e.tag,children:e.name},t)}))]}),!o&&(0,d.jsx)("button",{onClick:function(){return(0,r.Ye)(t,n,l)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,d.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})}var o=i(3921);function u(e){var t,i,n,l=e.sheetConf,r=e.setSheetConf,c=(e.formFields,e.address),u=function(e,t){var i=(0,a.Z)({},l);"update"===t&&(e.target.checked?i.actions.update=!0:delete i.actions.update),"double_opt_in"===t&&(e.target.checked?i.actions.double_opt_in=!0:delete i.actions.double_opt_in),"address"===t&&(e.target.checked?(i.actions.address=!0,i.address_field=c.filter((function(e){return e.required})).map((function(e){return{formField:"",mailChimpAddressField:e.tag,required:!0}}))):(delete i.actions.address,i.address_field="")),r((0,a.Z)({},i))};return(0,d.jsxs)("div",{className:"pos-rel d-flx w-8",children:[(0,d.jsx)(o.Z,{checked:(null==(t=l.actions)?void 0:t.address)||!1,onChange:function(e){return u(e,"address")},className:"wdt-200 mt-4 mr-2",value:"address",title:(0,s.__)("Add Address Field","bitform"),subTitle:(0,s.__)("Add Address Field","bitform")}),(0,d.jsx)(o.Z,{checked:(null==(i=l.actions)?void 0:i.double_opt_in)||!1,onChange:function(e){return u(e,"double_opt_in")},className:"wdt-200 mt-4 mr-2",value:"double_opt_in",title:(0,s.__)("Double Opt-in","bitform"),subTitle:(0,s.__)("Add Double Opt-in","bitform")}),(0,d.jsx)(o.Z,{checked:(null==(n=l.actions)?void 0:n.update)||!1,onChange:function(e){return u(e,"update")},className:"wdt-200 mt-4 mr-2",value:"user_share",title:(0,s.__)("Update Mail Chimp","bitform"),subTitle:(0,s.__)("Update Responses with MailChimp exist Aduience?","bitform")})]})}var f=i(2957),m=i(8530);function h(e){var t,i,a=e.i,n=e.formFields,l=e.field,c=e.sheetConf,o=e.setSheetConf;return(0,d.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,d.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,d.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:function(e){return(0,r.wX)(e,a,c,o)},children:[(0,d.jsx)("option",{value:"",children:(0,s.__)("Select Field","bitform")}),n.map((function(e){return"file-up"!==e.type&&(0,d.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)})),(0,d.jsx)("option",{value:"custom",children:(0,s.__)("Custom...","bitform")})]}),"custom"===l.formField&&(0,d.jsx)(m.Z,{onChange:function(e){return(0,r.mG)(e,a,c,o)},label:(0,s.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:l.customValue,placeholder:(0,s.__)("Custom Value","bitform")}),(0,d.jsxs)("select",{className:"btcd-paper-inp",name:"mailChimpField",value:l.mailChimpField||"",onChange:function(e){return(0,r.wX)(e,a,c,o)},children:[(0,d.jsx)("option",{value:"",children:(0,s.__)("Select Field","bitform")}),(null==(t=c.default)||null==(i=t.fields)?void 0:i[c.listId])&&Object.values(c.default.fields[c.listId]).map((function(e,t){return(0,d.jsx)("option",{value:e.tag,children:e.name},t)}))]})]}),(0,d.jsx)("button",{onClick:function(){return(0,r.FP)(a,c,o)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,d.jsx)("button",{onClick:function(){return(0,r.T5)(a,c,o)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,d.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})}function p(e){var t,i,o,m,p,_,b=e.formID,g=e.formFields,v=e.handleInput,x=e.sheetConf,j=e.setSheetConf,C=e.isLoading,N=e.setisLoading,y=e.setSnackbar,F=(e.a,[{tag:"addr1",name:"Address 1",required:!0},{tag:"addr2",name:"Address 2",required:!1},{tag:"city",name:"City",required:!0},{tag:"zip",name:"Zip",required:!0},{tag:"state",name:"State",required:!0},{tag:"country",name:"Country",required:!1}]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)("b",{className:"wdt-150 d-in-b",children:(0,s.__)("Audience List:","bitform")}),(0,d.jsxs)("select",{onChange:v,name:"listId",value:x.listId,className:"btcd-paper-inp w-7",children:[(0,d.jsx)("option",{value:"",children:(0,s.__)("Select Audience List","bitform")}),(null==x||null==(t=x.default)?void 0:t.audiencelist)&&Object.keys(x.default.audiencelist).map((function(e){return(0,d.jsx)("option",{value:x.default.audiencelist[e].listId,children:x.default.audiencelist[e].listName},e)}))]}),(0,d.jsx)("button",{onClick:function(){return(0,f.qC)(b,x,j,N,y)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Audience list"'},type:"button",disabled:C,children:"↻"}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsxs)("div",{className:"d-flx",children:[(0,d.jsx)("b",{style:{marginTop:"15px"},className:"wdt-150 d-in-b",children:(0,s.__)("Tags: ","bitform")}),(0,d.jsx)(n.Z,{defaultValue:null==x?void 0:x.tags,className:"btcd-paper-drpdwn w-7",options:(null==x||null==(i=x.default)?void 0:i.audienceTags)&&Object.keys(x.default.audienceTags).map((function(e){return{label:x.default.audienceTags[e].tagName,value:x.default.audienceTags[e].tagName}})),onChange:function(e){return function(e){var t=(0,a.Z)({},x);e?t.tags=e?e.split(","):[]:delete t.tags,j((0,a.Z)({},t))}(e)}}),(0,d.jsx)("button",{onClick:function(){return(0,f.TF)(b,x,j,N,y)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,s.__)("Refresh MailChimp Tags","bitform")+"'"},type:"button",disabled:C,children:"↻"})]}),C&&(0,d.jsx)(l.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(null==(o=x.default)||null==(m=o.fields)?void 0:m[x.listId])&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("b",{className:"wdt-100",children:(0,s.__)("Map Fields","bitform")})}),(0,d.jsx)("div",{className:"btcd-hr mt-1"}),(0,d.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,d.jsx)("div",{className:"txt-dp",children:(0,d.jsx)("b",{children:(0,s.__)("Form Fields","bitform")})}),(0,d.jsx)("div",{className:"txt-dp",children:(0,d.jsx)("b",{children:(0,s.__)("Mail Chimp Fields","bitform")})})]}),x.field_map.map((function(e,t){return(0,d.jsx)(h,{i:t,field:e,sheetConf:x,formFields:g,setSheetConf:j},"sheet-m-"+(t+9))})),(0,d.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,d.jsx)("button",{onClick:function(){return(0,r.FP)(x.field_map.length,x,j)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(null==(p=x.actions)?void 0:p.address)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("b",{className:"wdt-100",children:(0,s.__)("Address Field Map","bitform")})}),(0,d.jsx)("div",{className:"btcd-hr mt-1"}),(0,d.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,d.jsx)("div",{className:"txt-dp",children:(0,d.jsx)("b",{children:(0,s.__)("Form Address Fields","bitform")})}),(0,d.jsx)("div",{className:"txt-dp",children:(0,d.jsx)("b",{children:(0,s.__)("Mail Chimp Address Fields","bitform")})})]}),null==x||null==(_=x.address_field)?void 0:_.map((function(e,t){return(0,d.jsx)(c,{i:t,field:e,sheetConf:x,formFields:g,setSheetConf:j,addressField:F},"sheet-m-"+(t+9))})),(0,d.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,d.jsx)("button",{onClick:function(){return(0,r.LX)(x.address_field.length,x,j)},className:"icn-btn sh-sm",type:"button",children:"+"})})]}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{})]}),x.listId&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("b",{className:"wdt-100",children:(0,s.__)("Actions","bitform")})}),(0,d.jsx)("div",{className:"btcd-hr mt-1"}),(0,d.jsx)(u,{sheetConf:x,setSheetConf:j,formFields:g,address:F})]})]})}},8530:function(e,t,i){"use strict";var a=i(5893);t.Z=function(e){var t=e.label,i=e.onChange,n=e.value,s=e.disabled,l=e.type,r=e.textarea,d=e.className;return(0,a.jsxs)("label",{className:"btcd-mt-inp "+d,children:[!r&&(0,a.jsx)("input",{type:void 0===l?"text":l,onChange:i,placeholder:" ",disabled:s,value:n}),r&&(0,a.jsx)("textarea",{type:void 0===l?"text":l,onChange:i,placeholder:" ",disabled:s,value:n}),(0,a.jsx)("span",{children:t})]})}}}]);
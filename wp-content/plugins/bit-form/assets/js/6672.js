(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[6672],{5813:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(5637),i=n(5893);function s(e){var t=e.step,n=e.saveConfig,s=e.edit,o=e.disabled;return s?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:o,children:(0,a.__)("Save","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform"),"âœ”"]})]})}},6672:function(e,t,n){"use strict";n.r(t);var a=n(2122),i=n(7294),s=n(5977),o=n(5637),r=n(5001),l=n(4383),c=n(5813),d=n(7376),m=n(5318),u=n(5893);t.default=function(e){var t=e.formFields,n=e.setIntegration,f=e.integrations,h=e.allIntegURL,p=(0,s.k6)(),b=(0,s.UO)().id,v=(0,i.useState)((0,a.Z)({},f[b])),_=v[0],x=v[1],g=(0,i.useState)({show:!1}),y=g[0],j=g[1],w=(0,i.useState)({show:!1}),C=w[0],N=w[1];return(0,u.jsxs)("div",{style:{width:900},children:[(0,u.jsx)(r.Z,{snack:y,setSnackbar:j}),(0,u.jsxs)("div",{className:"flx mt-3",children:[(0,u.jsx)("b",{className:"wdt-100 d-in-b",children:(0,o.__)("Integration Name:","bitform")}),(0,u.jsx)("input",{className:"btcd-paper-inp w-7",onChange:function(e){return(0,d.ZP)(e,_,x)},name:"name",value:_.name,type:"text",placeholder:(0,o.__)("Integration Name...","bitform")})]}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(0,u.jsx)(m.Z,{formFields:t,mailConf:_,setMailConf:x}),(0,u.jsx)(c.Z,{edit:!0,saveConfig:function(){var e,t;null!=(e=_.actions)&&e.update&&""===(null==(t=_.actions)?void 0:t.update.criteria)&&"criteria"!==C.show?N({show:"criteria"}):(0,l.Mm)(f,n,h,_,p,b,1)}}),(0,u.jsx)("br",{})]})}},7376:function(e,t,n){"use strict";n.d(t,{ZP:function(){return o},P_:function(){return r}});var a=n(2122),i=n(5637),s=n(9492);function o(e,t,n,i,s,o,r,l,c){var d=(0,a.Z)({},t);if(r){var m=(0,a.Z)({},l);m[e.target.name]="",c((0,a.Z)({},m))}d[e.target.name]=e.target.value,n((0,a.Z)({},d))}var r=function(e,t,n,s,o,r){if(e.dataCenter&&e.clientId&&e.clientSecret){o(!0);var c="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=ZohoMail.accounts.Read,ZohoMail.messages.CREATE,ZohoMail.messages.UPDATE,ZohoMail.Attachments.CREATE,ZohoMail.Attachments.READ,ZohoMail.Attachments.UPDATE&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+encodeURIComponent(window.location.href)+"/redirect",d=window.open(c,"zohoMail","width=400,height=609,toolbar=off"),m=setInterval((function(){if(d.closed){clearInterval(m);var n={},c=!1,u=localStorage.getItem("__bitforms_zohoMail");if(u&&(c=!0,n=JSON.parse(u),localStorage.removeItem("__bitforms_zohoMail")),n.code&&!n.error&&n&&c){var f=(0,a.Z)({},e);f.accountServer=n["accounts-server"],l(n,f,t,s,o,r)}else{var h=n.error?"Cause: "+n.error:"";r({show:!0,msg:(0,i.__)("Authorization failed","bitform")+" "+h+". "+(0,i.__)("please try again","bitform")}),o(!1)}}}),500)}else n({dataCenter:e.dataCenter?"":(0,i.__)("Data center cann't be empty","bitform"),clientId:e.clientId?"":(0,i.__)("Client ID cann't be empty","bitform"),clientSecret:e.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitform")})},l=function(e,t,n,o,r,l){var c=(0,a.Z)({},e);c.dataCenter=t.dataCenter,c.clientId=t.clientId,c.clientSecret=t.clientSecret,c.redirectURI=encodeURIComponent(window.location.href)+"/redirect",(0,s.Z)(c,"bitforms_zmail_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var s=(0,a.Z)({},t);s.tokenDetails=e.data,n(s),o(!0),l({show:!0,msg:(0,i.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?l({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):l({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitform")});r(!1)}))}},5318:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(2122),i=n(7294),s=n(7707),o=n(5637),r=(n(8774),n(2249)),l=n(4401),c=n(3921),d=n(5893);function m(e){var t=e.formFields,n=e.mailConf,r=e.setMailConf,m=(0,i.useState)({show:!1}),u=m[0],f=m[1];return(0,d.jsxs)("div",{className:"pos-rel",children:[(0,d.jsx)("div",{className:"d-flx flx-wrp",children:(0,d.jsx)(c.Z,{onChange:function(){return f({show:"attachments"})},checked:"attachments"in n.actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:(0,o.__)("Attachments","bitform"),subTitle:(0,o.__)("Add attachments from BitForm to mail pushed to Zoho Mail.","bitform")})}),(0,d.jsxs)(l.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:"attachments"===u.show,close:function(){return f({show:!1})},action:function(){return f({show:!1})},title:(0,o.__)("Select Attachment","bitform"),children:[(0,d.jsx)("div",{className:"btcd-hr mt-2"}),(0,d.jsx)("div",{className:"mt-2",children:(0,o.__)("Select file upload fields","bitform")}),(0,d.jsx)(s.Z,{defaultValue:n.actions.attachments,className:"mt-2 w-9",onChange:function(e){return function(e,t){var i=(0,a.Z)({},n);"attachments"===t&&(""!==e?i.actions.attachments=e:delete i.actions.attachments),r((0,a.Z)({},i))}(e,"attachments")},options:t.filter((function(e){return"file-up"===e.type})).map((function(e){return{label:e.name,value:e.key}}))})]})]})}function u(e){var t=e.formFields,n=e.mailConf,l=e.setMailConf,c=(0,i.useState)(""),u=(c[0],c[1]),f=function(){var e=[];"undefined"!==typeof bits&&bits.userMail&&Array.isArray(bits.userMail)&&e.push.apply(e,bits.userMail);var n=[];return t.map((function(e){"email"===e.type&&n.push({label:e.name,value:"${"+e.key+"}"})})),e.push({title:"Form Fields",type:"group",childs:n}),e};(0,i.useEffect)((function(){window.tinymce&&tinymce.remove()}),[]),(0,i.useEffect)((function(){!function(){if("undefined"!==typeof tinymce&&t.length>0){for(var e=document.querySelectorAll(".form-fields-em"),n=0;n<e.length;n+=1)e[n].style.display="none";tinymce.init({selector:"#body-content",plugins:"link hr lists wpview wpemoji",theme:"modern",menubar:!1,branding:!1,resize:"verticle",min_width:300,toolbar:"formatselect bold italic | alignleft aligncenter alignright | outdent indent | link | undo redo | hr | addFormField | toggleCode",setup:function(e){e.on("Paste Change input Undo Redo",(function(){p(e.getContent())})),e.addButton("addFormField",{text:"Form Fields ",tooltip:"Add Form Field Value in Message",type:"menubutton",icon:!1,menu:t.map((function(t){return!t.type.match(/^(file-up|recaptcha)$/)&&{text:t.name,onClick:function(){e.insertContent("${"+t.key+"}")}}}))}),e.addButton("toogleCode",{text:"</>",tooltip:(0,o.__)("Toggle preview","bitform"),icon:!1,onclick:function(t){var n=tinymce.dom.DomQuery,a=n("textarea"),i=n(e.iframeElement);a.value=e.getContent({source_view:!0}),i.toggleClass("hidden"),a.toggleClass("visible"),n("iframe.hidden").length>0?a.prependTo(".mce-edit-area"):(i.value=a.value,a.appendTo("body"))}})}})}}()}),[t]);var h=function(e,t){l((function(n){var i=(0,a.Z)({},n);return i[t]=e,i}))},p=function(e){u(e);var t=(0,r.p$)(n);t.body=e,l((0,a.Z)({},t))};return(0,d.jsxs)("div",{style:{width:875},children:[(0,d.jsxs)("div",{className:"flx",children:[(0,d.jsx)("b",{style:{width:100},children:(0,o.__)("Type:","bitform")}),(0,d.jsxs)("select",{onChange:function(e){return h(e.target.value,"mailType")},className:"btcd-paper-inp",style:{width:150},value:n.mailType,children:[(0,d.jsx)("option",{value:"",children:(0,o.__)("Select type","bitform")}),(0,d.jsx)("option",{value:"send",children:(0,o.__)("Send Email","bitform")}),(0,d.jsx)("option",{value:"draft",children:(0,o.__)("Save as Draft","bitform")})]})]}),(0,d.jsxs)("div",{className:"flx",children:[(0,d.jsx)("b",{style:{width:100},children:"To:"}),(0,d.jsx)(s.Z,{className:"w-7 mt-2 btcd-paper-drpdwn",defaultValue:n.to,placeholder:(0,o.__)("Add Email Receiver","bitform"),onChange:function(e){return h(e,"to")},options:f(),customValue:!0})]}),(0,d.jsxs)("div",{className:"flx",children:[(0,d.jsx)("b",{style:{width:100},children:(0,o.__)("CC:","bitform")}),(0,d.jsx)(s.Z,{className:"w-7 mt-2 btcd-paper-drpdwn",defaultValue:n.cc,placeholder:(0,o.__)("Add Email CC","bitform"),onChange:function(e){return h(e,"cc")},options:f(),customValue:!0})]}),(0,d.jsxs)("div",{className:"flx",children:[(0,d.jsx)("b",{style:{width:100},children:(0,o.__)("BCC:","bitform")}),(0,d.jsx)(s.Z,{className:"w-7 mt-2 btcd-paper-drpdwn",defaultValue:n.bcc,placeholder:(0,o.__)("Add Email BCC","bitform"),onChange:function(e){return h(e,"bcc")},options:f(),customValue:!0})]}),(0,d.jsxs)("div",{className:"mt-2 flx",children:[(0,d.jsx)("b",{style:{width:100},children:(0,o.__)("Subject:","bitform")}),(0,d.jsx)("input",{type:"text",onChange:function(e){return h(e.target.value,"subject")},className:"btcd-paper-inp w-7",placeholder:(0,o.__)("Email Subject Here","bitform"),value:n.subject||""}),(0,d.jsxs)("select",{onChange:function(e){var t=(0,a.Z)({},n);t.subject+=e.target.value,l((0,a.Z)({},t)),e.target.value=""},className:"btcd-paper-inp ml-2",style:{width:150},children:[(0,d.jsx)("option",{value:"",children:(0,o.__)("Add form field","bitform")}),null!==t&&t.map((function(e){return!e.type.match(/^(file-up|recaptcha)$/)&&(0,d.jsx)("option",{value:"${"+e.key+"}",children:e.name},e.key)}))]})]}),(0,d.jsxs)("div",{className:"mt-3",children:[(0,d.jsx)("div",{className:"flx flx-between",children:(0,d.jsx)("b",{children:(0,o.__)("Body:","bitform")})}),(0,d.jsx)("label",{htmlFor:"body-content",className:"mt-2 w-10",children:(0,d.jsx)("textarea",{id:"body-content",className:"btcd-paper-inp mt-1",rows:"5",value:n.body||"",onChange:function(e){return h(e.target.value,"body")}})})]}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("b",{className:"wdt-100",children:(0,o.__)("Actions","bitform")})}),(0,d.jsx)("div",{className:"btcd-hr mt-1"}),(0,d.jsx)(m,{mailConf:n,setMailConf:l,formFields:t})]})}}}]);
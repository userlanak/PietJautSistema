(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[2643],{2643:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(2122),i=a(7294),n=a(5637),r=a(9492),l=a(5257),d=a(2515),o=a(5893);function u(e){e.formID;var t=e.sendinBlueConf,a=e.setSendinBlueConf,u=e.step,c=e.setstep,f=e.setSnackbar,m=e.isInfo,b=(0,i.useState)(!1),_=b[0],h=b[1],p=(0,i.useState)({name:"",api_key:""}),g=p[0],y=p[1],v=(0,i.useState)(!1),x=v[0],k=v[1],j=(0,i.useState)(!1),N=j[0],w=j[1],S=function(e){var i=(0,s.Z)({},t),n=(0,s.Z)({},g);n[e.target.name]="",i[e.target.name]=e.target.value,y(n),a(i)};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"btcd-stp-page",style:(0,s.Z)({},{width:1===u&&900},{height:1===u&&"100%"}),children:[(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,n.__)("Integration Name:","bitform")})}),(0,o.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:S,name:"name",value:t.name,type:"text",placeholder:(0,n.__)("Integration Name...","bitform"),disabled:m}),(0,o.jsx)("div",{style:{color:"red",fontSize:"15px"},children:g.name}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,n.__)("API Key:","bitform")})}),(0,o.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:S,name:"api_key",value:t.api_key,type:"text",placeholder:(0,n.__)("Integration Name...","bitform"),disabled:m}),(0,o.jsx)("div",{style:{color:"red",fontSize:"15px"},children:g.api_key}),(0,o.jsxs)("small",{className:"d-blk mt-5",children:[(0,n.__)("To get API , Please Visit","bitform")," ",(0,o.jsx)("a",{className:"btcd-link",href:"https://account.sendinblue.com/advanced/api",target:"_blank",rel:"noreferrer",children:(0,n.__)("Sendinblue API Console","bitform")})]}),"auth"===N&&(0,o.jsxs)("div",{className:"flx mt-5",children:[(0,o.jsx)(l.Z,{size:"25",clr:"#022217",className:"mr-2"}),"Checking API Key!!!"]}),x&&!_&&!N&&(0,o.jsxs)("div",{className:"flx mt-5",style:{color:"red"},children:[(0,o.jsx)("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"Sorry, API key is invalid"]}),!m&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:function(){var e=(0,s.Z)({},t);if(e.name&&e.api_key){w("auth");var a={api_key:e.api_key};(0,r.Z)(a,"bitforms_sblue_authorize").then((function(e){null!=e&&e.success&&(h(!0),f({show:!0,msg:(0,n.__)("Authorized Successfully","bitfrom")})),k(!0),w(!1)}))}else y({name:e.name?"":(0,n.__)("Integration name cann't be empty","bitform"),api_key:e.api_key?"":(0,n.__)("API Key cann't be empty","bitform")})},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:_,children:[_?(0,n.__)("Authorized ✔","bitform"):(0,n.__)("Authorize","bitform"),N&&(0,o.jsx)(l.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("button",{onClick:function(){return c(2),(0,d.aS)(t,a,w,f),void(document.querySelector(".btcd-s-wrp").scrollTop=0)},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!_,children:[(0,n.__)("Next","bitform"),(0,o.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})})}},2515:function(e,t,a){"use strict";a.d(t,{Rx:function(){return r},aS:function(){return l},e1:function(){return d},Pl:function(){return o},Pd:function(){return u}});var s=a(2122),i=a(5637),n=a(9492),r=function(e,t,a){var i=(0,s.Z)({},t);i.name=e.target.value,a((0,s.Z)({},i))},l=function(e,t,a,r){a(!0);var l={api_key:e.api_key};(0,n.Z)(l,"bitforms_sblue_refresh_lists").then((function(n){if(n&&n.success){var l=(0,s.Z)({},e);l.default||(l.default={}),n.data.sblueList&&(l.default.sblueList=n.data.sblueList),r({show:!0,msg:(0,i.__)("List refreshed","bitform")}),t((0,s.Z)({},l))}else n&&n.data&&n.data.data||!n.success&&"string"===typeof n.data?r({show:!0,msg:(0,i.g)((0,i.__)("List refresh failed Cause: %s. please try again","bitform"),n.data.data||n.data)}):r({show:!0,msg:(0,i.__)("List failed. please try again","bitform")});a(!1)})).catch((function(){return a(!1)}))},d=function(e,t,a){var r={api_key:e.api_key};(0,n.Z)(r,"bitforms_sblue_refresh_template").then((function(n){if(n&&n.success){var r=(0,s.Z)({},e);r.default||(r.default={}),n.data.sblueTemplates&&(r.default.sblueTemplates=n.data.sblueTemplates),a({show:!0,msg:(0,i.__)("Templates refreshed","bitform")}),t((0,s.Z)({},r))}else n&&n.data&&n.data.data||!n.success&&"string"===typeof n.data?a({show:!0,msg:(0,i.g)((0,i.__)("Templates refresh failed Cause: %s. please try again","bitform"),n.data.data||n.data)}):a({show:!0,msg:(0,i.__)("Templates failed. please try again","bitform")})}))},o=function(e,t,a,r){var l={api_key:e.api_key};(0,n.Z)(l,"bitforms_sblue_headers").then((function(n){if(n&&n.success){var l=(0,s.Z)({},e);if(n.data.sendinBlueField){l.default.fields=n.data.sendinBlueField;var d=l.default.fields;l.field_map=Object.values(d).filter((function(e){return e.required})).map((function(e){return{formField:"",sendinBlueField:e.fieldId,required:!0}})),r({show:!0,msg:(0,i.__)("Sendinblue fields refreshed","bitform")})}else r({show:!0,msg:(0,i.__)("No Sendinblue fields found. Try changing the header row number or try again","bitform")});t((0,s.Z)({},l))}else r({show:!0,msg:(0,i.__)("Sendinblue fields refresh failed. please try again","bitform")});a(!1)})).catch((function(){return a(!1)}))},u=function(e){var t,a=null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.sendinBlueField&&e.required})):[];return(!e.lists||void 0!==(null==(t=e.lists)?void 0:t.length))&&!(a.length>0)}}}]);
(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[6356],{5813:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var i=a(5637),l=a(5893);function r(e){var t=e.step,a=e.saveConfig,r=e.edit,n=e.disabled;return r?(0,l.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,l.jsx)("button",{onClick:a,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:n,children:(0,i.__)("Save","bitform")})}):(0,l.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,l.jsx)("h2",{className:"ml-3",children:(0,i.__)("Successfully Integrated","bitform")}),(0,l.jsxs)("button",{onClick:a,className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,i.__)("Finish & Save ","bitform"),"✔"]})]})}},2333:function(e,t,a){"use strict";a.d(t,{P_:function(){return n},Rx:function(){return s},$P:function(){return u},GY:function(){return f},GX:function(){return m},Pd:function(){return h}});var i=a(2122),l=a(5637),r=a(9492),n=function(e,t,a,r,n,s){if(e.dataCenter&&e.clientId&&e.clientSecret){n(!0);var d="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=ZohoCreator.dashboard.READ,ZohoCreator.meta.application.READ,ZohoCreator.meta.form.READ,ZohoCreator.form.CREATE,ZohoCreator.report.CREATE,ZohoCreator.report.UPDATE&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+encodeURIComponent(window.location.href)+"/redirect",c=window.open(d,"zohoCreator","width=400,height=609,toolbar=off"),u=setInterval((function(){if(c.closed){clearInterval(u);var a={},d=!1,f=localStorage.getItem("__bitforms_zohoCreator");if(f&&(d=!0,a=JSON.parse(f),localStorage.removeItem("__bitforms_zohoCreator")),a.code&&!a.error&&a&&d){var m=(0,i.Z)({},e);m.accountServer=a["accounts-server"],o(a,m,t,r,n,s)}else{var p=a.error?"Cause: "+a.error:"";s({show:!0,msg:(0,l.__)("Authorization failed","bitform")+" "+p+". "+(0,l.__)("please try again","bitform")}),n(!1)}}}),500)}else a({dataCenter:e.dataCenter?"":(0,l.__)("Data center cann't be empty","bitform"),clientId:e.clientId?"":(0,l.__)("Client ID cann't be empty","bitform"),clientSecret:e.clientSecret?"":(0,l.__)("Secret key cann't be empty","bitform")})},o=function(e,t,a,n,o,s){var d=(0,i.Z)({},e);d.dataCenter=t.dataCenter,d.clientId=t.clientId,d.clientSecret=t.clientSecret,d.redirectURI=encodeURIComponent(window.location.href)+"/redirect",(0,r.Z)(d,"bitforms_zcreator_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var r=(0,i.Z)({},t);r.tokenDetails=e.data,a(r),n(!0),s({show:!0,msg:(0,l.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?s({show:!0,msg:""+(0,l.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")}):s({show:!0,msg:(0,l.__)("Authorization failed. please try again","bitform")});o(!1)}))},s=function(e,t,a,l,r,n,o,s,u){var f=(0,i.Z)({},t);if(o){var m=(0,i.Z)({},s);m[e.target.name]="",u((0,i.Z)({},m))}switch(f[e.target.name]=e.target.value,e.target.name){case"applicationId":f=d(f,l,a,r,n);break;case"formId":f=c(f,l,a,r,n)}a((0,i.Z)({},f))},d=function(e,t,a,l,r){var n,o,s=(0,i.Z)({},e);return s.department="",s.field_map=[{formField:"",zohoFormField:""}],s.actions={},null!=s&&null!=(n=s.default)&&null!=(o=n.forms)&&o[s.applicationId]||f(t,s,a,l,r),s},c=function(e,t,a,l,r){var n,o,s=(0,i.Z)({},e);return s.field_map=[{formField:"",zohoFormField:""}],s.upload_field_map=[{formField:"",zohoFormField:""}],s.actions={},null!=s&&null!=(n=s.default)&&null!=(o=n.fields)&&o[s.orgId]?(s.field_map=p(s),Object.keys(s.default.fields[s.applicationId][s.formId].fileUploadFields).length>0&&(s.upload_field_map=p(s,!0))):m(t,s,a,l,r),s},u=function(e,t,a,n,o){n(!0);var s={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,r.Z)(s,"bitforms_zcreator_refresh_applications").then((function(e){if(e&&e.success){var r=(0,i.Z)({},t);e.data.applications&&(r.default=(0,i.Z)({},r.default,{applications:e.data.applications})),o({show:!0,msg:(0,l.__)("Applications refreshed","bitform")}),a((0,i.Z)({},r))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,l.__)("Applications refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")}):o({show:!0,msg:(0,l.__)("Applications refresh failed. please try again","bitform")});n(!1)})).catch((function(){return n(!1)}))},f=function(e,t,a,n,o){var s=t.accountOwner,d=t.applicationId;n(!0);var c={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,accountOwner:s,applicationId:d};(0,r.Z)(c,"bitforms_zcreator_refresh_forms").then((function(e){if(e&&e.success){var r=(0,i.Z)({},t);r.default.forms||(r.default.forms={}),e.data.forms&&(r.default.forms[d]=e.data.forms),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),o({show:!0,msg:(0,l.__)("Forms refreshed","bitform")}),a((0,i.Z)({},r))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,l.__)("Forms refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")}):o({show:!0,msg:(0,l.__)("Forms refresh failed. please try again","bitform")});n(!1)})).catch((function(){return n(!1)}))},m=function(e,t,a,n,o){var s=t.accountOwner,d=t.applicationId,c=t.formId;n(!0);var u={formID:e,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails,accountOwner:s,applicationId:d,formId:c};(0,r.Z)(u,"bitforms_zcreator_refresh_fields").then((function(e){if(e&&e.success){var r=(0,i.Z)({},t);e.data.fields?(r.default.fields||(r.default.fields={}),r.default.fields[d]||(r.default.fields[d]={}),r.default.fields[d][c]=(0,i.Z)({},e.data),r.field_map=p(r),Object.keys(e.data.fileUploadFields).length>0&&(r.upload_field_map=p(r,!0)),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),o({show:!0,msg:(0,l.__)("Fields refreshed","bitform")})):o({show:!0,msg:""+(0,l.__)("Fields refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")}),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),a((0,i.Z)({},r))}else o({show:!0,msg:(0,l.__)("Fields refresh failed. please try again","bitform")});n(!1)})).catch((function(){return n(!1)}))},p=function(e,t){var a=e.applicationId,i=e.formId;return t?e.default.fields[a][i].requiredFileUploadFields.length>0?e.default.fields[a][i].requiredFileUploadFields.map((function(e){return{formField:"",zohoFormField:e}})):[{formField:"",zohoFormField:""}]:e.default.fields[a][i].required.length>0?e.default.fields[a][i].required.map((function(e){return{formField:"",zohoFormField:e}})):[{formField:"",zohoFormField:""}]},h=function(e){var t=null!=e&&e.field_map?e.field_map.filter((function(t){var a,i,l,r;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(a=e.default)||null==(i=a.fields)||null==(l=i[e.applicationId])||null==(r=l[e.formId])?void 0:r.required.indexOf(t.zohoFormField))})):[],a=null!=e&&e.upload_field_map?e.upload_field_map.filter((function(t){var a,i,l,r;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(a=e.default)||null==(i=a.fields)||null==(l=i[e.applicationId])||null==(r=l[e.formId])?void 0:r.requiredFileUploadFields.indexOf(t.zohoFormField))})):[];return!(t.length>0||a.length>0)}},2012:function(e,t,a){"use strict";a.d(t,{Z:function(){return _}});var i=a(5637),l=a(8381),r=a(4383),n=a(2122),o=a(7294),s=a(8692),d=a(3921),c=a(8762),u=a(8281),f=a(5893);function m(e){var t,a,l,r,m,p=e.creatorConf,h=e.setCreatorConf,b=(0,o.useState)(!1),_=b[0],x=b[1],v=function(e,t){var a=(0,n.Z)({},p);"criteria"===t&&(a.actions.update.criteria=e),"insert"===t&&(a.actions.update.insert=e),h((0,n.Z)({},a))};return(0,o.useEffect)((function(){var e,t;if(!_&&(null==(e=p.actions)||null==(t=e.update)||!t.criteria)){var a=(0,n.Z)({},p);delete a.actions.update,h((0,n.Z)({},a))}}),[_]),(0,f.jsxs)("div",{className:"pos-rel",children:[(0,f.jsx)("div",{className:"d-flx flx-wrp",children:(0,f.jsx)(u.Z,{action:function(){var e;if(null==(e=p.actions)||!e.update){var t=(0,n.Z)({},p);t.actions.update={insert:!0,criteria:""},h((0,n.Z)({},t))}x(!0)},children:(0,f.jsx)(d.Z,{onChange:function(e){return function(e,t){var a,i=(0,n.Z)({},p);"update"===t&&(!e.target.checked||null!=i&&null!=(a=i.actions)&&a.update?delete i.actions.update:(i.actions.update={insert:!0,criteria:""},x(!0))),h((0,n.Z)({},i))}(e,"update")},checked:"update"in(null==p?void 0:p.actions),className:"wdt-200 mt-4 mr-2",value:"Upsert_Record",title:(0,i.__)("Update Record","bitform"),subTitle:(0,i.__)("Control how the record gets updated.","bitform")})})}),(0,f.jsx)(c.Z,{md:!0,show:_,setModal:x,title:(0,i.__)("Update Row","bitform"),children:(0,f.jsx)("div",{className:"o-a",children:(null==p||null==(t=p.actions)?void 0:t.update)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("small",{children:(0,i.__)("Enter the criteria to update records. Please use the below format.","bitform")}),(0,f.jsx)("br",{}),(0,f.jsxs)("div",{className:"mt-4",children:[(0,f.jsxs)("small",{children:[(0,i.__)("Example:","bitform")," ",'(Email==\\"test@mail.com\\")']}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsxs)("small",{children:[(0,i.__)("Here Email is Zoho Creator Field link name. info:","bitform")," ",(0,f.jsx)("a",{href:"https://www.zoho.com/creator/help/api/v2/update-records.html",target:"_blank",rel:"noreferrer",children:(0,i.__)("Zoho Creator Criteria Guide","bitform")})]}),(0,f.jsx)("textarea",{name:"",rows:"5",className:"btcd-paper-inp mt-1",onChange:function(e){return v(e.target.value,"criteria")},value:null==(a=p.actions)||null==(l=a.update)?void 0:l.criteria})]}),(0,f.jsx)("div",{className:"font-w-m mt-3",children:(0,i.__)("Update Preferance","bitform")}),(0,f.jsx)("small",{children:(0,i.__)("insert new record if the above criteria doesn&apos;t met?","bitfomr")}),(0,f.jsxs)("div",{children:[(0,f.jsx)(s.Z,{onChange:function(){return v(!0,"insert")},radio:!0,checked:null==(r=p.actions.update)?void 0:r.insert,name:"up-row",title:(0,i.__)("Yes","bitform")}),(0,f.jsx)(s.Z,{onChange:function(){return v(!1,"insert")},radio:!0,checked:!(null!=(m=p.actions.update)&&m.insert),name:"up-row",title:(0,i.__)("No","bitform")})]})]})})})]})}var p=a(2333),h=a(8530);function b(e){var t,a,l,n,o,s,d,c,u,m,p,b,_,x,v,j,F,C,g,I=e.i,y=e.formFields,N=e.uploadFields,w=e.field,Z=e.creatorConf,k=e.setCreatorConf,z=Z.applicationId,D=Z.formId;return g=N?""===w.zohoFormField||-1===(null==(t=Z.default)||null==(a=t.fields)||null==(l=a[z])||null==(n=l[D])||null==(o=n.requiredFileUploadFields)?void 0:o.indexOf(w.zohoFormField)):""===w.zohoFormField||-1===(null==(s=Z.default)||null==(d=s.fields)||null==(c=d[z])||null==(u=c[D])||null==(m=u.required)?void 0:m.indexOf(w.zohoFormField)),(0,f.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,f.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,f.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:w.formField||"",onChange:function(e){return(0,r.wX)(e,I,Z,k,N)},children:[(0,f.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),N?y.map((function(e){return"file-up"===e.type&&(0,f.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)})):y.map((function(e){return"file-up"!==e.type&&(0,f.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)})),(0,f.jsx)("option",{value:"custom",children:(0,i.__)("Custom...","bitform")})]}),"custom"===w.formField&&(0,f.jsx)(h.Z,{onChange:function(e){return(0,r.mG)(e,I,Z,k)},label:(0,i.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:w.customValue,placeholder:(0,i.__)("Custom Value","bitform")}),(0,f.jsxs)("select",{className:"btcd-paper-inp",name:"zohoFormField",value:w.zohoFormField||"",disabled:!g,onChange:function(e){return(0,r.wX)(e,I,Z,k,N)},children:[(0,f.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),N?(null==(p=Z.default)||null==(b=p.fields)||null==(_=b[z])||null==(x=_[D])?void 0:x.fileUploadFields)&&Object.values(Z.default.fields[z][D].fileUploadFields).map((function(e){return g?!1===e.required&&(0,f.jsx)("option",{value:e.apiName,children:e.displayLabel},e.displayLabel):(0,f.jsx)("option",{value:e.apiName,children:e.displayLabel},e.displayLabel)})):(null==(v=Z.default)||null==(j=v.fields)||null==(F=j[z])||null==(C=F[D])?void 0:C.fields)&&Object.values(Z.default.fields[z][D].fields).map((function(e){return g?!1===e.required&&(0,f.jsx)("option",{value:e.apiName,children:e.displayLabel},e.displayLabel):(0,f.jsx)("option",{value:e.apiName,children:e.displayLabel},e.displayLabel)}))]})]}),g&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("button",{onClick:function(){return(0,r.FP)(I,Z,k,N)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,f.jsx)("button",{onClick:function(){return(0,r.T5)(I,Z,k,N)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,f.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})}function _(e){var t,a,n,o,s,d,c,u,h=e.formID,_=e.formFields,x=e.handleInput,v=e.creatorConf,j=e.setCreatorConf,F=e.isLoading,C=e.setisLoading,g=e.setSnackbar;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("br",{}),(0,f.jsx)("b",{className:"wdt-100 d-in-b",children:(0,i.__)("Application:","bitform")}),(0,f.jsxs)("select",{onChange:x,name:"applicationId",value:v.applicationId,className:"btcd-paper-inp w-7",children:[(0,f.jsx)("option",{value:"",children:(0,i.__)("Select Application","bitform")}),(null==v||null==(t=v.default)?void 0:t.applications)&&Object.values(v.default.applications).map((function(e){return(0,f.jsx)("option",{value:e.applicationId,children:e.applicationName},e.applicationId)}))]}),(0,f.jsx)("button",{onClick:function(){return(0,p.$P)(h,v,j,C,g)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Creator Portals"'},type:"button",disabled:F,children:"↻"}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)("b",{className:"wdt-100 d-in-b",children:(0,i.__)("Form:","bitform")}),(0,f.jsxs)("select",{onChange:x,name:"formId",value:v.formId,className:"btcd-paper-inp w-7",children:[(0,f.jsx)("option",{value:"",children:(0,i.__)("Select Form","bitform")}),(null==v||null==(a=v.default)||null==(n=a.forms)?void 0:n[v.applicationId])&&Object.values(v.default.forms[v.applicationId]).map((function(e){return(0,f.jsx)("option",{value:e.formId,children:e.formName},e.formId)}))]}),(0,f.jsx)("button",{onClick:function(){return(0,p.GY)(h,v,j,C,g)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Creator Departments"'},type:"button",disabled:F,children:"↻"}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),F&&(0,f.jsx)(l.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),v.formId&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"mt-4",children:[(0,f.jsx)("b",{className:"wdt-100",children:(0,i.__)("Map Fields","bitform")}),(0,f.jsx)("button",{onClick:function(){return(0,p.GX)(h,v,j,C,g)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh Creator Fields","bitform")+"'"},type:"button",disabled:F,children:"↻"})]}),(0,f.jsx)("div",{className:"btcd-hr mt-1"}),(null==(o=v.default)||null==(s=o.fields)||null==(d=s[null==v?void 0:v.applicationId])?void 0:d[null==v?void 0:v.formId])&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,f.jsx)("div",{className:"txt-dp",children:(0,f.jsx)("b",{children:(0,i.__)("Form Fields","bitform")})}),(0,f.jsx)("div",{className:"txt-dp",children:(0,f.jsx)("b",{children:(0,i.__)("Zoho Fields","bitform")})})]}),v.field_map.map((function(e,t){return(0,f.jsx)(b,{i:t,field:e,creatorConf:v,formFields:_,setCreatorConf:j},"creator-m-"+(t+9))})),(0,f.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,f.jsx)("button",{onClick:function(){return(0,r.FP)(v.field_map.length,v,j)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),0!==Object.keys(null==(c=v.default.fields[v.applicationId][v.formId])?void 0:c.fileUploadFields).length&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"mt-4",children:(0,f.jsx)("b",{className:"wdt-100",children:(0,i.__)("Map File Upload Fields","bitform")})}),(0,f.jsx)("div",{className:"btcd-hr mt-1"}),(0,f.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,f.jsx)("div",{className:"txt-dp",children:(0,f.jsx)("b",{children:(0,i.__)("Form Fields","bitform")})}),(0,f.jsx)("div",{className:"txt-dp",children:(0,f.jsx)("b",{children:(0,i.__)("Zoho Fields","bitform")})})]}),null==v||null==(u=v.upload_field_map)?void 0:u.map((function(e,t){return(0,f.jsx)(b,{i:t,field:e,creatorConf:v,formFields:_,setCreatorConf:j,uploadFields:!0},"creator-m-"+(t+9))})),(0,f.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,f.jsx)("button",{onClick:function(){var e;return(0,r.FP)(null==v||null==(e=v.upload_field_map)?void 0:e.length,v,j,!0)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{})]}),(0,f.jsx)("div",{className:"mt-4",children:(0,f.jsx)("b",{className:"wdt-100",children:(0,i.__)("Actions","bitform")})}),(0,f.jsx)("div",{className:"btcd-hr mt-1"}),(0,f.jsx)(m,{creatorConf:v,setCreatorConf:j})]})]})]})}},8530:function(e,t,a){"use strict";var i=a(5893);t.Z=function(e){var t=e.label,a=e.onChange,l=e.value,r=e.disabled,n=e.type,o=e.textarea,s=e.className;return(0,i.jsxs)("label",{className:"btcd-mt-inp "+s,children:[!o&&(0,i.jsx)("input",{type:void 0===n?"text":n,onChange:a,placeholder:" ",disabled:r,value:l}),o&&(0,i.jsx)("textarea",{type:void 0===n?"text":n,onChange:a,placeholder:" ",disabled:r,value:l}),(0,i.jsx)("span",{children:t})]})}},8281:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var i=a(523),l=a(5893);function r(e){var t=e.action,a=e.children;return(0,l.jsxs)("div",{className:"action-btn-wrapper",children:[(0,l.jsx)("div",{className:"action-btn",tabIndex:"0",role:"button",onClick:t,onKeyPress:t,children:(0,l.jsx)(i.Z,{})}),a]})}}}]);
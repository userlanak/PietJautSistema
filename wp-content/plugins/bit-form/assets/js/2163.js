(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[2163],{5813:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(5637),i=s(5893);function a(e){var t=e.step,s=e.saveConfig,a=e.edit,l=e.disabled;return a?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:s,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:l,children:(0,n.__)("Save","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,n.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:s,className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,n.__)("Finish & Save ","bitform"),"✔"]})]})}},2163:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var n=s(5637),i=s(7294),a=(s(8774),s(5977)),l=s(5001),r=(s(3231),s(4383)),c=s(5813),o=s(2122),d=s(9492),u=s(5257),m=s(5893);function f(e){e.formID;var t=e.mailPoetConf,s=e.setMailPoetConf,a=e.step,l=e.nextPage,r=e.setSnackbar,c=e.isInfo,f=(0,i.useState)(!1),b=f[0],h=f[1],x=(0,i.useState)({integrationName:""}),p=x[0],v=x[1],j=(0,i.useState)(!1),g=j[0],_=j[1],N=(0,i.useState)(!1),y=N[0],w=N[1];return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"btcd-stp-page",style:(0,o.Z)({},{width:1===a&&900},{height:1===a&&"100%"}),children:[(0,m.jsx)("div",{className:"mt-3",children:(0,m.jsx)("b",{children:(0,n.__)("Integration Name:","bitform")})}),(0,m.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:function(e){var n=(0,o.Z)({},t),i=(0,o.Z)({},p);i[e.target.name]="",n[e.target.name]=e.target.value,v(i),s(n)},name:"name",value:t.name,type:"text",placeholder:(0,n.__)("Integration Name...","bitform"),disabled:c}),"auth"===y&&(0,m.jsxs)("div",{className:"flx mt-5",children:[(0,m.jsx)(u.Z,{size:"25",clr:"#022217",className:"mr-2"}),"Checking if MailPoet is active!!!"]}),g&&!b&&!y&&(0,m.jsxs)("div",{className:"flx mt-5",style:{color:"red"},children:[(0,m.jsx)("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"Please! First Install Mailpoet Plugins"]}),(0,m.jsxs)("button",{onClick:function(){w("auth"),(0,d.Z)({},"bitforms_mail_poet_authorize").then((function(e){null!=e&&e.success&&(h(!0),r({show:!0,msg:(0,n.__)("Authorized Successfully","bitfrom")})),_(!0),w(!1)}))},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:b,children:[b?(0,n.__)("Authorized ✔","bitform"):(0,n.__)("Authorize","bitform"),y&&(0,m.jsx)(u.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,m.jsx)("br",{}),(0,m.jsxs)("button",{onClick:function(){return l(2)},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!b,children:[(0,n.__)("Next","bitform"),(0,m.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})})}var b=s(9746),h=s(4263);function x(e){var t=e.formFields,s=e.setIntegration,o=e.integrations,d=e.allIntegURL,u=(0,a.k6)(),x=(0,a.UO)().formID,p=(0,i.useState)(!1),v=p[0],j=p[1],g=(0,i.useState)(1),_=g[0],N=g[1],y=(0,i.useState)({show:!1}),w=y[0],C=y[1],F=(0,i.useState)({name:"Mail Poet",type:"Mail Poet",field_map:[{formField:"",mailPoetField:""}],actions:{}}),P=F[0],k=F[1],Z=function(e){if(3===e){if(!(0,h.Pd)(P))return void C({show:!0,msg:"Please map all required fields to continue."});""!==P.name&&P.field_map.length>0&&N(e)}else N(e),2===e&&P.name&&(0,h.XE)(x,P,k,j,C);document.querySelector(".btcd-s-wrp").scrollTop=0};return(0,m.jsxs)("div",{children:[(0,m.jsx)(l.Z,{snack:w,setSnackbar:C}),(0,m.jsx)("div",{className:"txt-center w-9 mt-2"}),(0,m.jsx)(f,{formID:x,mailPoetConf:P,setMailPoetConf:k,step:_,nextPage:Z,isLoading:v,setisLoading:j,setSnackbar:C}),(0,m.jsxs)("div",{className:"btcd-stp-page",style:{width:2===_&&900,height:2===_&&"100%",minHeight:2===_&&"200px"},children:[(0,m.jsx)(b.Z,{formID:x,formFields:t,mailPoetConf:P,setMailPoetConf:k,setSnackbar:C}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsxs)("button",{onClick:function(){return Z(3)},disabled:""===P.lists||P.field_map.length<1,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[(0,n.__)("Next","bitform"),(0,m.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(0,m.jsx)(c.Z,{step:_,saveConfig:function(){return(0,r.Mm)(o,s,d,P,u)}})]})}},4263:function(e,t,s){"use strict";s.d(t,{XE:function(){return l},eE:function(){return r},Rx:function(){return c},Pd:function(){return o}});var n=s(2122),i=s(5637),a=s(9492),l=function(e,t,s,l,r){l(!0),(0,a.Z)({},"bitforms_refresh_news_letter").then((function(e){if(e&&e.success){var a=(0,n.Z)({},t);a.default||(a.default={}),e.data.newsletterList&&(a.default.newsletterList=e.data.newsletterList),r({show:!0,msg:(0,i.__)("Newsletter list refreshed","bitform")}),s((0,n.Z)({},a))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,i.__)("Newsletter list refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):r({show:!0,msg:(0,i.__)("Newsletter list refresh failed. please try again","bitform")});l(!1)})).catch((function(){return l(!1)}))},r=function(e,t,s,l){(0,a.Z)({},"bitforms_mail_poet_list_headers").then((function(a){if(a&&a.success){var r=(0,n.Z)({},e);if(a.data.mailPoetFields){r.default.fields=a.data.mailPoetFields;var c=r.default.fields;r.field_map=Object.values(c).filter((function(e){return e.required})).map((function(e){return{formField:"",mailPoetField:e.id,required:!0}})),l({show:!0,msg:(0,i.__)("Mailpoet fields refreshed","bitform")})}else l({show:!0,msg:(0,i.__)("No Mailpoet fields found. Try changing the header row number or try again","bitform")});a.data.tokenDetails&&(r.tokenDetails=a.data.tokenDetails),t((0,n.Z)({},r))}else l({show:!0,msg:(0,i.__)("Mailpoet fields refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},c=function(e,t,s){var i=(0,n.Z)({},t);i.name=e.target.value,s((0,n.Z)({},i))},o=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.mailPoetField&&e.required})):[]).length>0)}},9746:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var n=s(2122),i=s(7707),a=s(5637),l=s(8381),r=s(4383),c=s(4263),o=s(8530),d=s(5893);function u(e){var t,s,i,l=e.i,r=e.formFields,c=e.field,u=e.mailPoetConf,m=e.setMailPoetConf,f=c.required,b=(null==u||null==(t=u.default)?void 0:t.fields)&&Object.values(null==u||null==(s=u.default)?void 0:s.fields).filter((function(e){return""===e.required})),h=function(e,t){var s=(0,n.Z)({},u);s.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(s.field_map[t].customValue=""),m(s)};return(0,d.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,d.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,d.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:c.formField||"",onChange:function(e){return h(e,l)},children:[(0,d.jsx)("option",{value:"",children:(0,a.__)("Select Field","bitform")}),r.map((function(e){return"file-up"!==e.type&&(0,d.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)})),(0,d.jsx)("option",{value:"custom",children:(0,a.__)("Custom...","bitform")})]}),"custom"===c.formField&&(0,d.jsx)(o.Z,{onChange:function(e){return function(e,t){var s=(0,n.Z)({},u);s.field_map[t].customValue=e.target.value,m(s)}(e,l)},label:(0,a.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:c.customValue,placeholder:(0,a.__)("Custom Value","bitform")}),(0,d.jsxs)("select",{className:"btcd-paper-inp",name:"mailPoetField",value:c.mailPoetField,onChange:function(e){return h(e,l)},disabled:f,children:[(0,d.jsx)("option",{value:"",children:(0,a.__)("Select Field","bitform")}),f?(null==u||null==(i=u.default)?void 0:i.fields)&&Object.values(u.default.fields).map((function(e){return(0,d.jsx)("option",{value:e.id,children:e.name},e.id+"-1")})):b&&b.map((function(e){return(0,d.jsx)("option",{value:e.id,children:e.name},e.id+"-1")}))]})]}),!f&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:function(){return function(e){var t=(0,n.Z)({},u);t.field_map.splice(e,0,{}),m(t)}(l)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,d.jsx)("button",{onClick:function(){return function(e){var t=(0,n.Z)({},u);t.field_map.length>1&&t.field_map.splice(e,1),m(t)}(l)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,d.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})}function m(e){var t,s=e.formID,o=e.formFields,m=e.mailPoetConf,f=e.setMailPoetConf,b=e.isLoading,h=e.setisLoading,x=e.setSnackbar,p=function(e){var t=(0,n.Z)({},m);e?(t.lists=e?e.split(","):[],(0,c.eE)(t,f,h,x)):delete t.lists,f((0,n.Z)({},t))};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsxs)("div",{className:"flx",children:[(0,d.jsx)("b",{className:"wdt-100 d-in-b",children:(0,a.__)("List: ","bitform")}),(0,d.jsx)(i.Z,{defaultValue:null==m?void 0:m.lists,className:"btcd-paper-drpdwn w-5",options:(null==m||null==(t=m.default)?void 0:t.newsletterList)&&Object.keys(m.default.newsletterList).map((function(e){return{label:m.default.newsletterList[e].newsletterName,value:m.default.newsletterList[e].newsletterId}})),onChange:function(e){return p(e)}}),(0,d.jsx)("button",{onClick:function(){return p(s)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,a.__)("Refresh MailPoet List","bitform")+"'"},type:"button",disabled:b,children:"↻"})]}),b&&(0,d.jsx)(l.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(null==m?void 0:m.lists)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("b",{className:"wdt-100",children:(0,a.__)("Map Fields","bitform")})}),(0,d.jsx)("div",{className:"btcd-hr mt-1"}),(0,d.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,d.jsx)("div",{className:"txt-dp",children:(0,d.jsx)("b",{children:(0,a.__)("Form Fields","bitform")})}),(0,d.jsx)("div",{className:"txt-dp",children:(0,d.jsx)("b",{children:(0,a.__)("MailPoet Fields","bitform")})})]}),m.field_map.map((function(e,t){return(0,d.jsx)(u,{i:t,field:e,mailPoetConf:m,formFields:o,setMailPoetConf:f},"mailpoet-m-"+(t+9))})),(0,d.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,d.jsx)("button",{onClick:function(){return(0,r.FP)(m.field_map.length,m,f)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{})]})]})}},8530:function(e,t,s){"use strict";var n=s(5893);t.Z=function(e){var t=e.label,s=e.onChange,i=e.value,a=e.disabled,l=e.type,r=e.textarea,c=e.className;return(0,n.jsxs)("label",{className:"btcd-mt-inp "+c,children:[!r&&(0,n.jsx)("input",{type:void 0===l?"text":l,onChange:s,placeholder:" ",disabled:a,value:i}),r&&(0,n.jsx)("textarea",{type:void 0===l?"text":l,onChange:s,placeholder:" ",disabled:a,value:i}),(0,n.jsx)("span",{children:t})]})}},3231:function(e,t,s){"use strict";var n=s(7294),i=s(5893);t.Z=function(e){var t=e.step,s=e.active,a=e.className;return(0,i.jsx)("div",{className:"d-in-b "+a,children:(0,i.jsxs)("div",{className:"flx flx-center",children:[Array(s).fill(0).map((function(e,t){return(0,i.jsxs)(n.Fragment,{children:[(0,i.jsx)("div",{className:"btcd-stp flx flx-center stp-a  txt-center",children:t+1}),s-1!==t&&(0,i.jsx)("div",{className:"btcd-stp-line stp-line-a"})]},"stp-"+(t+21))})),t-s!==0&&(0,i.jsx)("div",{className:"btcd-stp-line"}),Array(t-s).fill(0).map((function(e,a){return(0,i.jsxs)(n.Fragment,{children:[(0,i.jsx)("div",{className:"btcd-stp flx flx-center txt-center",children:a+s+1}),t-s-1!==a&&(0,i.jsx)("div",{className:"btcd-stp-line "})]},"stp-"+(a+23))}))]})})}}}]);
(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[2627],{5813:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(5637),a=n(5893);function l(e){var t=e.step,n=e.saveConfig,l=e.edit,s=e.disabled;return l?(0,a.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,a.jsx)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:s,children:(0,i.__)("Save","bitform")})}):(0,a.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,a.jsx)("h2",{className:"ml-3",children:(0,i.__)("Successfully Integrated","bitform")}),(0,a.jsxs)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,i.__)("Finish & Save ","bitform"),"✔"]})]})}},1212:function(e,t,n){"use strict";n.d(t,{Rx:function(){return s},aS:function(){return o},Pg:function(){return c},Pd:function(){return d},P_:function(){return u},WK:function(){return m}});var i=n(2122),a=n(5637),l=n(9492),s=function(e,t,n,a,l,s,o,c,d){var u=(0,i.Z)({},n);if(o){var f=(0,i.Z)({},c);f[e.target.name]="",d((0,i.Z)({},f))}switch(u[e.target.name]=e.target.value,e.target.name){case"list":u=r(u,t,a,l,s)}a((0,i.Z)({},u))},r=function(e,t,n,a,l){var s,r,o=(0,i.Z)({},e);return o.field_map=[{formField:"",zohoFormField:"Contact Email"}],null!=o&&null!=(s=o.default)&&null!=(r=s.fields)&&r[o.list]||c(t,o,n,a,l),o},o=function(e,t,n,s,r){s(!0);var o={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,l.Z)(o,"bitforms_zmarketingHub_refresh_lists").then((function(e){if(e&&e.success){var l=(0,i.Z)({},t);e.data.lists&&(l.default=(0,i.Z)({},l.default,{lists:e.data.lists})),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,a.__)("Lists refreshed","bitform")}),n((0,i.Z)({},l))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,a.__)("Lists refresh failed Cause:")+(e.data.data||e.data)+". "+(0,a.__)("please try again","bitform")}):r({show:!0,msg:(0,a.__)("Lists refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))},c=function(e,t,n,s,r){var o=t.list;if(o){s(!0);var c={formID:e,list:o,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,l.Z)(c,"bitforms_zmarketingHub_refresh_contact_fields").then((function(e){if(e&&e.success){var l=(0,i.Z)({},t);e.data.fields?(l.default.fields||(l.default.fields={}),l.default.fields[o]=e.data,r({show:!0,msg:(0,a.__)("Contact Fields refreshed","bitform")})):r({show:!0,msg:(0,a.__)("Zoho didn't provide fields names for this list","bitform")}),e.data.tokenDetails&&(l.tokenDetails=e.data.tokenDetails),n((0,i.Z)({},l))}else r({show:!0,msg:(0,a.__)("Contact Fields refresh failed. please try again","bitform")});s(!1)})).catch((function(){return s(!1)}))}},d=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(t){var n,i,a;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(n=e.default)||null==(i=n.fields)||null==(a=i[e.list])?void 0:a.required.indexOf(t.zohoFormField))})):[]).length>0)},u=function(e,t,n,l,s,r){if(e.dataCenter&&e.clientId&&e.clientSecret){s(!0);var o="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=ZohoMarketingHub.lead.READ,ZohoMarketingHub.lead.CREATE,ZohoMarketingHub.lead.UPDATE&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+encodeURIComponent(window.location.href)+"/redirect",c=window.open(o,"zohoMarkatingHub","width=400,height=609,toolbar=off"),d=setInterval((function(){if(c.closed){clearInterval(d);var n={},o=!1,u=localStorage.getItem("__bitforms_zohoMarkatingHub");if(u&&(o=!0,n=JSON.parse(u),localStorage.removeItem("__bitforms_zohoMarkatingHub")),n.code&&!n.error&&n&&o){var m=(0,i.Z)({},e);m.accountServer=n["accounts-server"],f(n,m,t,l,s,r)}else{var h=n.error?"Cause: "+n.error:"";r({show:!0,msg:(0,a.__)("Authorization failed","bitform")+" "+h+". "+(0,a.__)("please try again","bitform")}),s(!1)}}}),500)}else n({dataCenter:e.dataCenter?"":(0,a.__)("Data center cann't be empty","bitform"),clientId:e.clientId?"":(0,a.__)("Client ID cann't be empty","bitform"),clientSecret:e.clientSecret?"":(0,a.__)("Secret key cann't be empty","bitform")})},f=function(e,t,n,s,r,o){var c=(0,i.Z)({},e);c.dataCenter=t.dataCenter,c.clientId=t.clientId,c.clientSecret=t.clientSecret,c.redirectURI=encodeURIComponent(window.location.href)+"/redirect",(0,l.Z)(c,"bitforms_zmarketingHub_generate_token").then((function(e){if(e&&e.success){var l=(0,i.Z)({},t);l.tokenDetails=e.data,n(l),s(!0),o({show:!0,msg:(0,a.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,a.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,a.__)("please try again","bitform")}):o({show:!0,msg:(0,a.__)("Authorization failed. please try again","bitform")});r(!1)}))},m=function(){var e={},t=window.location.href.replace(window.opener.location.href+"/redirect","").split("&");t&&t.forEach((function(t){var n=t.split("=");n[1]&&(e[n[0]]=n[1])})),localStorage.setItem("__bitforms_zohoMarkatingHub",JSON.stringify(e)),window.close()}},1371:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(5637),a=n(8381),l=n(4383),s=n(1212),r=n(8530),o=n(5893);function c(e){var t,n,a,s,c=e.i,d=e.formFields,u=e.field,f=e.marketingHubConf,m=e.setMarketingHubConf,h=""===u.zohoFormField||-1===(null==(t=f.default.fields[f.list].required)?void 0:t.indexOf(u.zohoFormField));return(0,o.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,o.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,o.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:u.formField||"",onChange:function(e){return(0,l.wX)(e,c,f,m)},children:[(0,o.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),d.map((function(e){return"file-up"!==e.type&&(0,o.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)})),(0,o.jsx)("option",{value:"custom",children:(0,i.__)("Custom...","bitform")})]}),"custom"===u.formField&&(0,o.jsx)(r.Z,{onChange:function(e){return(0,l.mG)(e,c,f,m)},label:(0,i.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:u.customValue,placeholder:(0,i.__)("Custom Value","bitform")}),(0,o.jsxs)("select",{className:"btcd-paper-inp",name:"zohoFormField",value:u.zohoFormField||"",disabled:!h,onChange:function(e){return(0,l.wX)(e,c,f,m)},children:[(0,o.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),h?(null==f||null==(n=f.default)||null==(a=n.fields)||null==(s=a[f.list])?void 0:s.fields)&&f.default.fields[f.list].fields.map((function(e){return"Contact Email"!==e&&(0,o.jsx)("option",{value:e,children:e},e+"-1")})):(0,o.jsx)("option",{value:"Contact Email",children:(0,i.__)("Contact Email","bitform")},"contact_email")]})]}),(0,o.jsx)("button",{onClick:function(){return(0,l.FP)(c,f,m)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),h&&(0,o.jsx)("button",{onClick:function(){return(0,l.T5)(c,f,m)},className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:(0,o.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})}function d(e){var t,n,r,d=e.formID,u=e.formFields,f=e.handleInput,m=e.marketingHubConf,h=e.setMarketingHubConf,b=e.isLoading,_=e.setisLoading,p=e.setSnackbar;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("br",{}),(0,o.jsx)("b",{className:"wdt-100 d-in-b",children:(0,i.__)("List:","bitform")}),(0,o.jsxs)("select",{onChange:function(e){return f(e)},name:"list",value:m.list,className:"btcd-paper-inp w-7",children:[(0,o.jsx)("option",{value:"",children:(0,i.__)("Select List","bitform")}),(null==m||null==(t=m.default)?void 0:t.lists)&&Object.values(m.default.lists).map((function(e){return(0,o.jsx)("option",{value:e.listkey,children:e.listname},e.listkey)}))]}),(0,o.jsx)("button",{onClick:function(){return(0,s.aS)(d,m,h,_,p)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh MarketingHub Lists","bitform")+"'"},type:"button",disabled:b,children:"↻"}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),b&&(0,o.jsx)(a.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),m.list&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("b",{className:"wdt-100",children:(0,i.__)("Map Fields","bitform")}),(0,o.jsx)("button",{onClick:function(){return(0,s.Pg)(d,m,h,_,p)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh MarketingHub Contact Fields","bitform")+"'"},type:"button",disabled:b,children:"↻"})]}),(0,o.jsx)("div",{className:"btcd-hr mt-1"}),(null==(n=m.default)||null==(r=n.fields)?void 0:r[m.list])&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,o.jsx)("div",{className:"txt-dp",children:(0,o.jsx)("b",{children:(0,i.__)("Form Fields","bitform")})}),(0,o.jsx)("div",{className:"txt-dp",children:(0,o.jsx)("b",{children:(0,i.__)("Zoho Fields","bitform")})})]}),m.field_map.map((function(e,t){return(0,o.jsx)(c,{i:t,field:e,marketingHubConf:m,formFields:u,setMarketingHubConf:h},"marketingHub-m-"+(t+9))})),(0,o.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,o.jsx)("button",{onClick:function(){return(0,l.FP)(m.field_map.length,m,h)},className:"icn-btn sh-sm",type:"button",children:"+"})})]})]})]})}},8530:function(e,t,n){"use strict";var i=n(5893);t.Z=function(e){var t=e.label,n=e.onChange,a=e.value,l=e.disabled,s=e.type,r=e.textarea,o=e.className;return(0,i.jsxs)("label",{className:"btcd-mt-inp "+o,children:[!r&&(0,i.jsx)("input",{type:void 0===s?"text":s,onChange:n,placeholder:" ",disabled:l,value:a}),r&&(0,i.jsx)("textarea",{type:void 0===s?"text":s,onChange:n,placeholder:" ",disabled:l,value:a}),(0,i.jsx)("span",{children:t})]})}}}]);
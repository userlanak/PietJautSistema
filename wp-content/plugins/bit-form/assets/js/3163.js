(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[3163],{3163:function(e,t,n){"use strict";n.r(t);var l=n(2122),s=n(7294),i=n(5977),a=n(5637),r=n(5001),u=n(4383),d=n(5813),o=n(7012),c=n(668),f=n(5893);t.default=function(e){var t=e.formFields,n=e.setIntegration,m=e.integrations,b=e.allIntegURL,h=(0,i.k6)(),p=(0,i.UO)(),_=p.id,x=p.formID,C=(0,s.useState)((0,l.Z)({},m[_])),v=C[0],g=C[1],j=(0,s.useState)(!1),F=j[0],N=j[1],y=(0,s.useState)({show:!1}),k=y[0],w=y[1];return(0,f.jsxs)("div",{style:{width:900},children:[(0,f.jsx)(r.Z,{snack:k,setSnackbar:w}),(0,f.jsxs)("div",{className:"flx mt-3",children:[(0,f.jsx)("b",{className:"wdt-200 d-in-b",children:(0,a.__)("Integration Name:","bitform")}),(0,f.jsx)("input",{className:"btcd-paper-inp w-7",onChange:function(e){return(0,o.Rx)(e,v,g)},name:"name",value:v.name,type:"text",placeholder:(0,a.__)("Integration Name...","bitform")})]}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)(c.Z,{formID:x,formFields:t,fluentCrmConf:v,setFluentCrmConf:g,isLoading:F,step:2,setisLoading:N,setSnackbar:w}),(0,f.jsx)(d.Z,{edit:!0,saveConfig:function(){(0,o.Pd)(v)?(0,u.Mm)(m,n,b,v,h,_,1):w({show:!0,msg:"Please map all required fields to continue."})},disabled:""===v.list_id||v.field_map.length<1}),(0,f.jsx)("br",{})]})}},7012:function(e,t,n){"use strict";n.d(t,{ow:function(){return a},aG:function(){return r},Rx:function(){return u},Pd:function(){return d}});var l=n(2122),s=n(5637),i=n(9492),a=function(e,t,n,a,r){a(!0),(0,i.Z)({},"bitforms_refresh_fluent_crm_lists").then((function(e){if(e&&e.success){var i=(0,l.Z)({},t);i.default||(i.default={}),e.data.fluentCrmList&&(i.default.fluentCrmList=e.data.fluentCrmList),e.data.fluentCrmTags&&(i.default.fluentCrmTags=e.data.fluentCrmTags),r({show:!0,msg:(0,s.__)("FluentCRM list refreshed","bitform")}),n((0,l.Z)({},i))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,s.__)("FluentCRM list refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,s.__)("please try again","bitform")}):r({show:!0,msg:(0,s.__)("FluentCRM list refresh failed. please try again","bitform")});a(!1)})).catch((function(){return a(!1)}))},r=function(e,t,n,a){(0,i.Z)({},"bitforms_fluent_crm_headers").then((function(i){if(i&&i.success){var r=(0,l.Z)({},e);if(i.data.fluentCrmFlelds){r.default.fields=i.data.fluentCrmFlelds;var u=r.default.fields;r.field_map=Object.values(u).filter((function(e){return e.required})).map((function(e){return{formField:"",fluentCRMField:e.key,required:!0}})),a({show:!0,msg:(0,s.__)("Fluent CRM fields refreshed","bitform")})}else a({show:!0,msg:(0,s.__)("No Fluent CRM fields found. Try changing the header row number or try again","bitform")});t((0,l.Z)({},r))}else a({show:!0,msg:(0,s.__)("Fluent CRM fields refresh failed. please try again","bitform")});n(!1)})).catch((function(){return n(!1)}))},u=function(e,t,n){var s=(0,l.Z)({},t);s.name=e.target.value,n((0,l.Z)({},s))},d=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.fluentCRMField&&e.required})):[]).length>0)}},668:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var l=n(2122),s=n(7707),i=n(5637),a=n(8381),r=n(4383),u=n(3921),d=n(5893);function o(e){var t,n,s=e.fluentCrmConf,a=e.setFluentCrmConf,r=(e.formFields,function(e,t){var n=(0,l.Z)({},s);"exists"===t&&(e.target.checked?n.actions.skip_if_exists=!0:delete n.actions.skip_if_exists),"doubleOpIn"===t&&(e.target.checked?n.actions.double_opt_in=!0:delete n.actions.double_opt_in),a((0,l.Z)({},n))});return(0,d.jsxs)("div",{className:"pos-rel d-flx w-8",children:[(0,d.jsx)(u.Z,{checked:(null==(t=s.actions)?void 0:t.skip_if_exists)||!1,onChange:function(e){return r(e,"exists")},className:"wdt-200 mt-4 mr-2",value:"skip_if_exists",title:(0,i.__)("Skip exist Contact","bitform"),subTitle:(0,i.__)("Skip if contact already exist in FluentCRM","bitform")}),(0,d.jsx)(u.Z,{checked:(null==(n=s.actions)?void 0:n.double_opt_in)||!1,onChange:function(e){return r(e,"doubleOpIn")},className:"wdt-200 mt-4 mr-2",value:"double_opt_in",title:(0,i.__)("Double Opt-in","bitform"),subTitle:(0,i.__)("Enable Double Option for new contacts","bitform")})]})}var c=n(7012),f=n(8530);function m(e){var t,n,s,a=e.i,r=e.formFields,u=e.field,o=e.fluentCrmConf,c=e.setFluentCrmConf,m=u.required,b=(null==o||null==(t=o.default)?void 0:t.fields)&&Object.values(null==o||null==(n=o.default)?void 0:n.fields).filter((function(e){return!e.required})),h=function(e,t){var n=(0,l.Z)({},o);n.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(n.field_map[t].customValue=""),c(n)};return(0,d.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,d.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,d.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:u.formField||"",onChange:function(e){return h(e,a)},children:[(0,d.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),r.map((function(e){return"file-up"!==e.type&&(0,d.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)})),(0,d.jsx)("option",{value:"custom",children:(0,i.__)("Custom...","bitform")})]}),"custom"===u.formField&&(0,d.jsx)(f.Z,{onChange:function(e){return function(e,t){var n=(0,l.Z)({},o);n.field_map[t].customValue=e.target.value,c(n)}(e,a)},label:(0,i.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:u.customValue,placeholder:(0,i.__)("Custom Value","bitform")}),(0,d.jsxs)("select",{className:"btcd-paper-inp",name:"fluentCRMField",value:u.fluentCRMField,onChange:function(e){return h(e,a)},disabled:m,children:[(0,d.jsx)("option",{value:"",children:(0,i.__)("Select Field","bitform")}),m?(null==o||null==(s=o.default)?void 0:s.fields)&&Object.values(o.default.fields).map((function(e){return(0,d.jsx)("option",{value:e.key,children:e.label},e.key+"-1")})):b&&b.map((function(e){return(0,d.jsx)("option",{value:e.key,children:e.label},e.key+"-1")}))]})]}),!m&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:function(){return function(e){var t=(0,l.Z)({},o);t.field_map.splice(e,0,{}),c(t)}(a)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,d.jsx)("button",{onClick:function(){return function(e){var t=(0,l.Z)({},o);t.field_map.length>1&&t.field_map.splice(e,1),c(t)}(a)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,d.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})}function b(e){var t,n,u=e.formID,f=e.formFields,b=e.fluentCrmConf,h=e.setFluentCrmConf,p=e.isLoading,_=e.setisLoading,x=e.setSnackbar;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsxs)("div",{className:"flx",children:[(0,d.jsx)("b",{className:"wdt-150 d-in-b",children:(0,i.__)("Fluent CRM List:","bitform")}),(0,d.jsxs)("select",{onChange:function(e){return function(e){var t=(0,l.Z)({},b);t.list_id=e.target.value,h((0,l.Z)({},t))}(e)},name:"list_id",value:b.list_id,className:"btcd-paper-inp w-5",children:[(0,d.jsx)("option",{value:"",children:(0,i.__)("Select Fluent CRM list","bitform")}),(null==b||null==(t=b.default)?void 0:t.fluentCrmList)&&Object.keys(b.default.fluentCrmList).map((function(e){return(0,d.jsx)("option",{value:b.default.fluentCrmList[e].id,children:b.default.fluentCrmList[e].title},e)}))]}),(0,d.jsx)("button",{onClick:function(){return(0,c.ow)(u,b,h,_,x)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,i.__)("Refresh Fluent CRM List","bitform")+"'"},type:"button",disabled:p,children:"↻"})]}),(0,d.jsxs)("div",{className:"flx mt-5",children:[(0,d.jsx)("b",{className:"wdt-150 d-in-b",children:(0,i.__)("Fluent CRM Tags: ","bitform")}),(0,d.jsx)(s.Z,{defaultValue:null==b?void 0:b.tags,className:"btcd-paper-drpdwn w-5",options:(null==b||null==(n=b.default)?void 0:n.fluentCrmTags)&&Object.keys(b.default.fluentCrmTags).map((function(e){return{label:b.default.fluentCrmTags[e].title,value:b.default.fluentCrmTags[e].id}})),onChange:function(e){return function(e){var t=(0,l.Z)({},b);e?(t.tags=e?e.split(","):[],(0,c.aG)(t,h,_,x)):delete t.tags,h((0,l.Z)({},t))}(e)}})]}),p&&(0,d.jsx)(a.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(null==b?void 0:b.tags)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("b",{className:"wdt-100",children:(0,i.__)("Map Fields","bitform")})}),(0,d.jsx)("div",{className:"btcd-hr mt-1"}),(0,d.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,d.jsx)("div",{className:"txt-dp",children:(0,d.jsx)("b",{children:(0,i.__)("Form Fields","bitform")})}),(0,d.jsx)("div",{className:"txt-dp",children:(0,d.jsx)("b",{children:(0,i.__)("Fluent CRM Fields","bitform")})})]}),b.field_map.map((function(e,t){return(0,d.jsx)(m,{i:t,field:e,fluentCrmConf:b,formFields:f,setFluentCrmConf:h},"fluentcrm-m-"+(t+9))})),(0,d.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,d.jsx)("button",{onClick:function(){return(0,r.FP)(b.field_map.length,b,h)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("b",{className:"wdt-100",children:(0,i.__)("Actions","bitform")})}),(0,d.jsx)("div",{className:"btcd-hr mt-1"}),(0,d.jsx)(o,{fluentCrmConf:b,setFluentCrmConf:h,setisLoading:_,setSnackbar:x})]})]})}},5813:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var l=n(5637),s=n(5893);function i(e){var t=e.step,n=e.saveConfig,i=e.edit,a=e.disabled;return i?(0,s.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,s.jsx)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:a,children:(0,l.__)("Save","bitform")})}):(0,s.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,s.jsx)("h2",{className:"ml-3",children:(0,l.__)("Successfully Integrated","bitform")}),(0,s.jsxs)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,l.__)("Finish & Save ","bitform"),"✔"]})]})}},8530:function(e,t,n){"use strict";var l=n(5893);t.Z=function(e){var t=e.label,n=e.onChange,s=e.value,i=e.disabled,a=e.type,r=e.textarea,u=e.className;return(0,l.jsxs)("label",{className:"btcd-mt-inp "+u,children:[!r&&(0,l.jsx)("input",{type:void 0===a?"text":a,onChange:n,placeholder:" ",disabled:i,value:s}),r&&(0,l.jsx)("textarea",{type:void 0===a?"text":a,onChange:n,placeholder:" ",disabled:i,value:s}),(0,l.jsx)("span",{children:t})]})}}}]);
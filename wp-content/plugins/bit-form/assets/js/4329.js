(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[4329],{4329:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var i=a(2122),l=a(7294),n=a(5637),r=a(9151),o=a(5257),s=a(9793),d=a(5893);function c(e){var t=e.formID,a=e.biginConf,c=e.setBiginConf,u=e.step,f=e.setstep,m=e.isLoading,h=e.setisLoading,_=e.setSnackbar,b=e.redirectLocation,p=e.isInfo,g=(0,l.useState)(!1),v=g[0],D=g[1],k=(0,l.useState)({dataCenter:"",clientId:"",clientSecret:""}),C=k[0],F=k[1],x=function(e){var t=(0,i.Z)({},a),l=(0,i.Z)({},C);l[e.target.name]="",t[e.target.name]=e.target.value,F(l),c(t)};return(0,d.jsxs)("div",{className:"btcd-stp-page",style:(0,i.Z)({},{width:1===u&&900},{height:1===u&&"100%"}),children:[(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,n.__)("Integration Name:","bitform")})}),(0,d.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"name",value:a.name,type:"text",placeholder:(0,n.__)("Integration Name...","bitform"),disabled:p}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,n.__)("Data Center:","bitform")})}),(0,d.jsxs)("select",{onChange:x,name:"dataCenter",value:a.dataCenter,className:"btcd-paper-inp w-9 mt-1",disabled:p,children:[(0,d.jsx)("option",{value:"",children:(0,n.__)("--Select a data center--","bitform")}),(0,d.jsx)("option",{value:"com",children:"zoho.com"}),(0,d.jsx)("option",{value:"eu",children:"zoho.eu"}),(0,d.jsx)("option",{value:"com.cn",children:"zoho.com.cn"}),(0,d.jsx)("option",{value:"in",children:"zoho.in"}),(0,d.jsx)("option",{value:"com.au",children:"zoho.com.au"})]}),(0,d.jsx)("div",{style:{color:"red"},children:C.dataCenter}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,n.__)("Homepage URL:","bitform")})}),(0,d.jsx)(r.Z,{value:""+window.location.origin,setSnackbar:_,className:"field-key-cpy w-6 ml-0",readOnly:p}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,n.__)("Authorized Redirect URIs:","bitform")})}),(0,d.jsx)(r.Z,{value:b||window.location.href+"/redirect",setSnackbar:_,className:"field-key-cpy w-6 ml-0",readOnly:p}),(0,d.jsxs)("small",{className:"d-blk mt-5",children:[(0,n.__)("To get Client ID and SECRET , Please Visit","bitform")," ",(0,d.jsx)("a",{className:"btcd-link",href:"https://api-console.zoho."+((null==a?void 0:a.dataCenter)||"com")+"/",target:"_blank",rel:"noreferrer",children:(0,n.__)("Zoho API Console","bitform")})]}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,n.__)("Client id:","bitform")})}),(0,d.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"clientId",value:a.clientId,type:"text",placeholder:(0,n.__)("Client id...","bitform"),disabled:p}),(0,d.jsx)("div",{style:{color:"red"},children:C.clientId}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,n.__)("Client secret:","bitform")})}),(0,d.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"clientSecret",value:a.clientSecret,type:"text",placeholder:(0,n.__)("Client secret...","bitform"),disabled:p}),(0,d.jsx)("div",{style:{color:"red"},children:C.clientSecret}),!p&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("button",{onClick:function(){return(0,s.P_)(a,c,F,D,h,_)},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:v,children:[v?(0,n.__)("Authorized âœ”","bitform"):(0,n.__)("Authorize","bitform"),m&&(0,d.jsx)(o.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,d.jsx)("br",{}),(0,d.jsxs)("button",{onClick:function(){f(2),(0,s.vF)(t,a,c,h,_),document.querySelector(".btcd-s-wrp").scrollTop=0},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!v,children:[(0,n.__)("Next","bitform"),(0,d.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})}},9793:function(e,t,a){"use strict";a.d(t,{Rx:function(){return r},Ck:function(){return o},vF:function(){return d},$8:function(){return c},TF:function(){return f},n:function(){return m},Pd:function(){return _},P_:function(){return b}});var i=a(2122),l=a(5637),n=a(9492),r=function(e,t,a,l,n,r,o,d,c,u){var f=(0,i.Z)({},a);if(0===t){if(d){var m=(0,i.Z)({},c);m[e.target.name]="",u((0,i.Z)({},m))}f[e.target.name]=e.target.value}else f.relatedlists[t-1][e.target.name]=e.target.value;switch(e.target.name){case"module":f=s(t,f,n,l,r,o)}l((0,i.Z)({},f))},o=function(e,t,a,i,l,n,r){var o,s;e&&((null==a||null==(o=a.default)||null==(s=o.relatedlists)||!s[a.module])&&c(l,a,i,n,r));t(e)},s=function(e,t,a,l,n,r){var o,s,d=(0,i.Z)({},t),c=0===e?d.module:d.relatedlists[e-1].module;return 0===e?(d.actions={},d.field_map=[{formField:"",zohoFormField:""}],d.upload_field_map=[{formField:"",zohoFormField:""}],e&&(d.relatedlists[e-1]={})):(d.relatedlists[e-1].field_map=[{formField:"",zohoFormField:""}],d.relatedlists[e-1].upload_field_map=[{formField:"",zohoFormField:""}],d.relatedlists[e-1].actions={}),null!=(o=d.default)&&null!=(s=o.moduleData)&&s[c]?0===e?(d.field_map=h(e,d),Object.keys(d.default.moduleData[c].fileUploadFields).length>0&&(d.upload_field_map=h(e,d,!0))):(d.relatedlists[e-1].field_map=h(e,d),Object.keys(d.default.moduleData[c].fileUploadFields).length>0&&(d.relatedlists[e-1].upload_field_map=h(e,d,!0))):u(e,a,d,l,n,r),d},d=function(e,t,a,r,o){r(!0);var s={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,n.Z)(s,"bitforms_zbigin_refresh_modules").then((function(e){if(e&&e.success){var n=(0,i.Z)({},t);n.default||(n.default={}),e.data.modules&&(n.default.modules=e.data.modules),e.data.tokenDetails&&(n.tokenDetails=e.data.tokenDetails),a((0,i.Z)({},n)),o({show:!0,msg:(0,l.__)("Modules refreshed","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:(0,l.g)((0,l.__)("Modules refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):o({show:!0,msg:(0,l.__)("Modules refresh failed. please try again","bitform")});r(!1)})).catch((function(){return r(!1)}))},c=function(e,t,a,r,o){if(t.module){r(!0);var s={formID:e,module:t.module,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,n.Z)(s,"bitforms_zbigin_refresh_related_lists").then((function(e){var n;if(e&&e.success){var s=(0,i.Z)({},t);e.data.related_modules&&(s.default.relatedlists||(s.default.relatedlists={}),s.default.relatedlists[s.module]=e.data.related_modules),e.data.tokenDetails&&(s.tokenDetails=e.data.tokenDetails),a((0,i.Z)({},s)),o({show:!0,msg:(0,l.__)("RelatedLists refreshed","bitform")})}else null!=e&&null!=(n=e.data)&&n.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,l.__)("RelatedLists refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")}):o({show:!0,msg:(0,l.__)("RelatedLists refresh failed. please try again","bitform")});r(!1)})).catch((function(){return r(!1)}))}},u=function(e,t,a,r,o,s){var d=0===e?a.module:a.relatedlists[e-1].module;if(d){o(!0);var c={formID:t,module:d,dataCenter:a.dataCenter,clientId:a.clientId,clientSecret:a.clientSecret,tokenDetails:a.tokenDetails};(0,n.Z)(c,"bitforms_zbigin_refresh_fields").then((function(t){if(t&&t.success){var n=(0,i.Z)({},a);t.data.fieldDetails&&(n.default.moduleData||(n.default.moduleData={}),n.default.moduleData[d]=t.data.fieldDetails,0===e?(n.field_map=h(e,n),Object.keys(n.default.moduleData[d].fileUploadFields).length>0&&(n.upload_field_map=h(e,n,!0))):(n.relatedlists[e-1].field_map=h(e,n),Object.keys(n.default.moduleData[d].fileUploadFields).length>0&&(n.relatedlists[e-1].upload_field_map=h(e,n,!0)))),t.data.tokenDetails&&(n.tokenDetails=t.data.tokenDetails),r((0,i.Z)({},n))}else s({show:!0,msg:(0,l.__)("Fields refresh failed. please try again","bitform")});o(!1)})).catch((function(){return o(!1)}))}},f=function(e,t,a,r,o,s){var d=0===e?a.module:a.relatedlists[e-1].module;if(d){o(!0);var c={formID:t,module:d,dataCenter:a.dataCenter,clientId:a.clientId,clientSecret:a.clientSecret,tokenDetails:a.tokenDetails};(0,n.Z)(c,"bitforms_zbigin_refresh_tags").then((function(e){if(e&&e.success){var t=(0,i.Z)({},a);e.data.tags&&(t.default.moduleData||(t.default.moduleData={}),t.default.moduleData[d].tags=e.data.tags,s({show:!0,msg:(0,l.__)("Tags Refreshed","bitform")})),e.data.tokenDetails&&(t.tokenDetails=e.data.tokenDetails),r((0,i.Z)({},t))}else s({show:!0,msg:(0,l.__)("Tags refresh failed. please try again","bitform")});o(!1)})).catch((function(){return o(!1)}))}},m=function(e,t,a,r,o){r(!0);var s={formID:e,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,n.Z)(s,"bitforms_zbigin_refresh_users").then((function(e){if(e&&e.success){var n=(0,i.Z)({},t);e.data.users&&(n.default||(n.default={}),n.default.users=e.data.users,o({show:!0,msg:(0,l.__)("Users Refreshed","bitform")})),e.data.tokenDetails&&(n.tokenDetails=e.data.tokenDetails),a((0,i.Z)({},n))}else o({show:!0,msg:(0,l.__)("Users refresh failed. please try again","bitform")});r(!1)})).catch((function(){return r(!1)}))},h=function(e,t,a){var i,l,n=0===e?t.module:t.relatedlists[e-1].module;return a?t.default.moduleData[n].requiredFileUploadFields.length>0?null==(l=t.default.moduleData[n].requiredFileUploadFields)?void 0:l.map((function(e){return{formField:"",zohoFormField:e}})):[{formField:"",zohoFormField:""}]:t.default.moduleData[n].required.length>0?null==(i=t.default.moduleData[n].required)?void 0:i.map((function(e){return{formField:"",zohoFormField:e}})):[{formField:"",zohoFormField:""}]},_=function(e){var t=null!=e&&e.field_map?e.field_map.filter((function(t){var a,i,l;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(a=e.default)||null==(i=a.moduleData)||null==(l=i[e.module])?void 0:l.required.indexOf(t.zohoFormField))})):[],a=e.relatedlists.map((function(e){return e.field_map.filter((function(e){return!e.formField&&e.zohoFormField}))}));return!(t.length>0||a.find((function(e){return e.length})))},b=function(e,t,a,n,r,o){if(e.dataCenter&&e.clientId&&e.clientSecret){r(!0);var s="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=ZohoBigin.settings.modules.READ,ZohoBigin.settings.fields.READ,ZohoBigin.settings.tags.READ,ZohoBigin.users.READ,ZohoBigin.modules.ALL&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+encodeURIComponent(window.location.href)+"/redirect",d=window.open(s,"zohoBigin","width=400,height=609,toolbar=off"),c=setInterval((function(){if(d.closed){clearInterval(c);var a={},s=!1,u=localStorage.getItem("__bitforms_zohoBigin");if(u&&(s=!0,a=JSON.parse(u),localStorage.removeItem("__bitforms_zohoBigin")),a.code&&!a.error&&a&&s){var f=(0,i.Z)({},e);f.accountServer=a["accounts-server"],p(a,f,t,n,r,o)}else{var m=a.error?"Cause: "+a.error:"";o({show:!0,msg:(0,l.__)("Authorization failed","bitform")+" "+m+". "+(0,l.__)("please try again","bitform")}),r(!1)}}}),500)}else a({dataCenter:e.dataCenter?"":(0,l.__)("Data center cann't be empty","bitform"),clientId:e.clientId?"":(0,l.__)("Client ID cann't be empty","bitform"),clientSecret:e.clientSecret?"":(0,l.__)("Secret key cann't be empty","bitform")})},p=function(e,t,a,r,o,s){var d=(0,i.Z)({},e);d.dataCenter=t.dataCenter,d.clientId=t.clientId,d.clientSecret=t.clientSecret,d.redirectURI=encodeURIComponent(window.location.href)+"/redirect",(0,n.Z)(d,"bitforms_zbigin_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var n=(0,i.Z)({},t);n.tokenDetails=e.data,a(n),r(!0),s({show:!0,msg:(0,l.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?s({show:!0,msg:""+(0,l.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bitform")}):s({show:!0,msg:(0,l.__)("Authorization failed. please try again","bitform")});o(!1)}))}}}]);
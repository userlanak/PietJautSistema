(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[1538,851],{5813:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(5637),i=n(5893);function s(e){var t=e.step,n=e.saveConfig,s=e.edit,r=e.disabled;return s?(0,i.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,i.jsx)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:r,children:(0,a.__)("Save","bitform")})}):(0,i.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,i.jsx)("h2",{className:"ml-3",children:(0,a.__)("Successfully Integrated","bitform")}),(0,i.jsxs)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,a.__)("Finish & Save ","bitform"),"✔"]})]})}},1538:function(e,t,n){"use strict";n.r(t);var a=n(5637),i=n(7294),s=(n(8774),n(5977)),r=n(5001),l=n(3231),c=n(4383),o=n(5813),d=n(5318),m=n(851),u=n(5893);t.default=function(e){var t=e.formFields,n=e.setIntegration,f=e.integrations,h=e.allIntegURL,b=(0,s.k6)(),p=(0,s.UO)().formID,x=(0,i.useState)(!1),v=x[0],_=x[1],j=(0,i.useState)(1),g=j[0],y=j[1],C=(0,i.useState)({show:!1}),w=C[0],N=C[1],S=(0,i.useState)({name:"Zoho Mail API",type:"Zoho Mail",clientId:"",clientSecret:"",actions:{},to:"",cc:"",bcc:"",subject:"",body:""}),Z=S[0],k=S[1];return(0,i.useEffect)((function(){window.opener&&(0,c.WK)("zohoMail")}),[]),(0,u.jsxs)("div",{children:[(0,u.jsx)(r.Z,{snack:w,setSnackbar:N}),(0,u.jsx)("div",{className:"txt-center w-9 mt-2",children:(0,u.jsx)(l.Z,{step:3,active:g})}),(0,u.jsx)(m.default,{formID:p,mailConf:Z,setMailConf:k,step:g,setstep:y,isLoading:v,setisLoading:_,setSnackbar:N}),(0,u.jsxs)("div",{className:"btcd-stp-page",style:{width:2===g&&900,height:2===g&&"100%"},children:[(0,u.jsx)(d.Z,{formFields:t,mailConf:Z,setMailConf:k}),(0,u.jsxs)("button",{onClick:function(){return y(3),void(document.querySelector(".btcd-s-wrp").scrollTop=0)},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[(0,a.__)("Next","bitform")," "," ",(0,u.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(0,u.jsx)(o.Z,{step:g,saveConfig:function(){return(0,c.Mm)(f,n,h,Z,b)}})]})}},851:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n(2122),i=n(7294),s=n(5637),r=n(9151),l=n(5257),c=n(7376),o=n(5893);function d(e){e.formID;var t=e.mailConf,n=e.setMailConf,d=e.step,m=e.setstep,u=e.isLoading,f=e.setisLoading,h=e.setSnackbar,b=e.redirectLocation,p=e.isInfo,x=(0,i.useState)(!1),v=x[0],_=x[1],j=(0,i.useState)({dataCenter:"",clientId:"",clientSecret:""}),g=j[0],y=j[1],C=function(e){var i=(0,a.Z)({},t),s=(0,a.Z)({},g);s[e.target.name]="",i[e.target.name]=e.target.value,y(s),n(i)};return(0,o.jsxs)("div",{className:"btcd-stp-page",style:(0,a.Z)({},{width:1===d&&900},{height:1===d&&"100%"}),children:[(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,s.__)("Integration Name:","bitform")})}),(0,o.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:C,name:"name",value:t.name,type:"text",placeholder:(0,s.__)("Integration Name...","bitform"),disabled:p}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,s.__)("Data Center:","bitform")})}),(0,o.jsxs)("select",{onChange:C,name:"dataCenter",value:t.dataCenter,className:"btcd-paper-inp w-9 mt-1",disabled:p,children:[(0,o.jsx)("option",{value:"",children:(0,s.__)("--Select a data center--","bitform")}),(0,o.jsx)("option",{value:"com",children:"zoho.com"}),(0,o.jsx)("option",{value:"eu",children:"zoho.eu"}),(0,o.jsx)("option",{value:"com.cn",children:"zoho.com.cn"}),(0,o.jsx)("option",{value:"in",children:"zoho.in"}),(0,o.jsx)("option",{value:"com.au",children:"zoho.com.au"})]}),(0,o.jsx)("div",{style:{color:"red"},children:g.dataCenter}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,s.__)("Homepage URL:","bitform")})}),(0,o.jsx)(r.Z,{value:""+window.location.origin,setSnackbar:h,className:"field-key-cpy w-6 ml-0",readOnly:p}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,s.__)("Authorized Redirect URIs:","bitform")})}),(0,o.jsx)(r.Z,{value:b||window.location.href+"/redirect",setSnackbar:h,className:"field-key-cpy w-6 ml-0",readOnly:p}),(0,o.jsxs)("small",{className:"d-blk mt-5",children:[(0,s.__)("To get Client ID and SECRET , Please Visit","bitform")," ",(0,o.jsx)("a",{className:"btcd-link",href:"https://api-console.zoho."+((null==t?void 0:t.dataCenter)||"com")+"/",target:"_blank",rel:"noreferrer",children:(0,s.__)("Zoho API Console","bitform")})]}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,s.__)("Client id:","bitform")})}),(0,o.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:C,name:"clientId",value:t.clientId,type:"text",placeholder:(0,s.__)("Client id...","bitform"),disabled:p}),(0,o.jsx)("div",{style:{color:"red"},children:g.clientId}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,s.__)("Client secret:","bitform")})}),(0,o.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:C,name:"clientSecret",value:t.clientSecret,type:"text",placeholder:(0,s.__)("Client secret...","bitform"),disabled:p}),(0,o.jsx)("div",{style:{color:"red"},children:g.clientSecret}),!p&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:function(){return(0,c.P_)(t,n,y,_,f,h)},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:v,children:[v?(0,s.__)("Authorized ✔","bitform"):(0,s.__)("Authorize","bitform"),u&&(0,o.jsx)(l.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("button",{onClick:function(){m(2),document.querySelector(".btcd-s-wrp").scrollTop=0},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!v,children:[(0,s.__)("Next","bitform"),(0,o.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})}},7376:function(e,t,n){"use strict";n.d(t,{ZP:function(){return r},P_:function(){return l}});var a=n(2122),i=n(5637),s=n(9492);function r(e,t,n,i,s,r,l,c,o){var d=(0,a.Z)({},t);if(l){var m=(0,a.Z)({},c);m[e.target.name]="",o((0,a.Z)({},m))}d[e.target.name]=e.target.value,n((0,a.Z)({},d))}var l=function(e,t,n,s,r,l){if(e.dataCenter&&e.clientId&&e.clientSecret){r(!0);var o="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=ZohoMail.accounts.Read,ZohoMail.messages.CREATE,ZohoMail.messages.UPDATE,ZohoMail.Attachments.CREATE,ZohoMail.Attachments.READ,ZohoMail.Attachments.UPDATE&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+encodeURIComponent(window.location.href)+"/redirect",d=window.open(o,"zohoMail","width=400,height=609,toolbar=off"),m=setInterval((function(){if(d.closed){clearInterval(m);var n={},o=!1,u=localStorage.getItem("__bitforms_zohoMail");if(u&&(o=!0,n=JSON.parse(u),localStorage.removeItem("__bitforms_zohoMail")),n.code&&!n.error&&n&&o){var f=(0,a.Z)({},e);f.accountServer=n["accounts-server"],c(n,f,t,s,r,l)}else{var h=n.error?"Cause: "+n.error:"";l({show:!0,msg:(0,i.__)("Authorization failed","bitform")+" "+h+". "+(0,i.__)("please try again","bitform")}),r(!1)}}}),500)}else n({dataCenter:e.dataCenter?"":(0,i.__)("Data center cann't be empty","bitform"),clientId:e.clientId?"":(0,i.__)("Client ID cann't be empty","bitform"),clientSecret:e.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitform")})},c=function(e,t,n,r,l,c){var o=(0,a.Z)({},e);o.dataCenter=t.dataCenter,o.clientId=t.clientId,o.clientSecret=t.clientSecret,o.redirectURI=encodeURIComponent(window.location.href)+"/redirect",(0,s.Z)(o,"bitforms_zmail_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var s=(0,a.Z)({},t);s.tokenDetails=e.data,n(s),r(!0),c({show:!0,msg:(0,i.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?c({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):c({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitform")});l(!1)}))}},5318:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(2122),i=n(7294),s=n(7707),r=n(5637),l=(n(8774),n(2249)),c=n(4401),o=n(3921),d=n(5893);function m(e){var t=e.formFields,n=e.mailConf,l=e.setMailConf,m=(0,i.useState)({show:!1}),u=m[0],f=m[1];return(0,d.jsxs)("div",{className:"pos-rel",children:[(0,d.jsx)("div",{className:"d-flx flx-wrp",children:(0,d.jsx)(o.Z,{onChange:function(){return f({show:"attachments"})},checked:"attachments"in n.actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:(0,r.__)("Attachments","bitform"),subTitle:(0,r.__)("Add attachments from BitForm to mail pushed to Zoho Mail.","bitform")})}),(0,d.jsxs)(c.Z,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:"attachments"===u.show,close:function(){return f({show:!1})},action:function(){return f({show:!1})},title:(0,r.__)("Select Attachment","bitform"),children:[(0,d.jsx)("div",{className:"btcd-hr mt-2"}),(0,d.jsx)("div",{className:"mt-2",children:(0,r.__)("Select file upload fields","bitform")}),(0,d.jsx)(s.Z,{defaultValue:n.actions.attachments,className:"mt-2 w-9",onChange:function(e){return function(e,t){var i=(0,a.Z)({},n);"attachments"===t&&(""!==e?i.actions.attachments=e:delete i.actions.attachments),l((0,a.Z)({},i))}(e,"attachments")},options:t.filter((function(e){return"file-up"===e.type})).map((function(e){return{label:e.name,value:e.key}}))})]})]})}function u(e){var t=e.formFields,n=e.mailConf,c=e.setMailConf,o=(0,i.useState)(""),u=(o[0],o[1]),f=function(){var e=[];"undefined"!==typeof bits&&bits.userMail&&Array.isArray(bits.userMail)&&e.push.apply(e,bits.userMail);var n=[];return t.map((function(e){"email"===e.type&&n.push({label:e.name,value:"${"+e.key+"}"})})),e.push({title:"Form Fields",type:"group",childs:n}),e};(0,i.useEffect)((function(){window.tinymce&&tinymce.remove()}),[]),(0,i.useEffect)((function(){!function(){if("undefined"!==typeof tinymce&&t.length>0){for(var e=document.querySelectorAll(".form-fields-em"),n=0;n<e.length;n+=1)e[n].style.display="none";tinymce.init({selector:"#body-content",plugins:"link hr lists wpview wpemoji",theme:"modern",menubar:!1,branding:!1,resize:"verticle",min_width:300,toolbar:"formatselect bold italic | alignleft aligncenter alignright | outdent indent | link | undo redo | hr | addFormField | toggleCode",setup:function(e){e.on("Paste Change input Undo Redo",(function(){b(e.getContent())})),e.addButton("addFormField",{text:"Form Fields ",tooltip:"Add Form Field Value in Message",type:"menubutton",icon:!1,menu:t.map((function(t){return!t.type.match(/^(file-up|recaptcha)$/)&&{text:t.name,onClick:function(){e.insertContent("${"+t.key+"}")}}}))}),e.addButton("toogleCode",{text:"</>",tooltip:(0,r.__)("Toggle preview","bitform"),icon:!1,onclick:function(t){var n=tinymce.dom.DomQuery,a=n("textarea"),i=n(e.iframeElement);a.value=e.getContent({source_view:!0}),i.toggleClass("hidden"),a.toggleClass("visible"),n("iframe.hidden").length>0?a.prependTo(".mce-edit-area"):(i.value=a.value,a.appendTo("body"))}})}})}}()}),[t]);var h=function(e,t){c((function(n){var i=(0,a.Z)({},n);return i[t]=e,i}))},b=function(e){u(e);var t=(0,l.p$)(n);t.body=e,c((0,a.Z)({},t))};return(0,d.jsxs)("div",{style:{width:875},children:[(0,d.jsxs)("div",{className:"flx",children:[(0,d.jsx)("b",{style:{width:100},children:(0,r.__)("Type:","bitform")}),(0,d.jsxs)("select",{onChange:function(e){return h(e.target.value,"mailType")},className:"btcd-paper-inp",style:{width:150},value:n.mailType,children:[(0,d.jsx)("option",{value:"",children:(0,r.__)("Select type","bitform")}),(0,d.jsx)("option",{value:"send",children:(0,r.__)("Send Email","bitform")}),(0,d.jsx)("option",{value:"draft",children:(0,r.__)("Save as Draft","bitform")})]})]}),(0,d.jsxs)("div",{className:"flx",children:[(0,d.jsx)("b",{style:{width:100},children:"To:"}),(0,d.jsx)(s.Z,{className:"w-7 mt-2 btcd-paper-drpdwn",defaultValue:n.to,placeholder:(0,r.__)("Add Email Receiver","bitform"),onChange:function(e){return h(e,"to")},options:f(),customValue:!0})]}),(0,d.jsxs)("div",{className:"flx",children:[(0,d.jsx)("b",{style:{width:100},children:(0,r.__)("CC:","bitform")}),(0,d.jsx)(s.Z,{className:"w-7 mt-2 btcd-paper-drpdwn",defaultValue:n.cc,placeholder:(0,r.__)("Add Email CC","bitform"),onChange:function(e){return h(e,"cc")},options:f(),customValue:!0})]}),(0,d.jsxs)("div",{className:"flx",children:[(0,d.jsx)("b",{style:{width:100},children:(0,r.__)("BCC:","bitform")}),(0,d.jsx)(s.Z,{className:"w-7 mt-2 btcd-paper-drpdwn",defaultValue:n.bcc,placeholder:(0,r.__)("Add Email BCC","bitform"),onChange:function(e){return h(e,"bcc")},options:f(),customValue:!0})]}),(0,d.jsxs)("div",{className:"mt-2 flx",children:[(0,d.jsx)("b",{style:{width:100},children:(0,r.__)("Subject:","bitform")}),(0,d.jsx)("input",{type:"text",onChange:function(e){return h(e.target.value,"subject")},className:"btcd-paper-inp w-7",placeholder:(0,r.__)("Email Subject Here","bitform"),value:n.subject||""}),(0,d.jsxs)("select",{onChange:function(e){var t=(0,a.Z)({},n);t.subject+=e.target.value,c((0,a.Z)({},t)),e.target.value=""},className:"btcd-paper-inp ml-2",style:{width:150},children:[(0,d.jsx)("option",{value:"",children:(0,r.__)("Add form field","bitform")}),null!==t&&t.map((function(e){return!e.type.match(/^(file-up|recaptcha)$/)&&(0,d.jsx)("option",{value:"${"+e.key+"}",children:e.name},e.key)}))]})]}),(0,d.jsxs)("div",{className:"mt-3",children:[(0,d.jsx)("div",{className:"flx flx-between",children:(0,d.jsx)("b",{children:(0,r.__)("Body:","bitform")})}),(0,d.jsx)("label",{htmlFor:"body-content",className:"mt-2 w-10",children:(0,d.jsx)("textarea",{id:"body-content",className:"btcd-paper-inp mt-1",rows:"5",value:n.body||"",onChange:function(e){return h(e.target.value,"body")}})})]}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("b",{className:"wdt-100",children:(0,r.__)("Actions","bitform")})}),(0,d.jsx)("div",{className:"btcd-hr mt-1"}),(0,d.jsx)(m,{mailConf:n,setMailConf:c,formFields:t})]})}},3231:function(e,t,n){"use strict";var a=n(7294),i=n(5893);t.Z=function(e){var t=e.step,n=e.active,s=e.className;return(0,i.jsx)("div",{className:"d-in-b "+s,children:(0,i.jsxs)("div",{className:"flx flx-center",children:[Array(n).fill(0).map((function(e,t){return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)("div",{className:"btcd-stp flx flx-center stp-a  txt-center",children:t+1}),n-1!==t&&(0,i.jsx)("div",{className:"btcd-stp-line stp-line-a"})]},"stp-"+(t+21))})),t-n!==0&&(0,i.jsx)("div",{className:"btcd-stp-line"}),Array(t-n).fill(0).map((function(e,s){return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)("div",{className:"btcd-stp flx flx-center txt-center",children:s+n+1}),t-n-1!==s&&(0,i.jsx)("div",{className:"btcd-stp-line "})]},"stp-"+(s+23))}))]})})}}}]);
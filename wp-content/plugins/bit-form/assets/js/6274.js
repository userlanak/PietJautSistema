(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[6274],{6274:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var l=a(2122),i=a(7294),r=a(5637),n=a(9151),o=a(5257),d=a(1084),s=a(5893);function c(e){var t=e.formID,a=e.recruitConf,c=e.setRecruitConf,u=e.step,f=e.setstep,m=e.isLoading,h=e.setisLoading,_=e.setSnackbar,p=e.redirectLocation,b=e.isInfo,g=(0,i.useState)(!1),v=g[0],F=g[1],y=(0,i.useState)({dataCenter:"",clientId:"",clientSecret:""}),C=y[0],D=y[1],x=function(e){var t=(0,l.Z)({},a),i=(0,l.Z)({},C);i[e.target.name]="",t[e.target.name]=e.target.value,D(i),c(t)};return(0,s.jsxs)("div",{className:"btcd-stp-page",style:(0,l.Z)({},{width:1===u&&900},{height:1===u&&"100%"}),children:[(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("b",{children:(0,r.__)("Integration Name:","bitform")})}),(0,s.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"name",value:a.name,type:"text",placeholder:(0,r.__)("Integration Name...","bitform"),disabled:b}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("b",{children:(0,r.__)("Data Center:","bitform")})}),(0,s.jsxs)("select",{onChange:x,name:"dataCenter",value:a.dataCenter,className:"btcd-paper-inp w-9 mt-1",disabled:b,children:[(0,s.jsx)("option",{value:"",children:(0,r.__)("--Select a data center--","bitform")}),(0,s.jsx)("option",{value:"com",children:"zoho.com"}),(0,s.jsx)("option",{value:"eu",children:"zoho.eu"}),(0,s.jsx)("option",{value:"com.cn",children:"zoho.com.cn"}),(0,s.jsx)("option",{value:"in",children:"zoho.in"}),(0,s.jsx)("option",{value:"com.au",children:"zoho.com.au"})]}),(0,s.jsx)("div",{style:{color:"red"},children:C.dataCenter}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("b",{children:(0,r.__)("Homepage URL:","bitform")})}),(0,s.jsx)(n.Z,{value:""+window.location.origin,setSnackbar:_,className:"field-key-cpy w-6 ml-0",readOnly:b}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("b",{children:(0,r.__)("Authorized Redirect URIs:","bitform")})}),(0,s.jsx)(n.Z,{value:p||window.location.href+"/redirect",setSnackbar:_,className:"field-key-cpy w-6 ml-0",readOnly:b}),(0,s.jsxs)("small",{className:"d-blk mt-5",children:[(0,r.__)("To get Client ID and SECRET , Please Visit","bitform")," ",(0,s.jsx)("a",{className:"btcd-link",href:"https://api-console.zoho."+((null==a?void 0:a.dataCenter)||"com")+"/",target:"_blank",rel:"noreferrer",children:(0,r.__)("Zoho API Console","bitform")})]}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("b",{children:(0,r.__)("Client id:","bitform")})}),(0,s.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"clientId",value:a.clientId,type:"text",placeholder:(0,r.__)("Client id...","bitform"),disabled:b}),(0,s.jsx)("div",{style:{color:"red"},children:C.clientId}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("b",{children:(0,r.__)("Client secret:","bitform")})}),(0,s.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"clientSecret",value:a.clientSecret,type:"text",placeholder:(0,r.__)("Client secret...","bitform"),disabled:b}),(0,s.jsx)("div",{style:{color:"red"},children:C.clientSecret}),!b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:function(){return(0,d.P_)(a,c,D,F,h,_)},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:v,children:[v?(0,r.__)("Authorized âœ”","bitform"):(0,r.__)("Authorize","bitform"),m&&(0,s.jsx)(o.Z,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,s.jsx)("br",{}),(0,s.jsxs)("button",{onClick:function(){f(2),(0,d.vF)(t,a,c,h,_),document.querySelector(".btcd-s-wrp").scrollTop=0},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!v,children:[(0,r.__)("Next","bitform"),(0,s.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})}},1084:function(e,t,a){"use strict";a.d(t,{Rx:function(){return n},Ck:function(){return o},vF:function(){return s},G7:function(){return c},$8:function(){return u},Pd:function(){return h},P_:function(){return _}});var l=a(2122),i=a(5637),r=a(9492),n=function(e,t,a,i,r,n,o,s,c,u){var f=(0,l.Z)({},a);if(0===t){if(s){var m=(0,l.Z)({},c);m[e.target.name]="",u((0,l.Z)({},m))}f[e.target.name]=e.target.value}else f.relatedlists[t-1][e.target.name]=e.target.value;switch(e.target.name){case"module":f=d(t,f,r,i,n,o)}i((0,l.Z)({},f))},o=function(e,t,a,l,i,r,n){var o,d;e&&((null==a||null==(o=a.default)||null==(d=o.relatedlists)||!d[a.module])&&u(i,a,l,r,n));t(e)},d=function(e,t,a,i,r,n){var o,d,s=(0,l.Z)({},t),c=0===e?s.module:s.relatedlists[e-1].module;return 0===e?(s.actions={},s.field_map=[{formField:"",zohoFormField:""}],s.upload_field_map=[{formField:"",zohoFormField:""}],e&&(s.relatedlists[e-1]={})):(s.relatedlists[e-1].field_map=[{formField:"",zohoFormField:""}],s.relatedlists[e-1].upload_field_map=[{formField:"",zohoFormField:""}],s.relatedlists[e-1].actions={}),null!=(o=s.default)&&null!=(d=o.moduleData)&&d[c]?0===e?(s.field_map=m(e,s),Object.keys(s.default.moduleData[c].fileUploadFields).length>0&&(s.upload_field_map=m(e,s,!0))):(s.relatedlists[e-1].field_map=m(e,s),Object.keys(s.default.moduleData[c].fileUploadFields).length>0&&(s.relatedlists[e-1].upload_field_map=m(e,s,!0))):f(e,a,s,i,r,n),s},s=function(e,t,a,n,o){n(!0);var d={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,r.Z)(d,"bitforms_zrecruit_refresh_modules").then((function(e){if(e&&e.success){var r=(0,l.Z)({},t);r.default||(r.default={}),e.data.modules&&(r.default.modules=e.data.modules),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),a((0,l.Z)({},r)),o({show:!0,msg:(0,i.__)("Modules refreshed","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:(0,i.g)((0,i.__)("Modules refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):o({show:!0,msg:(0,i.__)("Modules refresh failed. please try again","bitform")});n(!1)})).catch((function(){return n(!1)}))},c=function(e,t,a,n,o){n(!0);var d={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,r.Z)(d,"bitforms_zrecruit_refresh_notetypes").then((function(e){if(e&&e.success){var r=(0,l.Z)({},t);r.default||(r.default={}),e.data.noteTypes&&(r.default.noteTypes=e.data.noteTypes),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),a((0,l.Z)({},r)),o({show:!0,msg:(0,i.__)("Note Types refreshed","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:(0,i.g)((0,i.__)("Note Types refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):o({show:!0,msg:(0,i.__)("Note Types refresh failed. please try again","bitform")});n(!1)})).catch((function(){return n(!1)}))},u=function(e,t,a,n,o){if(t.module){n(!0);var d={formID:e,module:t.module,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,r.Z)(d,"bitforms_zrecruit_refresh_related_lists").then((function(e){var r;if(e&&e.success){var d=(0,l.Z)({},t);e.data.related_modules&&(d.default.relatedlists||(d.default.relatedlists={}),d.default.relatedlists[d.module]=e.data.related_modules),e.data.tokenDetails&&(d.tokenDetails=e.data.tokenDetails),a((0,l.Z)({},d)),o({show:!0,msg:(0,i.__)("RelatedLists refreshed","bitform")})}else null!=e&&null!=(r=e.data)&&r.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:(0,i.g)((0,i.__)("RelatedLists refresh failed Cause: %s. please try again","bitform"),e.data.data||e.data)}):o({show:!0,msg:(0,i.__)("RelatedLists refresh failed. please try again","bitform")});n(!1)})).catch((function(){return n(!1)}))}},f=function(e,t,a,n,o,d){var s=0===e?a.module:a.relatedlists[e-1].module;if(s){o(!0);var c={formID:t,module:s,dataCenter:a.dataCenter,clientId:a.clientId,clientSecret:a.clientSecret,tokenDetails:a.tokenDetails};(0,r.Z)(c,"bitforms_zrecruit_get_fields").then((function(t){if(t&&t.success){var r=(0,l.Z)({},a);t.data.fieldDetails&&(r.default.moduleData||(r.default.moduleData={}),r.default.moduleData[s]=t.data.fieldDetails,0===e?(r.field_map=m(e,r),Object.keys(r.default.moduleData[s].fileUploadFields).length>0&&(r.upload_field_map=m(e,r,!0))):(r.relatedlists[e-1].field_map=m(e,r),Object.keys(r.default.moduleData[s].fileUploadFields).length>0&&(r.relatedlists[e-1].upload_field_map=m(e,r,!0)))),t.data.tokenDetails&&(r.tokenDetails=t.data.tokenDetails),n((0,l.Z)({},r))}else d({show:!0,msg:(0,i.__)("Fields refresh failed. please try again","bitform")});o(!1)})).catch((function(){return o(!1)}))}},m=function(e,t,a){var l,i,r=0===e?t.module:t.relatedlists[e-1].module;return a?t.default.moduleData[r].requiredFileUploadFields.length>0?null==(i=t.default.moduleData[r].requiredFileUploadFields)?void 0:i.map((function(e){return{formField:"",zohoFormField:e}})):[{formField:"",zohoFormField:""}]:t.default.moduleData[r].required.length>0?null==(l=t.default.moduleData[r].required)?void 0:l.map((function(e){return{formField:"",zohoFormField:e}})):[{formField:"",zohoFormField:""}]},h=function(e){var t=null!=e&&e.field_map?e.field_map.filter((function(t){var a,l,i;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(a=e.default)||null==(l=a.moduleData)||null==(i=l[e.module])?void 0:i.required.indexOf(t.zohoFormField))})):[],a=null!=e&&e.upload_field_map?e.upload_field_map.filter((function(t){var a,l,i;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(a=e.default)||null==(l=a.moduleData)||null==(i=l[e.module])?void 0:i.requiredFileUploadFields.indexOf(t.zohoFormField))})):[],l=e.relatedlists.map((function(e){return e.field_map.filter((function(e){return!e.formField&&e.zohoFormField}))})),i=e.relatedlists.map((function(e){return e.upload_field_map.filter((function(e){return!e.formField&&e.zohoFormField}))}));return!(t.length>0||a.length>0||l.some((function(e){return e.length}))||i.some((function(e){return e.length})))},_=function(e,t,a,r,n,o){if(e.dataCenter&&e.clientId&&e.clientSecret){n(!0);var d="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=ZohoRecruit.users.ALL,ZohoRecruit.modules.all&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+encodeURIComponent(window.location.href)+"/redirect",s=window.open(d,"zohoRecruit","width=400,height=609,toolbar=off"),c=setInterval((function(){if(s.closed){clearInterval(c);var a={},d=!1,u=localStorage.getItem("__bitforms_zohoRecruit");if(u&&(d=!0,a=JSON.parse(u),localStorage.removeItem("__bitforms_zohoRecruit")),a.code&&!a.error&&a&&d){var f=(0,l.Z)({},e);f.accountServer=a["accounts-server"],p(a,f,t,r,n,o)}else{var m=a.error?"Cause: "+a.error:"";o({show:!0,msg:(0,i.__)("Authorization failed","bitform")+" "+m+". "+(0,i.__)("please try again","bitform")}),n(!1)}}}),500)}else a({dataCenter:e.dataCenter?"":(0,i.__)("Data center cann't be empty","bitform"),clientId:e.clientId?"":(0,i.__)("Client ID cann't be empty","bitform"),clientSecret:e.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitform")})},p=function(e,t,a,n,o,d){var s=(0,l.Z)({},e);s.dataCenter=t.dataCenter,s.clientId=t.clientId,s.clientSecret=t.clientSecret,s.redirectURI=encodeURIComponent(window.location.href)+"/redirect",(0,r.Z)(s,"bitforms_zrecruit_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var r=(0,l.Z)({},t);r.tokenDetails=e.data,a(r),n(!0),d({show:!0,msg:(0,i.__)("Authorized Successfully","bitform")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?d({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitform")}):d({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitform")});o(!1)}))}}}]);
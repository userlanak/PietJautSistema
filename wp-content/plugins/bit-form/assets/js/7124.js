(self.webpackChunk_bitforms=self.webpackChunk_bitforms||[]).push([[7124],{5813:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(5637),s=n(5893);function l(e){var t=e.step,n=e.saveConfig,l=e.edit,a=e.disabled;return l?(0,s.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,s.jsx)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:a,children:(0,i.__)("Save","bitform")})}):(0,s.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===t&&"90%",height:3===t&&"100%"},children:[(0,s.jsx)("h2",{className:"ml-3",children:(0,i.__)("Successfully Integrated","bitform")}),(0,s.jsxs)("button",{onClick:n,className:"btn btcd-btn-lg green sh-sm",type:"button",children:[(0,i.__)("Finish & Save ","bitform"),"✔"]})]})}},7124:function(e,t,n){"use strict";n.r(t);var i=n(2122),s=n(7294),l=n(5977),a=n(5637),r=n(5001),o=n(4383),d=n(5813),c=n(4263),u=n(9746),f=n(5893);t.default=function(e){var t=e.formFields,n=e.setIntegration,m=e.integrations,h=e.allIntegURL,b=(0,l.k6)(),p=(0,l.UO)(),x=p.id,v=p.formID,_=(0,s.useState)((0,i.Z)({},m[x])),j=_[0],g=_[1],N=(0,s.useState)(!1),w=N[0],C=N[1],y=(0,s.useState)({show:!1}),F=y[0],Z=y[1];return(0,f.jsxs)("div",{style:{width:900},children:[(0,f.jsx)(r.Z,{snack:F,setSnackbar:Z}),(0,f.jsxs)("div",{className:"flx mt-3",children:[(0,f.jsx)("b",{className:"wdt-200 d-in-b",children:(0,a.__)("Integration Name:","bitform")}),(0,f.jsx)("input",{className:"btcd-paper-inp w-7",onChange:function(e){return(0,c.Rx)(e,j,g)},name:"name",value:j.name,type:"text",placeholder:(0,a.__)("Integration Name...","bitform")})]}),(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),(0,f.jsx)(u.Z,{formID:v,formFields:t,mailPoetConf:j,setMailPoetConf:g,isLoading:w,step:2,setisLoading:C,setSnackbar:Z,edit:j.lists}),(0,f.jsx)(d.Z,{edit:!0,saveConfig:function(){(0,c.Pd)(j)?(0,o.Mm)(m,n,h,j,b,x,1):Z({show:!0,msg:"Please map all required fields to continue."})},disabled:""===j.lists||j.field_map.length<1}),(0,f.jsx)("br",{})]})}},4263:function(e,t,n){"use strict";n.d(t,{XE:function(){return a},eE:function(){return r},Rx:function(){return o},Pd:function(){return d}});var i=n(2122),s=n(5637),l=n(9492),a=function(e,t,n,a,r){a(!0),(0,l.Z)({},"bitforms_refresh_news_letter").then((function(e){if(e&&e.success){var l=(0,i.Z)({},t);l.default||(l.default={}),e.data.newsletterList&&(l.default.newsletterList=e.data.newsletterList),r({show:!0,msg:(0,s.__)("Newsletter list refreshed","bitform")}),n((0,i.Z)({},l))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,s.__)("Newsletter list refresh failed Cause:","bitform")+(e.data.data||e.data)+". "+(0,s.__)("please try again","bitform")}):r({show:!0,msg:(0,s.__)("Newsletter list refresh failed. please try again","bitform")});a(!1)})).catch((function(){return a(!1)}))},r=function(e,t,n,a){(0,l.Z)({},"bitforms_mail_poet_list_headers").then((function(l){if(l&&l.success){var r=(0,i.Z)({},e);if(l.data.mailPoetFields){r.default.fields=l.data.mailPoetFields;var o=r.default.fields;r.field_map=Object.values(o).filter((function(e){return e.required})).map((function(e){return{formField:"",mailPoetField:e.id,required:!0}})),a({show:!0,msg:(0,s.__)("Mailpoet fields refreshed","bitform")})}else a({show:!0,msg:(0,s.__)("No Mailpoet fields found. Try changing the header row number or try again","bitform")});l.data.tokenDetails&&(r.tokenDetails=l.data.tokenDetails),t((0,i.Z)({},r))}else a({show:!0,msg:(0,s.__)("Mailpoet fields refresh failed. please try again","bitform")});n(!1)})).catch((function(){return n(!1)}))},o=function(e,t,n){var s=(0,i.Z)({},t);s.name=e.target.value,n((0,i.Z)({},s))},d=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(e){return!e.formField&&e.mailPoetField&&e.required})):[]).length>0)}},9746:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(2122),s=n(7707),l=n(5637),a=n(8381),r=n(4383),o=n(4263),d=n(8530),c=n(5893);function u(e){var t,n,s,a=e.i,r=e.formFields,o=e.field,u=e.mailPoetConf,f=e.setMailPoetConf,m=o.required,h=(null==u||null==(t=u.default)?void 0:t.fields)&&Object.values(null==u||null==(n=u.default)?void 0:n.fields).filter((function(e){return""===e.required})),b=function(e,t){var n=(0,i.Z)({},u);n.field_map[t][e.target.name]=e.target.value,"custom"===e.target.value&&(n.field_map[t].customValue=""),f(n)};return(0,c.jsxs)("div",{className:"flx mt-2 mr-1",children:[(0,c.jsxs)("div",{className:"flx integ-fld-wrp",children:[(0,c.jsxs)("select",{className:"btcd-paper-inp mr-2",name:"formField",value:o.formField||"",onChange:function(e){return b(e,a)},children:[(0,c.jsx)("option",{value:"",children:(0,l.__)("Select Field","bitform")}),r.map((function(e){return"file-up"!==e.type&&(0,c.jsx)("option",{value:e.key,children:e.name},"ff-zhcrm-"+e.key)})),(0,c.jsx)("option",{value:"custom",children:(0,l.__)("Custom...","bitform")})]}),"custom"===o.formField&&(0,c.jsx)(d.Z,{onChange:function(e){return function(e,t){var n=(0,i.Z)({},u);n.field_map[t].customValue=e.target.value,f(n)}(e,a)},label:(0,l.__)("Custom Value","bitform"),className:"mr-2",type:"text",value:o.customValue,placeholder:(0,l.__)("Custom Value","bitform")}),(0,c.jsxs)("select",{className:"btcd-paper-inp",name:"mailPoetField",value:o.mailPoetField,onChange:function(e){return b(e,a)},disabled:m,children:[(0,c.jsx)("option",{value:"",children:(0,l.__)("Select Field","bitform")}),m?(null==u||null==(s=u.default)?void 0:s.fields)&&Object.values(u.default.fields).map((function(e){return(0,c.jsx)("option",{value:e.id,children:e.name},e.id+"-1")})):h&&h.map((function(e){return(0,c.jsx)("option",{value:e.id,children:e.name},e.id+"-1")}))]})]}),!m&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:function(){return function(e){var t=(0,i.Z)({},u);t.field_map.splice(e,0,{}),f(t)}(a)},className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),(0,c.jsx)("button",{onClick:function(){return function(e){var t=(0,i.Z)({},u);t.field_map.length>1&&t.field_map.splice(e,1),f(t)}(a)},className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:(0,c.jsx)("span",{className:"btcd-icn icn-trash-2"})})]})]})}function f(e){var t,n=e.formID,d=e.formFields,f=e.mailPoetConf,m=e.setMailPoetConf,h=e.isLoading,b=e.setisLoading,p=e.setSnackbar,x=function(e){var t=(0,i.Z)({},f);e?(t.lists=e?e.split(","):[],(0,o.eE)(t,m,b,p)):delete t.lists,m((0,i.Z)({},t))};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("br",{}),(0,c.jsxs)("div",{className:"flx",children:[(0,c.jsx)("b",{className:"wdt-100 d-in-b",children:(0,l.__)("List: ","bitform")}),(0,c.jsx)(s.Z,{defaultValue:null==f?void 0:f.lists,className:"btcd-paper-drpdwn w-5",options:(null==f||null==(t=f.default)?void 0:t.newsletterList)&&Object.keys(f.default.newsletterList).map((function(e){return{label:f.default.newsletterList[e].newsletterName,value:f.default.newsletterList[e].newsletterId}})),onChange:function(e){return x(e)}}),(0,c.jsx)("button",{onClick:function(){return x(n)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,l.__)("Refresh MailPoet List","bitform")+"'"},type:"button",disabled:h,children:"↻"})]}),h&&(0,c.jsx)(a.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(null==f?void 0:f.lists)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsx)("b",{className:"wdt-100",children:(0,l.__)("Map Fields","bitform")})}),(0,c.jsx)("div",{className:"btcd-hr mt-1"}),(0,c.jsxs)("div",{className:"flx flx-around mt-2 mb-1",children:[(0,c.jsx)("div",{className:"txt-dp",children:(0,c.jsx)("b",{children:(0,l.__)("Form Fields","bitform")})}),(0,c.jsx)("div",{className:"txt-dp",children:(0,c.jsx)("b",{children:(0,l.__)("MailPoet Fields","bitform")})})]}),f.field_map.map((function(e,t){return(0,c.jsx)(u,{i:t,field:e,mailPoetConf:f,formFields:d,setMailPoetConf:m},"mailpoet-m-"+(t+9))})),(0,c.jsx)("div",{className:"txt-center  mt-2",style:{marginRight:85},children:(0,c.jsx)("button",{onClick:function(){return(0,r.FP)(f.field_map.length,f,m)},className:"icn-btn sh-sm",type:"button",children:"+"})}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{})]})]})}},8530:function(e,t,n){"use strict";var i=n(5893);t.Z=function(e){var t=e.label,n=e.onChange,s=e.value,l=e.disabled,a=e.type,r=e.textarea,o=e.className;return(0,i.jsxs)("label",{className:"btcd-mt-inp "+o,children:[!r&&(0,i.jsx)("input",{type:void 0===a?"text":a,onChange:n,placeholder:" ",disabled:l,value:s}),r&&(0,i.jsx)("textarea",{type:void 0===a?"text":a,onChange:n,placeholder:" ",disabled:l,value:s}),(0,i.jsx)("span",{children:t})]})}}}]);